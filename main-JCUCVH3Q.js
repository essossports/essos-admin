var _R=Object.defineProperty,IR=Object.defineProperties;var wR=Object.getOwnPropertyDescriptors;var RI=Object.getOwnPropertySymbols,ER=Object.getPrototypeOf,DR=Object.prototype.hasOwnProperty,CR=Object.prototype.propertyIsEnumerable,bR=Reflect.get;var MI=(t,e,n)=>e in t?_R(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,S=(t,e)=>{for(var n in e||={})DR.call(e,n)&&MI(t,n,e[n]);if(RI)for(var n of RI(e))CR.call(e,n)&&MI(t,n,e[n]);return t},le=(t,e)=>IR(t,wR(e));var gr=(t,e,n)=>bR(ER(t),n,e);var f=(t,e,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(u){i(u)}},s=c=>{try{a(n.throw(c))}catch(u){i(u)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(t,e)).next())});var xI=null;var Jh=1,Zh=Symbol("SIGNAL");function oe(t){let e=xI;return xI=t,e}var NI={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function TR(t){if(!(tf(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Jh)){if(!t.producerMustRecompute(t)&&!Xh(t)){t.dirty=!1,t.lastCleanEpoch=Jh;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Jh}}function PI(t){return t&&(t.nextProducerIndex=0),oe(t)}function OI(t,e){if(oe(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(tf(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)ef(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Xh(t){Pc(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(TR(n),r!==n.version))return!0}return!1}function kI(t){if(Pc(t),tf(t))for(let e=0;e<t.producerNode.length;e++)ef(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function ef(t,e){if(SR(t),Pc(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)ef(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Pc(i),i.producerIndexOfThis[r]=e}}function tf(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Pc(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function SR(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function AR(){throw new Error}var RR=AR;function FI(t){RR=t}function U(t){return typeof t=="function"}function io(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Oc=io(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ri(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Me=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(U(r))try{r()}catch(o){e=o instanceof Oc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{VI(o)}catch(s){e=e??[],s instanceof Oc?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Oc(e)}}add(e){var n;if(e&&e!==this)if(this.closed)VI(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ri(n,e)}remove(e){let{_finalizers:n}=this;n&&ri(n,e),e instanceof t&&e._removeParent(this)}};Me.EMPTY=(()=>{let t=new Me;return t.closed=!0,t})();var nf=Me.EMPTY;function kc(t){return t instanceof Me||t&&"closed"in t&&U(t.remove)&&U(t.add)&&U(t.unsubscribe)}function VI(t){U(t)?t():t.unsubscribe()}var zt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var oo={setTimeout(t,e,...n){let{delegate:r}=oo;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=oo;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Fc(t){oo.setTimeout(()=>{let{onUnhandledError:e}=zt;if(e)e(t);else throw t})}function Ps(){}var LI=rf("C",void 0,void 0);function UI(t){return rf("E",void 0,t)}function jI(t){return rf("N",t,void 0)}function rf(t,e,n){return{kind:t,value:e,error:n}}var ii=null;function so(t){if(zt.useDeprecatedSynchronousErrorHandling){let e=!ii;if(e&&(ii={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=ii;if(ii=null,n)throw r}}else t()}function BI(t){zt.useDeprecatedSynchronousErrorHandling&&ii&&(ii.errorThrown=!0,ii.error=t)}var oi=class extends Me{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,kc(e)&&e.add(this)):this.destination=NR}static create(e,n,r){return new ao(e,n,r)}next(e){this.isStopped?sf(jI(e),this):this._next(e)}error(e){this.isStopped?sf(UI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?sf(LI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},MR=Function.prototype.bind;function of(t,e){return MR.call(t,e)}var af=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Vc(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Vc(r)}else Vc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Vc(n)}}},ao=class extends oi{constructor(e,n,r){super();let i;if(U(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&zt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&of(e.next,o),error:e.error&&of(e.error,o),complete:e.complete&&of(e.complete,o)}):i=e}this.destination=new af(i)}};function Vc(t){zt.useDeprecatedSynchronousErrorHandling?BI(t):Fc(t)}function xR(t){throw t}function sf(t,e){let{onStoppedNotification:n}=zt;n&&oo.setTimeout(()=>n(t,e))}var NR={closed:!0,next:Ps,error:xR,complete:Ps};var co=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Dt(t){return t}function cf(...t){return uf(t)}function uf(t){return t.length===0?Dt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ne=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=OR(n)?n:new ao(n,r,i);return so(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=$I(r),new r((i,o)=>{let s=new ao({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[co](){return this}pipe(...n){return uf(n)(this)}toPromise(n){return n=$I(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function $I(t){var e;return(e=t??zt.Promise)!==null&&e!==void 0?e:Promise}function PR(t){return t&&U(t.next)&&U(t.error)&&U(t.complete)}function OR(t){return t&&t instanceof oi||PR(t)&&kc(t)}function lf(t){return U(t?.lift)}function re(t){return e=>{if(lf(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Q(t,e,n,r,i){return new df(t,e,n,r,i)}var df=class extends oi{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function uo(){return re((t,e)=>{let n=null;t._refCount++;let r=Q(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var lo=class extends ne{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,lf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Me;let n=this.getSubject();e.add(this.source.subscribe(Q(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Me.EMPTY)}return e}refCount(){return uo()(this)}};var HI=io(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var dt=(()=>{class t extends ne{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Lc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new HI}next(n){so(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){so(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){so(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?nf:(this.currentObservers=null,o.push(n),new Me(()=>{this.currentObservers=null,ri(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new ne;return n.source=this,n}}return t.create=(e,n)=>new Lc(e,n),t})(),Lc=class extends dt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:nf}};var Je=class extends dt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var hf={now(){return(hf.delegate||Date).now()},delegate:void 0};var Uc=class extends Me{constructor(e,n){super()}schedule(e,n=0){return this}};var Os={setInterval(t,e,...n){let{delegate:r}=Os;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Os;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var ho=class extends Uc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Os.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Os.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ri(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var fo=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};fo.now=hf.now;var po=class extends fo{constructor(e,n=fo.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var ff=new po(ho);var jc=class extends ho{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Bc=class extends po{};var pf=new Bc(jc);var Ct=new ne(t=>t.complete());function qI(t){return t&&U(t.schedule)}function GI(t){return t[t.length-1]}function $c(t){return U(GI(t))?t.pop():void 0}function yr(t){return qI(GI(t))?t.pop():void 0}function mf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function WI(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(l){try{u(r.next(l))}catch(d){s(d)}}function c(l){try{u(r.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}function zI(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function si(t){return this instanceof si?(this.v=t,this):new si(t)}function KI(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(h){r[h]&&(i[h]=function(p){return new Promise(function(g,I){o.push([h,p,g,I])>1||a(h,p)})})}function a(h,p){try{c(r[h](p))}catch(g){d(o[0][3],g)}}function c(h){h.value instanceof si?Promise.resolve(h.value.v).then(u,l):d(o[0][2],h)}function u(h){a("next",h)}function l(h){a("throw",h)}function d(h,p){h(p),o.shift(),o.length&&a(o[0][0],o[0][1])}}function QI(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof zI=="function"?zI(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}}var Hc=t=>t&&typeof t.length=="number"&&typeof t!="function";function qc(t){return U(t?.then)}function Gc(t){return U(t[co])}function zc(t){return Symbol.asyncIterator&&U(t?.[Symbol.asyncIterator])}function Wc(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function kR(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Kc=kR();function Qc(t){return U(t?.[Kc])}function Yc(t){return KI(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield si(n.read());if(i)return yield si(void 0);yield yield si(r)}}finally{n.releaseLock()}})}function Jc(t){return U(t?.getReader)}function Pe(t){if(t instanceof ne)return t;if(t!=null){if(Gc(t))return FR(t);if(Hc(t))return VR(t);if(qc(t))return LR(t);if(zc(t))return YI(t);if(Qc(t))return UR(t);if(Jc(t))return jR(t)}throw Wc(t)}function FR(t){return new ne(e=>{let n=t[co]();if(U(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function VR(t){return new ne(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function LR(t){return new ne(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Fc)})}function UR(t){return new ne(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function YI(t){return new ne(e=>{BR(t,e).catch(n=>e.error(n))})}function jR(t){return YI(Yc(t))}function BR(t,e){var n,r,i,o;return WI(this,void 0,void 0,function*(){try{for(n=QI(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function vt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function vr(t,e=0){return re((n,r)=>{n.subscribe(Q(r,i=>vt(r,t,()=>r.next(i),e),()=>vt(r,t,()=>r.complete(),e),i=>vt(r,t,()=>r.error(i),e)))})}function _r(t,e=0){return re((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function JI(t,e){return Pe(t).pipe(_r(e),vr(e))}function ZI(t,e){return Pe(t).pipe(_r(e),vr(e))}function XI(t,e){return new ne(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function ew(t,e){return new ne(n=>{let r;return vt(n,e,()=>{r=t[Kc](),vt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>U(r?.return)&&r.return()})}function Zc(t,e){if(!t)throw new Error("Iterable cannot be null");return new ne(n=>{vt(n,e,()=>{let r=t[Symbol.asyncIterator]();vt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function tw(t,e){return Zc(Yc(t),e)}function nw(t,e){if(t!=null){if(Gc(t))return JI(t,e);if(Hc(t))return XI(t,e);if(qc(t))return ZI(t,e);if(zc(t))return Zc(t,e);if(Qc(t))return ew(t,e);if(Jc(t))return tw(t,e)}throw Wc(t)}function De(t,e){return e?nw(t,e):Pe(t)}function $(...t){let e=yr(t);return De(t,e)}function mo(t,e){let n=U(t)?t:()=>t,r=i=>i.error(n());return new ne(e?i=>e.schedule(r,0,i):r)}function gf(t){return!!t&&(t instanceof ne||U(t.lift)&&U(t.subscribe))}var qn=io(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Y(t,e){return re((n,r)=>{let i=0;n.subscribe(Q(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:$R}=Array;function HR(t,e){return $R(e)?t(...e):t(e)}function Xc(t){return Y(e=>HR(t,e))}var{isArray:qR}=Array,{getPrototypeOf:GR,prototype:zR,keys:WR}=Object;function eu(t){if(t.length===1){let e=t[0];if(qR(e))return{args:e,keys:null};if(KR(e)){let n=WR(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function KR(t){return t&&typeof t=="object"&&GR(t)===zR}function tu(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function nu(...t){let e=yr(t),n=$c(t),{args:r,keys:i}=eu(t);if(r.length===0)return De([],e);let o=new ne(QR(r,e,i?s=>tu(i,s):Dt));return n?o.pipe(Xc(n)):o}function QR(t,e,n=Dt){return r=>{rw(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)rw(e,()=>{let u=De(t[c],e),l=!1;u.subscribe(Q(r,d=>{o[c]=d,l||(l=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function rw(t,e,n){t?vt(n,t,e):e()}function iw(t,e,n,r,i,o,s,a){let c=[],u=0,l=0,d=!1,h=()=>{d&&!c.length&&!u&&e.complete()},p=I=>u<r?g(I):c.push(I),g=I=>{o&&e.next(I),u++;let w=!1;Pe(n(I,l++)).subscribe(Q(e,A=>{i?.(A),o?p(A):e.next(A)},()=>{w=!0},void 0,()=>{if(w)try{for(u--;c.length&&u<r;){let A=c.shift();s?vt(e,s,()=>g(A)):g(A)}h()}catch(A){e.error(A)}}))};return t.subscribe(Q(e,p,()=>{d=!0,h()})),()=>{a?.()}}function je(t,e,n=1/0){return U(e)?je((r,i)=>Y((o,s)=>e(r,o,i,s))(Pe(t(r,i))),n):(typeof e=="number"&&(n=e),re((r,i)=>iw(r,i,t,n)))}function yf(t=1/0){return je(Dt,t)}function ow(){return yf(1)}function go(...t){return ow()(De(t,yr(t)))}function ru(t){return new ne(e=>{Pe(t()).subscribe(e)})}function vf(...t){let e=$c(t),{args:n,keys:r}=eu(t),i=new ne(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,u=s;for(let l=0;l<s;l++){let d=!1;Pe(n[l]).subscribe(Q(o,h=>{d||(d=!0,u--),a[l]=h},()=>c--,void 0,()=>{(!c||!d)&&(u||o.next(r?tu(r,a):a),o.complete())}))}});return e?i.pipe(Xc(e)):i}function Wt(t,e){return re((n,r)=>{let i=0;n.subscribe(Q(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Ir(t){return re((e,n)=>{let r=null,i=!1,o;r=e.subscribe(Q(n,void 0,void 0,s=>{o=Pe(t(s,Ir(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function sw(t,e,n,r,i){return(o,s)=>{let a=n,c=e,u=0;o.subscribe(Q(s,l=>{let d=u++;c=a?t(c,l,d):(a=!0,l),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function yo(t,e){return U(e)?je(t,e,1):je(t,1)}function wr(t){return re((e,n)=>{let r=!1;e.subscribe(Q(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Gn(t){return t<=0?()=>Ct:re((e,n)=>{let r=0;e.subscribe(Q(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function _f(t){return Y(()=>t)}function iu(t=YR){return re((e,n)=>{let r=!1;e.subscribe(Q(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function YR(){return new qn}function ks(t){return re((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function hn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Wt((i,o)=>t(i,o,r)):Dt,Gn(1),n?wr(e):iu(()=>new qn))}function vo(t){return t<=0?()=>Ct:re((e,n)=>{let r=[];e.subscribe(Q(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function If(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Wt((i,o)=>t(i,o,r)):Dt,vo(1),n?wr(e):iu(()=>new qn))}function wf(t,e){return re(sw(t,e,arguments.length>=2,!0))}function Ef(...t){let e=yr(t);return re((n,r)=>{(e?go(t,n,e):go(t,n)).subscribe(r)})}function Kt(t,e){return re((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(Q(r,c=>{i?.unsubscribe();let u=0,l=o++;Pe(t(c,l)).subscribe(i=Q(r,d=>r.next(e?e(c,d,l,u++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Df(t){return re((e,n)=>{Pe(t).subscribe(Q(n,()=>n.complete(),Ps)),!n.closed&&e.subscribe(n)})}function Be(t,e,n){let r=U(t)||e||n?{next:t,error:e,complete:n}:t;return r?re((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Q(o,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),o.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):Dt}var JR="https://g.co/ng/security#xss",R=class extends Error{constructor(e,n){super(Tp(e,n)),this.code=e}};function Tp(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Ks(t){return{toString:t}.toString()}var ou="__parameters__";function ZR(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function qw(t,e,n){return Ks(()=>{let r=ZR(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,u,l){let d=c.hasOwnProperty(ou)?c[ou]:Object.defineProperty(c,ou,{value:[]})[ou];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(s),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var zn=globalThis;function me(t){for(let e in t)if(t[e]===me)return e;throw Error("Could not find renamed property on target object.")}function XR(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function ft(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(ft).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function aw(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var eM=me({__forward_ref__:me});function Zt(t){return t.__forward_ref__=Zt,t.toString=function(){return ft(this())},t}function ht(t){return Gw(t)?t():t}function Gw(t){return typeof t=="function"&&t.hasOwnProperty(eM)&&t.__forward_ref__===Zt}function N(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Vt(t){return{providers:t.providers||[],imports:t.imports||[]}}function Ou(t){return cw(t,Ww)||cw(t,Kw)}function zw(t){return Ou(t)!==null}function cw(t,e){return t.hasOwnProperty(e)?t[e]:null}function tM(t){let e=t&&(t[Ww]||t[Kw]);return e||null}function uw(t){return t&&(t.hasOwnProperty(lw)||t.hasOwnProperty(nM))?t[lw]:null}var Ww=me({\u0275prov:me}),lw=me({\u0275inj:me}),Kw=me({ngInjectableDef:me}),nM=me({ngInjectorDef:me}),O=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=N({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Qw(t){return t&&!!t.\u0275providers}var rM=me({\u0275cmp:me}),iM=me({\u0275dir:me}),oM=me({\u0275pipe:me}),sM=me({\u0275mod:me}),fu=me({\u0275fac:me}),Fs=me({__NG_ELEMENT_ID__:me}),dw=me({__NG_ENV_ID__:me});function pu(t){return typeof t=="string"?t:t==null?"":String(t)}function aM(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():pu(t)}function cM(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new R(-200,t)}function Sp(t,e){throw new R(-201,!1)}var z=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(z||{}),jf;function Yw(){return jf}function _t(t){let e=jf;return jf=t,e}function Jw(t,e,n){let r=Ou(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&z.Optional)return null;if(e!==void 0)return e;Sp(t,"Injector")}var uM={},Vs=uM,Bf="__NG_DI_FLAG__",mu="ngTempTokenPath",lM="ngTokenPath",dM=/\n/gm,hM="\u0275",hw="__source",Eo;function fM(){return Eo}function Er(t){let e=Eo;return Eo=t,e}function pM(t,e=z.Default){if(Eo===void 0)throw new R(-203,!1);return Eo===null?Jw(t,void 0,e):Eo.get(t,e&z.Optional?null:void 0,e)}function W(t,e=z.Default){return(Yw()||pM)(ht(t),e)}function E(t,e=z.Default){return W(t,ku(e))}function ku(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function $f(t){let e=[];for(let n=0;n<t.length;n++){let r=ht(t[n]);if(Array.isArray(r)){if(r.length===0)throw new R(900,!1);let i,o=z.Default;for(let s=0;s<r.length;s++){let a=r[s],c=mM(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(W(i,o))}else e.push(W(r))}return e}function Zw(t,e){return t[Bf]=e,t.prototype[Bf]=e,t}function mM(t){return t[Bf]}function gM(t,e,n,r){let i=t[mu];throw e[hw]&&i.unshift(e[hw]),t.message=yM(`
`+t.message,i,n,r),t[lM]=i,t[mu]=null,t}function yM(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==hM?t.slice(2):t;let i=ft(e);if(Array.isArray(e))i=e.map(ft).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):ft(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(dM,`
  `)}`}var _n=Zw(qw("Optional"),8);var Xw=Zw(qw("SkipSelf"),4);function li(t,e){let n=t.hasOwnProperty(fu);return n?t[fu]:null}function Ap(t,e){t.forEach(n=>Array.isArray(n)?Ap(n,e):e(n))}function eE(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function gu(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function vM(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function _M(t,e,n){let r=Qs(t,e);return r>=0?t[r|1]=n:(r=~r,vM(t,r,e,n)),r}function Cf(t,e){let n=Qs(t,e);if(n>=0)return t[n|1]}function Qs(t,e){return IM(t,e,1)}function IM(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var Co={},Pt=[],bo=new O(""),tE=new O("",-1),nE=new O(""),yu=class{get(e,n=Vs){if(n===Vs){let r=new Error(`NullInjectorError: No provider for ${ft(e)}!`);throw r.name="NullInjectorError",r}return n}},rE=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(rE||{}),mn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(mn||{}),Ze=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Ze||{});function wM(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Hf(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];DM(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function EM(t){return t===3||t===4||t===6}function DM(t){return t.charCodeAt(0)===64}function Ls(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?fw(t,n,i,null,e[++r]):fw(t,n,i,null,null))}}return t}function fw(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var iE="ng-template";function CM(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&wM(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Rp(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Rp(t){return t.type===4&&t.value!==iE}function bM(t,e,n){let r=t.type===4&&!n?iE:t.value;return e===r}function TM(t,e,n){let r=4,i=t.attrs,o=i!==null?RM(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Qt(r)&&!Qt(c))return!1;if(s&&Qt(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!bM(t,c,n)||c===""&&e.length===1){if(Qt(r))return!1;s=!0}}else if(r&8){if(i===null||!CM(t,i,c,n)){if(Qt(r))return!1;s=!0}}else{let u=e[++a],l=SM(c,i,Rp(t),n);if(l===-1){if(Qt(r))return!1;s=!0;continue}if(u!==""){let d;if(l>o?d="":d=i[l+1].toLowerCase(),r&2&&u!==d){if(Qt(r))return!1;s=!0}}}}return Qt(r)||s}function Qt(t){return(t&1)===0}function SM(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return MM(e,t)}function AM(t,e,n=!1){for(let r=0;r<e.length;r++)if(TM(t,e[r],n))return!0;return!1}function RM(t){for(let e=0;e<t.length;e++){let n=t[e];if(EM(n))return e}return t.length}function MM(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function pw(t,e){return t?":not("+e.trim()+")":e}function xM(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Qt(s)&&(e+=pw(o,i),i=""),r=s,o=o||!Qt(r);n++}return i!==""&&(e+=pw(o,i)),e}function NM(t){return t.map(xM).join(",")}function PM(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Qt(i))break;i=o}r++}return{attrs:e,classes:n}}function He(t){return Ks(()=>{let e=lE(t),n=le(S({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===rE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||mn.Emulated,styles:t.styles||Pt,_:null,schemas:t.schemas||null,tView:null,id:""});dE(n);let r=t.dependencies;return n.directiveDefs=gw(r,!1),n.pipeDefs=gw(r,!0),n.id=FM(n),n})}function OM(t){return di(t)||sE(t)}function kM(t){return t!==null}function Lt(t){return Ks(()=>({type:t.type,bootstrap:t.bootstrap||Pt,declarations:t.declarations||Pt,imports:t.imports||Pt,exports:t.exports||Pt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function mw(t,e){if(t==null)return Co;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=Ze.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==Ze.None?[r,a]:r,e[o]=s):n[o]=r}return n}function xe(t){return Ks(()=>{let e=lE(t);return dE(e),e})}function oE(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function di(t){return t[rM]||null}function sE(t){return t[iM]||null}function aE(t){return t[oM]||null}function cE(t){let e=di(t)||sE(t)||aE(t);return e!==null?e.standalone:!1}function uE(t,e){let n=t[sM]||null;if(!n&&e===!0)throw new Error(`Type ${ft(t)} does not have '\u0275mod' property.`);return n}function lE(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Co,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Pt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:mw(t.inputs,e),outputs:mw(t.outputs),debugInfo:null}}function dE(t){t.features?.forEach(e=>e(t))}function gw(t,e){if(!t)return null;let n=e?aE:OM;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(kM)}function FM(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Fu(t){return{\u0275providers:t}}function Mp(...t){return{\u0275providers:hE(!0,t),\u0275fromNgModule:!0}}function hE(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Ap(e,s=>{let a=s;qf(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&fE(i,o),n}function fE(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];xp(i,o=>{e(o,r)})}}function qf(t,e,n,r){if(t=ht(t),!t)return!1;let i=null,o=uw(t),s=!o&&di(t);if(!o&&!s){let c=t.ngModule;if(o=uw(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)qf(u,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{Ap(o.imports,l=>{qf(l,e,n,r)&&(u||=[],u.push(l))})}finally{}u!==void 0&&fE(u,e)}if(!a){let u=li(i)||(()=>new i);e({provide:i,useFactory:u,deps:Pt},i),e({provide:nE,useValue:i,multi:!0},i),e({provide:bo,useValue:()=>W(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let u=t;xp(c,l=>{e(l,u)})}}else return!1;return i!==t&&t.providers!==void 0}function xp(t,e){for(let n of t)Qw(n)&&(n=n.\u0275providers),Array.isArray(n)?xp(n,e):e(n)}var VM=me({provide:String,useValue:me});function pE(t){return t!==null&&typeof t=="object"&&VM in t}function LM(t){return!!(t&&t.useExisting)}function UM(t){return!!(t&&t.useFactory)}function To(t){return typeof t=="function"}function jM(t){return!!t.useClass}var Vu=new O(""),cu={},BM={},bf;function Np(){return bf===void 0&&(bf=new yu),bf}var kt=class{},Us=class extends kt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,zf(e,s=>this.processProvider(s)),this.records.set(tE,_o(void 0,this)),i.has("environment")&&this.records.set(kt,_o(void 0,this));let o=this.records.get(Vu);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(nE,Pt,z.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=oe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),oe(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Er(this),r=_t(void 0),i;try{return e()}finally{Er(n),_t(r)}}get(e,n=Vs,r=z.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(dw))return e[dw](this);r=ku(r);let i,o=Er(this),s=_t(void 0);try{if(!(r&z.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=zM(e)&&Ou(e);u&&this.injectableDefInScope(u)?c=_o(Gf(e),cu):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&z.Self?Np():this.parent;return n=r&z.Optional&&n===Vs?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[mu]=a[mu]||[]).unshift(ft(e)),o)throw a;return gM(a,e,"R3InjectorError",this.source)}else throw a}finally{_t(s),Er(o)}}resolveInjectorInitializers(){let e=oe(null),n=Er(this),r=_t(void 0),i;try{let o=this.get(bo,Pt,z.Self);for(let s of o)s()}finally{Er(n),_t(r),oe(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(ft(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new R(205,!1)}processProvider(e){e=ht(e);let n=To(e)?e:ht(e&&e.provide),r=HM(e);if(!To(e)&&e.multi===!0){let i=this.records.get(n);i||(i=_o(void 0,cu,!0),i.factory=()=>$f(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=oe(null);try{return n.value===cu&&(n.value=BM,n.value=n.factory()),typeof n.value=="object"&&n.value&&GM(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{oe(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=ht(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Gf(t){let e=Ou(t),n=e!==null?e.factory:li(t);if(n!==null)return n;if(t instanceof O)throw new R(204,!1);if(t instanceof Function)return $M(t);throw new R(204,!1)}function $M(t){if(t.length>0)throw new R(204,!1);let n=tM(t);return n!==null?()=>n.factory(t):()=>new t}function HM(t){if(pE(t))return _o(void 0,t.useValue);{let e=mE(t);return _o(e,cu)}}function mE(t,e,n){let r;if(To(t)){let i=ht(t);return li(i)||Gf(i)}else if(pE(t))r=()=>ht(t.useValue);else if(UM(t))r=()=>t.useFactory(...$f(t.deps||[]));else if(LM(t))r=()=>W(ht(t.useExisting));else{let i=ht(t&&(t.useClass||t.provide));if(qM(t))r=()=>new i(...$f(t.deps));else return li(i)||Gf(i)}return r}function _o(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function qM(t){return!!t.deps}function GM(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function zM(t){return typeof t=="function"||typeof t=="object"&&t instanceof O}function zf(t,e){for(let n of t)Array.isArray(n)?zf(n,e):n&&Qw(n)?zf(n.\u0275providers,e):e(n)}function vi(t,e){t instanceof Us&&t.assertNotDestroyed();let n,r=Er(t),i=_t(void 0);try{return e()}finally{Er(r),_t(i)}}function WM(){return Yw()!==void 0||fM()!=null}function KM(t){return typeof t=="function"}var Yn=0,J=1,V=2,it=3,Yt=4,Xt=5,vu=6,js=7,Jt=8,So=9,gn=10,Oe=11,Bs=12,yw=13,Po=14,yn=15,Lu=16,Io=17,Ao=18,Uu=19,gE=20,Dr=21,Tf=22,hi=23,Ft=25,yE=1;var fi=7,_u=8,Iu=9,Ot=10,Pp=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Pp||{});function ci(t){return Array.isArray(t)&&typeof t[yE]=="object"}function Jn(t){return Array.isArray(t)&&t[yE]===!0}function Op(t){return(t.flags&4)!==0}function ju(t){return t.componentOffset>-1}function Bu(t){return(t.flags&1)===1}function Cr(t){return!!t.template}function QM(t){return(t[V]&512)!==0}var Wf=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function vE(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Sr(){return _E}function _E(t){return t.type.prototype.ngOnChanges&&(t.setInput=JM),YM}Sr.ngInherit=!0;function YM(){let t=wE(this),e=t?.current;if(e){let n=t.previous;if(n===Co)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function JM(t,e,n,r,i){let o=this.declaredInputs[r],s=wE(t)||ZM(t,{previous:Co,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new Wf(u&&u.currentValue,n,c===Co),vE(t,e,i,n)}var IE="__ngSimpleChanges__";function wE(t){return t[IE]||null}function ZM(t,e){return t[IE]=e}var vw=null;var fn=function(t,e,n){vw?.(t,e,n)},XM="svg",ex="math",tx=!1;function nx(){return tx}function vn(t){for(;Array.isArray(t);)t=t[Yn];return t}function EE(t,e){return vn(e[t])}function en(t,e){return vn(e[t.index])}function DE(t,e){return t.data[e]}function CE(t,e){return t[e]}function Ar(t,e){let n=e[t];return ci(n)?n:n[Yn]}function kp(t){return(t[V]&128)===128}function rx(t){return Jn(t[it])}function Ro(t,e){return e==null?null:t[e]}function bE(t){t[Io]=0}function ix(t){t[V]&1024||(t[V]|=1024,kp(t)&&$s(t))}function ox(t,e){for(;t>0;)e=e[Po],t--;return e}function Fp(t){return!!(t[V]&9216||t[hi]?.dirty)}function Kf(t){t[gn].changeDetectionScheduler?.notify(1),Fp(t)?$s(t):t[V]&64&&(nx()?(t[V]|=1024,$s(t)):t[gn].changeDetectionScheduler?.notify())}function $s(t){t[gn].changeDetectionScheduler?.notify();let e=Hs(t);for(;e!==null&&!(e[V]&8192||(e[V]|=8192,!kp(e)));)e=Hs(e)}function TE(t,e){if((t[V]&256)===256)throw new R(911,!1);t[Dr]===null&&(t[Dr]=[]),t[Dr].push(e)}function sx(t,e){if(t[Dr]===null)return;let n=t[Dr].indexOf(e);n!==-1&&t[Dr].splice(n,1)}function Hs(t){let e=t[it];return Jn(e)?e[it]:e}var G={lFrame:OE(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function ax(){return G.lFrame.elementDepthCount}function cx(){G.lFrame.elementDepthCount++}function ux(){G.lFrame.elementDepthCount--}function SE(){return G.bindingsEnabled}function lx(){return G.skipHydrationRootTNode!==null}function dx(t){return G.skipHydrationRootTNode===t}function hx(){G.skipHydrationRootTNode=null}function pe(){return G.lFrame.lView}function ot(){return G.lFrame.tView}function In(t){return G.lFrame.contextLView=t,t[Jt]}function wn(t){return G.lFrame.contextLView=null,t}function It(){let t=AE();for(;t!==null&&t.type===64;)t=t.parent;return t}function AE(){return G.lFrame.currentTNode}function fx(){let t=G.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function _i(t,e){let n=G.lFrame;n.currentTNode=t,n.isParent=e}function Vp(){return G.lFrame.isParent}function RE(){G.lFrame.isParent=!1}function px(){return G.lFrame.contextLView}function mx(){let t=G.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function gx(){return G.lFrame.bindingIndex}function yx(t){return G.lFrame.bindingIndex=t}function Lp(){return G.lFrame.bindingIndex++}function ME(t){let e=G.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function vx(){return G.lFrame.inI18n}function _x(t,e){let n=G.lFrame;n.bindingIndex=n.bindingRootIndex=t,Qf(e)}function Ix(){return G.lFrame.currentDirectiveIndex}function Qf(t){G.lFrame.currentDirectiveIndex=t}function wx(t){let e=G.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function xE(t){G.lFrame.currentQueryIndex=t}function Ex(t){let e=t[J];return e.type===2?e.declTNode:e.type===1?t[Xt]:null}function NE(t,e,n){if(n&z.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&z.Host);)if(i=Ex(o),i===null||(o=o[Po],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=G.lFrame=PE();return r.currentTNode=e,r.lView=t,!0}function Up(t){let e=PE(),n=t[J];G.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function PE(){let t=G.lFrame,e=t===null?null:t.child;return e===null?OE(t):e}function OE(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function kE(){let t=G.lFrame;return G.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var FE=kE;function jp(){let t=kE();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Dx(t){return(G.lFrame.contextLView=ox(t,G.lFrame.contextLView))[Jt]}function Ii(){return G.lFrame.selectedIndex}function pi(t){G.lFrame.selectedIndex=t}function Bp(){let t=G.lFrame;return DE(t.tView,t.selectedIndex)}function Cx(){return G.lFrame.currentNamespace}var VE=!0;function $u(){return VE}function Hu(t){VE=t}function bx(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=_E(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function qu(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),l!=null&&(t.destroyHooks??=[]).push(n,l)}}function uu(t,e,n){LE(t,e,3,n)}function lu(t,e,n,r){(t[V]&3)===n&&LE(t,e,n,r)}function Sf(t,e){let n=t[V];(n&3)===e&&(n&=16383,n+=1,t[V]=n)}function LE(t,e,n,r){let i=r!==void 0?t[Io]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Io]+=65536),(a<o||o==-1)&&(Tx(t,n,e,c),t[Io]=(t[Io]&4294901760)+c+2),c++}function _w(t,e){fn(4,t,e);let n=oe(null);try{e.call(t)}finally{oe(n),fn(5,t,e)}}function Tx(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[V]>>14<t[Io]>>16&&(t[V]&3)===e&&(t[V]+=16384,_w(a,o)):_w(a,o)}var Do=-1,mi=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function Sx(t){return t instanceof mi}function Ax(t){return(t.flags&8)!==0}function Rx(t){return(t.flags&16)!==0}function UE(t){return t!==Do}function wu(t){return t&32767}function Mx(t){return t>>16}function Eu(t,e){let n=Mx(t),r=e;for(;n>0;)r=r[Po],n--;return r}var Yf=!0;function Du(t){let e=Yf;return Yf=t,e}var xx=256,jE=xx-1,BE=5,Nx=0,pn={};function Px(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Fs)&&(r=n[Fs]),r==null&&(r=n[Fs]=Nx++);let i=r&jE,o=1<<i;e.data[t+(i>>BE)]|=o}function Cu(t,e){let n=$E(t,e);if(n!==-1)return n;let r=e[J];r.firstCreatePass&&(t.injectorIndex=e.length,Af(r.data,t),Af(e,null),Af(r.blueprint,null));let i=$p(t,e),o=t.injectorIndex;if(UE(i)){let s=wu(i),a=Eu(i,e),c=a[J].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function Af(t,e){t.push(0,0,0,0,0,0,0,0,e)}function $E(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function $p(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=WE(i),r===null)return Do;if(n++,i=i[Po],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Do}function Jf(t,e,n){Px(t,e,n)}function HE(t,e,n){if(n&z.Optional||t!==void 0)return t;Sp(e,"NodeInjector")}function qE(t,e,n,r){if(n&z.Optional&&r===void 0&&(r=null),!(n&(z.Self|z.Host))){let i=t[So],o=_t(void 0);try{return i?i.get(e,r,n&z.Optional):Jw(e,r,n&z.Optional)}finally{_t(o)}}return HE(r,e,n)}function GE(t,e,n,r=z.Default,i){if(t!==null){if(e[V]&2048&&!(r&z.Self)){let s=Lx(t,e,n,r,pn);if(s!==pn)return s}let o=zE(t,e,n,r,pn);if(o!==pn)return o}return qE(e,n,r,i)}function zE(t,e,n,r,i){let o=Fx(n);if(typeof o=="function"){if(!NE(e,t,r))return r&z.Host?HE(i,n,r):qE(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&z.Optional))Sp(n);else return s}finally{FE()}}else if(typeof o=="number"){let s=null,a=$E(t,e),c=Do,u=r&z.Host?e[yn][Xt]:null;for((a===-1||r&z.SkipSelf)&&(c=a===-1?$p(t,e):e[a+8],c===Do||!ww(r,!1)?a=-1:(s=e[J],a=wu(c),e=Eu(c,e)));a!==-1;){let l=e[J];if(Iw(o,a,l.data)){let d=Ox(a,e,n,s,r,u);if(d!==pn)return d}c=e[a+8],c!==Do&&ww(r,e[J].data[a+8]===u)&&Iw(o,a,e)?(s=l,a=wu(c),e=Eu(c,e)):a=-1}}return i}function Ox(t,e,n,r,i,o){let s=e[J],a=s.data[t+8],c=r==null?ju(a)&&Yf:r!=s&&(a.type&3)!==0,u=i&z.Host&&o===a,l=kx(a,s,n,c,u);return l!==null?Mo(e,s,l,a):pn}function kx(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,u=t.directiveEnd,l=o>>20,d=r?a:a+l,h=i?a+l:u;for(let p=d;p<h;p++){let g=s[p];if(p<c&&n===g||p>=c&&g.type===n)return p}if(i){let p=s[c];if(p&&Cr(p)&&p.type===n)return c}return null}function Mo(t,e,n,r){let i=t[n],o=e.data;if(Sx(i)){let s=i;s.resolving&&cM(aM(o[n]));let a=Du(s.canSeeViewProviders);s.resolving=!0;let c,u=s.injectImpl?_t(s.injectImpl):null,l=NE(t,r,z.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&bx(n,o[n],e)}finally{u!==null&&_t(u),Du(a),s.resolving=!1,FE()}}return i}function Fx(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Fs)?t[Fs]:void 0;return typeof e=="number"?e>=0?e&jE:Vx:e}function Iw(t,e,n){let r=1<<t;return!!(n[e+(t>>BE)]&r)}function ww(t,e){return!(t&z.Self)&&!(t&z.Host&&e)}var ui=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return GE(this._tNode,this._lView,e,ku(r),n)}};function Vx(){return new ui(It(),pe())}function Rr(t){return Ks(()=>{let e=t.prototype.constructor,n=e[fu]||Zf(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[fu]||Zf(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Zf(t){return Gw(t)?()=>{let e=Zf(ht(t));return e&&e()}:li(t)}function Lx(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[V]&2048&&!(s[V]&512);){let a=zE(o,s,n,r|z.Self,pn);if(a!==pn)return a;let c=o.parent;if(!c){let u=s[gE];if(u){let l=u.get(n,pn,r);if(l!==pn)return l}c=WE(s),s=s[Po]}o=c}return i}function WE(t){let e=t[J],n=e.type;return n===2?e.declTNode:n===1?t[Xt]:null}function Ew(t,e=null,n=null,r){let i=KE(t,e,n,r);return i.resolveInjectorInitializers(),i}function KE(t,e=null,n=null,r,i=new Set){let o=[n||Pt,Mp(t)];return r=r||(typeof t=="object"?void 0:ft(t)),new Us(o,e||Np(),r||null,i)}var En=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return Ew({name:""},i,r,"");{let o=r.name??"";return Ew({name:o},r.parent,r.providers,o)}}};e.THROW_IF_NOT_FOUND=Vs,e.NULL=new yu,e.\u0275prov=N({token:e,providedIn:"any",factory:()=>W(tE)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var Ux="ngOriginalError";function Rf(t){return t[Ux]}var Wn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Rf(e);for(;n&&Rf(n);)n=Rf(n);return n||null}},QE=new O("",{providedIn:"root",factory:()=>E(Wn).handleError.bind(void 0)}),YE=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=jx,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Xf=class extends YE{constructor(e){super(),this._lView=e}onDestroy(e){return TE(this._lView,e),()=>sx(this._lView,e)}};function jx(){return new Xf(pe())}function Bx(){return Gu(It(),pe())}function Gu(t,e){return new Zn(en(t,e))}var Zn=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=Bx;let t=e;return t})();var ep=class extends dt{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,WM()&&(this.destroyRef=E(YE,{optional:!0})??void 0)}emit(e){let n=oe(null);try{super.next(e)}finally{oe(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=Mf(o),i&&(i=Mf(i)),s&&(s=Mf(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Me&&e.add(a),a}};function Mf(t){return e=>{setTimeout(t,void 0,e)}}var $e=ep;function JE(t){return(t.flags&128)===128}var ZE=new Map,$x=0;function Hx(){return $x++}function qx(t){ZE.set(t[Uu],t)}function Gx(t){ZE.delete(t[Uu])}var Dw="__ngContext__";function br(t,e){ci(e)?(t[Dw]=e[Uu],qx(e)):t[Dw]=e}function XE(t){return tD(t[Bs])}function eD(t){return tD(t[Yt])}function tD(t){for(;t!==null&&!Jn(t);)t=t[Yt];return t}var tp;function nD(t){tp=t}function zx(){if(tp!==void 0)return tp;if(typeof document<"u")return document;throw new R(210,!1)}var Hp=new O("",{providedIn:"root",factory:()=>Wx}),Wx="ng",qp=new O(""),Mr=new O("",{providedIn:"platform",factory:()=>"unknown"});var Gp=new O("",{providedIn:"root",factory:()=>zx().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Kx="h",Qx="b";var Yx=()=>null;function zp(t,e,n=!1){return Yx(t,e,n)}var rD=!1,Jx=new O("",{providedIn:"root",factory:()=>rD});var np=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${JR})`}};function Wp(t){return t instanceof np?t.changingThisBreaksApplicationSecurity:t}var Zx=/^>|^->|<!--|-->|--!>|<!-$/g,Xx=/(<|>)/g,eN="\u200B$1\u200B";function tN(t){return t.replace(Zx,e=>e.replace(Xx,eN))}function iD(t){return t instanceof Function?t():t}var Kn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Kn||{}),nN;function Kp(t,e){return nN(t,e)}function wo(t,e,n,r,i){if(r!=null){let o,s=!1;Jn(r)?o=r:ci(r)&&(s=!0,r=r[Yn]);let a=vn(r);t===0&&n!==null?i==null?uD(e,n,a):bu(e,n,a,i||null,!0):t===1&&n!==null?bu(e,n,a,i||null,!0):t===2?IN(e,a,s):t===3&&e.destroyNode(a),o!=null&&EN(e,t,o,n,i)}}function rN(t,e){return t.createText(e)}function iN(t,e,n){t.setValue(e,n)}function oN(t,e){return t.createComment(tN(e))}function oD(t,e,n){return t.createElement(e,n)}function sN(t,e){sD(t,e),e[Yn]=null,e[Xt]=null}function aN(t,e,n,r,i,o){r[Yn]=i,r[Xt]=e,Wu(t,r,n,1,i,o)}function sD(t,e){e[gn].changeDetectionScheduler?.notify(1),Wu(t,e,e[Oe],2,null,null)}function cN(t){let e=t[Bs];if(!e)return xf(t[J],t);for(;e;){let n=null;if(ci(e))n=e[Bs];else{let r=e[Ot];r&&(n=r)}if(!n){for(;e&&!e[Yt]&&e!==t;)ci(e)&&xf(e[J],e),e=e[it];e===null&&(e=t),ci(e)&&xf(e[J],e),n=e&&e[Yt]}e=n}}function uN(t,e,n,r){let i=Ot+r,o=n.length;r>0&&(n[i-1][Yt]=e),r<o-Ot?(e[Yt]=n[i],eE(n,Ot+r,e)):(n.push(e),e[Yt]=null),e[it]=n;let s=e[Lu];s!==null&&n!==s&&lN(s,e);let a=e[Ao];a!==null&&a.insertView(t),Kf(e),e[V]|=128}function lN(t,e){let n=t[Iu],i=e[it][it][yn];e[yn]!==i&&(t[V]|=Pp.HasTransplantedViews),n===null?t[Iu]=[e]:n.push(e)}function aD(t,e){let n=t[Iu],r=n.indexOf(e);n.splice(r,1)}function rp(t,e){if(t.length<=Ot)return;let n=Ot+e,r=t[n];if(r){let i=r[Lu];i!==null&&i!==t&&aD(i,r),e>0&&(t[n-1][Yt]=r[Yt]);let o=gu(t,Ot+e);sN(r[J],r);let s=o[Ao];s!==null&&s.detachView(o[J]),r[it]=null,r[Yt]=null,r[V]&=-129}return r}function cD(t,e){if(!(e[V]&256)){let n=e[Oe];n.destroyNode&&Wu(t,e,n,3,null,null),cN(e)}}function xf(t,e){if(e[V]&256)return;let n=oe(null);try{e[V]&=-129,e[V]|=256,e[hi]&&kI(e[hi]),hN(t,e),dN(t,e),e[J].type===1&&e[Oe].destroy();let r=e[Lu];if(r!==null&&Jn(e[it])){r!==e[it]&&aD(r,e);let i=e[Ao];i!==null&&i.detachView(t)}Gx(e)}finally{oe(n)}}function dN(t,e){let n=t.cleanup,r=e[js];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[js]=null);let i=e[Dr];if(i!==null){e[Dr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function hN(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof mi)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];fn(4,a,c);try{c.call(a)}finally{fn(5,a,c)}}else{fn(4,i,o);try{o.call(i)}finally{fn(5,i,o)}}}}}function fN(t,e,n){return pN(t,e.parent,n)}function pN(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Yn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===mn.None||o===mn.Emulated)return null}return en(r,n)}}function bu(t,e,n,r,i){t.insertBefore(e,n,r,i)}function uD(t,e,n){t.appendChild(e,n)}function Cw(t,e,n,r,i){r!==null?bu(t,e,n,r,i):uD(t,e,n)}function mN(t,e,n,r){t.removeChild(e,n,r)}function Qp(t,e){return t.parentNode(e)}function gN(t,e){return t.nextSibling(e)}function yN(t,e,n){return _N(t,e,n)}function vN(t,e,n){return t.type&40?en(t,n):null}var _N=vN,bw;function zu(t,e,n,r){let i=fN(t,r,e),o=e[Oe],s=r.parent||e[Xt],a=yN(s,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)Cw(o,i,n[c],a,!1);else Cw(o,i,n,a,!1);bw!==void 0&&bw(o,r,e,n,i)}function du(t,e){if(e!==null){let n=e.type;if(n&3)return en(e,t);if(n&4)return ip(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return du(t,r);{let i=t[e.index];return Jn(i)?ip(-1,i):vn(i)}}else{if(n&32)return Kp(e,t)()||vn(t[e.index]);{let r=lD(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Hs(t[yn]);return du(i,r)}else return du(t,e.next)}}}return null}function lD(t,e){if(e!==null){let r=t[yn][Xt],i=e.projection;return r.projection[i]}return null}function ip(t,e){let n=Ot+t+1;if(n<e.length){let r=e[n],i=r[J].firstChild;if(i!==null)return du(r,i)}return e[fi]}function IN(t,e,n){let r=Qp(t,e);r&&mN(t,r,e,n)}function Yp(t,e,n,r,i,o,s){for(;n!=null;){let a=r[n.index],c=n.type;if(s&&e===0&&(a&&br(vn(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)Yp(t,e,n.child,r,i,o,!1),wo(e,t,i,a,o);else if(c&32){let u=Kp(n,r),l;for(;l=u();)wo(e,t,i,l,o);wo(e,t,i,a,o)}else c&16?wN(t,e,r,n,i,o):wo(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Wu(t,e,n,r,i,o){Yp(n,r,t.firstChild,e,i,o,!1)}function wN(t,e,n,r,i,o){let s=n[yn],c=s[Xt].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let l=c[u];wo(e,t,i,l,o)}else{let u=c,l=s[it];JE(r)&&(u.flags|=128),Yp(t,e,u,l,i,o,!0)}}function EN(t,e,n,r,i){let o=n[fi],s=vn(n);o!==s&&wo(e,t,r,o,i);for(let a=Ot;a<n.length;a++){let c=n[a];Wu(c[J],c,t,e,r,o)}}function DN(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Kn.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Kn.Important),t.setStyle(n,r,i,o))}}function CN(t,e,n){t.setAttribute(e,"style",n)}function dD(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function hD(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Hf(t,e,r),i!==null&&dD(t,e,i),o!==null&&CN(t,e,o)}var Dn={};function P(t=1){fD(ot(),pe(),Ii()+t,!1)}function fD(t,e,n,r){if(!r)if((e[V]&3)===3){let o=t.preOrderCheckHooks;o!==null&&uu(e,o,n)}else{let o=t.preOrderHooks;o!==null&&lu(e,o,0,n)}pi(n)}function M(t,e=z.Default){let n=pe();if(n===null)return W(t,e);let r=It();return GE(r,n,ht(t),e)}function pD(t,e,n,r,i,o){let s=oe(null);try{let a=null;i&Ze.SignalBased&&(a=e[r][Zh]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Ze.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):vE(e,a,r,o)}finally{oe(s)}}function bN(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)pi(~i);else{let o=i,s=n[++r],a=n[++r];_x(s,o);let c=e[o];a(2,c)}}}finally{pi(-1)}}function Ku(t,e,n,r,i,o,s,a,c,u,l){let d=e.blueprint.slice();return d[Yn]=i,d[V]=r|4|128|8|64,(u!==null||t&&t[V]&2048)&&(d[V]|=2048),bE(d),d[it]=d[Po]=t,d[Jt]=n,d[gn]=s||t&&t[gn],d[Oe]=a||t&&t[Oe],d[So]=c||t&&t[So]||null,d[Xt]=o,d[Uu]=Hx(),d[vu]=l,d[gE]=u,d[yn]=e.type==2?t[yn]:d,d}function Ys(t,e,n,r,i){let o=t.data[e];if(o===null)o=TN(t,e,n,r,i),vx()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=fx();o.injectorIndex=s===null?-1:s.injectorIndex}return _i(o,!0),o}function TN(t,e,n,r,i){let o=AE(),s=Vp(),a=s?o:o&&o.parent,c=t.data[e]=xN(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function mD(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function gD(t,e,n,r,i){let o=Ii(),s=r&2;try{pi(-1),s&&e.length>Ft&&fD(t,e,Ft,!1),fn(s?2:0,i),n(r,i)}finally{pi(o),fn(s?3:1,i)}}function Jp(t,e,n){if(Op(e)){let r=oe(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{oe(r)}}}function Zp(t,e,n){SE()&&(VN(t,e,n,en(n,e)),(n.flags&64)===64&&_D(t,e,n))}function Xp(t,e,n=en){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function yD(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=em(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function em(t,e,n,r,i,o,s,a,c,u,l){let d=Ft+r,h=d+i,p=SN(d,h),g=typeof u=="function"?u():u;return p[J]={type:t,blueprint:p,template:n,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1,ssrId:l}}function SN(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Dn);return n}function AN(t,e,n,r){let o=r.get(Jx,rD)||n===mn.ShadowDom,s=t.selectRootElement(e,o);return RN(s),s}function RN(t){MN(t)}var MN=()=>null;function xN(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return lx()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Tw(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=Ze.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let u=o;if(i!==null){if(!i.hasOwnProperty(o))continue;u=i[o]}t===0?Sw(r,n,u,a,c):Sw(r,n,u,a)}return r}function Sw(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function NN(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],c=null,u=null;for(let l=r;l<i;l++){let d=o[l],h=n?n.get(d):null,p=h?h.inputs:null,g=h?h.outputs:null;c=Tw(0,d.inputs,l,c,p),u=Tw(1,d.outputs,l,u,g);let I=c!==null&&s!==null&&!Rp(e)?zN(c,l,s):null;a.push(I)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}function PN(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function tm(t,e,n,r,i,o,s,a){let c=en(e,n),u=e.inputs,l;!a&&u!=null&&(l=u[r])?(rm(t,n,l,r,i),ju(e)&&ON(n,e.index)):e.type&3?(r=PN(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function ON(t,e){let n=Ar(e,t);n[V]&16||(n[V]|=64)}function nm(t,e,n,r){if(SE()){let i=r===null?null:{"":-1},o=UN(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&vD(t,e,n,s,i,a),i&&jN(n,r,i)}n.mergedAttrs=Ls(n.mergedAttrs,n.attrs)}function vD(t,e,n,r,i,o){for(let u=0;u<r.length;u++)Jf(Cu(n,e),t,r[u].type);$N(n,t.data.length,r.length);for(let u=0;u<r.length;u++){let l=r[u];l.providersResolver&&l.providersResolver(l)}let s=!1,a=!1,c=mD(t,e,r.length,null);for(let u=0;u<r.length;u++){let l=r[u];n.mergedAttrs=Ls(n.mergedAttrs,l.hostAttrs),HN(t,n,e,c,l),BN(c,l,i),l.contentQueries!==null&&(n.flags|=4),(l.hostBindings!==null||l.hostAttrs!==null||l.hostVars!==0)&&(n.flags|=64);let d=l.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}NN(t,n,o)}function kN(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;FN(s)!=a&&s.push(a),s.push(n,r,o)}}function FN(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function VN(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;ju(n)&&qN(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Cu(n,e),br(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let c=t.data[a],u=Mo(e,t,a,n);if(br(u,e),s!==null&&GN(e,a-i,u,c,n,s),Cr(c)){let l=Ar(n.index,e);l[Jt]=Mo(e,t,a,n)}}}function _D(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Ix();try{pi(o);for(let a=r;a<i;a++){let c=t.data[a],u=e[a];Qf(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&LN(c,u)}}finally{pi(-1),Qf(s)}}function LN(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function UN(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(AM(e,s.selectors,!1))if(r||(r=[]),Cr(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;op(t,e,c)}else r.unshift(s),op(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function op(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function jN(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new R(-301,!1);r.push(e[i],o)}}}function BN(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Cr(e)&&(n[""]=t)}}function $N(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function HN(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=li(i.type,!0)),s=new mi(o,Cr(i),M);t.blueprint[r]=s,n[r]=s,kN(t,e,r,mD(t,n,i.hostVars,Dn),i)}function qN(t,e,n){let r=en(e,t),i=yD(n),o=t[gn].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=Qu(t,Ku(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function GN(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],u=s[a++],l=s[a++],d=s[a++];pD(r,n,c,u,l,d)}}function zN(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function ID(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function wD(t,e){let n=t.contentQueries;if(n!==null){let r=oe(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];xE(o),a.contentQueries(2,e[s],s)}}}finally{oe(r)}}}function Qu(t,e){return t[Bs]?t[yw][Yt]=e:t[Bs]=e,t[yw]=e,e}function sp(t,e,n){xE(0);let r=oe(null);try{e(t,n)}finally{oe(r)}}function WN(t){return t[js]||(t[js]=[])}function KN(t){return t.cleanup||(t.cleanup=[])}function ED(t,e){let n=t[So],r=n?n.get(Wn,null):null;r&&r.handleError(e)}function rm(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=n[o++],u=e[s],l=t.data[s];pD(l,u,r,a,c,i)}}function DD(t,e,n){let r=EE(e,t);iN(t[Oe],r,n)}function QN(t,e){let n=Ar(e,t),r=n[J];YN(r,n);let i=n[Yn];i!==null&&n[vu]===null&&(n[vu]=zp(i,n[So])),im(r,n,n[Jt])}function YN(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function im(t,e,n){Up(e);try{let r=t.viewQuery;r!==null&&sp(1,r,n);let i=t.template;i!==null&&gD(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Ao]?.finishViewCreation(t),t.staticContentQueries&&wD(t,e),t.staticViewQueries&&sp(2,t.viewQuery,n);let o=t.components;o!==null&&JN(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[V]&=-5,jp()}}function JN(t,e){for(let n=0;n<e.length;n++)QN(t,e[n])}function ZN(t,e,n,r){let i=oe(null);try{let o=e.tView,a=t[V]&4096?4096:16,c=Ku(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=t[e.index];c[Lu]=u;let l=t[Ao];return l!==null&&(c[Ao]=l.createEmbeddedView(o)),im(o,c,n),c}finally{oe(i)}}function Aw(t,e){return!e||e.firstChild===null||JE(t)}function XN(t,e,n,r=!0){let i=e[J];if(uN(i,e,t,n),r){let s=ip(n,t),a=e[Oe],c=Qp(a,t[fi]);c!==null&&aN(i,t[Xt],a,e,c,s)}let o=e[vu];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Tu(t,e,n,r,i=!1){for(;n!==null;){let o=e[n.index];o!==null&&r.push(vn(o)),Jn(o)&&eP(o,r);let s=n.type;if(s&8)Tu(t,e,n.child,r);else if(s&32){let a=Kp(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=lD(e,n);if(Array.isArray(a))r.push(...a);else{let c=Hs(e[yn]);Tu(c[J],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function eP(t,e){for(let n=Ot;n<t.length;n++){let r=t[n],i=r[J].firstChild;i!==null&&Tu(r[J],r,i,e)}t[fi]!==t[Yn]&&e.push(t[fi])}var CD=[];function tP(t){return t[hi]??nP(t)}function nP(t){let e=CD.pop()??Object.create(iP);return e.lView=t,e}function rP(t){t.lView[hi]!==t&&(t.lView=null,CD.push(t))}var iP=le(S({},NI),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{$s(t.lView)},consumerOnSignalRead(){this.lView[hi]=this}}),bD=100;function TD(t,e=!0,n=0){let r=t[gn],i=r.rendererFactory,o=!1;o||i.begin?.();try{oP(t,n)}catch(s){throw e&&ED(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function oP(t,e){ap(t,e);let n=0;for(;Fp(t);){if(n===bD)throw new R(103,!1);n++,ap(t,1)}}function sP(t,e,n,r){let i=e[V];if((i&256)===256)return;let o=!1;!o&&e[gn].inlineEffectRunner?.flush(),Up(e);let s=null,a=null;!o&&aP(t)&&(a=tP(e),s=PI(a));try{bE(e),yx(t.bindingStartIndex),n!==null&&gD(t,e,n,2,r);let c=(i&3)===3;if(!o)if(c){let d=t.preOrderCheckHooks;d!==null&&uu(e,d,null)}else{let d=t.preOrderHooks;d!==null&&lu(e,d,0,null),Sf(e,0)}if(cP(e),SD(e,0),t.contentQueries!==null&&wD(t,e),!o)if(c){let d=t.contentCheckHooks;d!==null&&uu(e,d)}else{let d=t.contentHooks;d!==null&&lu(e,d,1),Sf(e,1)}bN(t,e);let u=t.components;u!==null&&RD(e,u,0);let l=t.viewQuery;if(l!==null&&sp(2,l,r),!o)if(c){let d=t.viewCheckHooks;d!==null&&uu(e,d)}else{let d=t.viewHooks;d!==null&&lu(e,d,2),Sf(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Tf]){for(let d of e[Tf])d();e[Tf]=null}o||(e[V]&=-73)}catch(c){throw $s(e),c}finally{a!==null&&(OI(a,s),rP(a)),jp()}}function aP(t){return t.type!==2}function SD(t,e){for(let n=XE(t);n!==null;n=eD(n))for(let r=Ot;r<n.length;r++){let i=n[r];AD(i,e)}}function cP(t){for(let e=XE(t);e!==null;e=eD(e)){if(!(e[V]&Pp.HasTransplantedViews))continue;let n=e[Iu];for(let r=0;r<n.length;r++){let i=n[r],o=i[it];ix(i)}}}function uP(t,e,n){let r=Ar(e,t);AD(r,n)}function AD(t,e){kp(t)&&ap(t,e)}function ap(t,e){let r=t[J],i=t[V],o=t[hi],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Xh(o)),o&&(o.dirty=!1),t[V]&=-9217,s)sP(r,t,r.template,t[Jt]);else if(i&8192){SD(t,1);let a=r.components;a!==null&&RD(t,a,1)}}function RD(t,e,n){for(let r=0;r<e.length;r++)uP(t,e[r],n)}function om(t){for(t[gn].changeDetectionScheduler?.notify();t;){t[V]|=64;let e=Hs(t);if(QM(t)&&!e)return t;t=e}return null}var gi=class{get rootNodes(){let e=this._lView,n=e[J];return Tu(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Jt]}set context(e){this._lView[Jt]=e}get destroyed(){return(this._lView[V]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[it];if(Jn(e)){let n=e[_u],r=n?n.indexOf(this):-1;r>-1&&(rp(e,r),gu(n,r))}this._attachedToViewContainer=!1}cD(this._lView[J],this._lView)}onDestroy(e){TE(this._lView,e)}markForCheck(){om(this._cdRefInjectingView||this._lView)}detach(){this._lView[V]&=-129}reattach(){Kf(this._lView),this._lView[V]|=128}detectChanges(){this._lView[V]|=1024,TD(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new R(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,sD(this._lView[J],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new R(902,!1);this._appRef=e,Kf(this._lView)}},Yu=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=hP;let t=e;return t})(),lP=Yu,dP=class extends lP{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=ZN(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new gi(i)}};function hP(){return MD(It(),pe())}function MD(t,e){return t.type&4?new dP(e,t,Gu(t,e)):null}var cW=new RegExp(`^(\\d+)*(${Qx}|${Kx})*(.*)`);var fP=()=>null;function Rw(t,e){return fP(t,e)}var cp=class{},up=class{},Su=class{};function pP(t){let e=Error(`No component factory found for ${ft(t)}.`);return e[mP]=t,e}var mP="ngComponent";var lp=class{resolveComponentFactory(e){throw pP(e)}},Ju=(()=>{let e=class e{};e.NULL=new lp;let t=e;return t})(),qs=class{},xr=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>gP();let t=e;return t})();function gP(){let t=pe(),e=It(),n=Ar(e.index,t);return(ci(n)?n:t)[Oe]}var yP=(()=>{let e=class e{};e.\u0275prov=N({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Nf={};var Mw=new Set;function xD(t){Mw.has(t)||(Mw.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function xw(...t){}function vP(){let t=typeof zn.requestAnimationFrame=="function",e=zn[t?"requestAnimationFrame":"setTimeout"],n=zn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var _e=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new $e(!1),this.onMicrotaskEmpty=new $e(!1),this.onStable=new $e(!1),this.onError=new $e(!1),typeof Zone>"u")throw new R(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=vP().nativeRequestAnimationFrame,wP(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new R(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new R(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,_P,xw,xw);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},_P={};function sm(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function IP(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(zn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,dp(t),t.isCheckStableRunning=!0,sm(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),dp(t))}function wP(t){let e=()=>{IP(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(EP(a))return n.invokeTask(i,o,s,a);try{return Nw(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Pw(t)}},onInvoke:(n,r,i,o,s,a,c)=>{try{return Nw(t),n.invoke(i,o,s,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),Pw(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,dp(t),sm(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function dp(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Nw(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Pw(t){t._nesting--,sm(t)}function EP(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var ND=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=N({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function Au(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=aw(i,a);else if(o==2){let c=a,u=e[++s];r=aw(r,c+": "+u+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Ru=class extends Ju{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=di(e);return new Gs(n,this.ngModule)}};function Ow(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function DP(t){let e=t.toLowerCase();return e==="svg"?XM:e==="math"?ex:null}var hp=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=ku(r);let i=this.injector.get(e,Nf,r);return i!==Nf||n===Nf?i:this.parentInjector.get(e,n,r)}},Gs=class extends Su{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=Ow(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Ow(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=NM(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=oe(null);try{i=i||this.ngModule;let s=i instanceof kt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new hp(e,s):e,c=a.get(qs,null);if(c===null)throw new R(407,!1);let u=a.get(yP,null),l=a.get(ND,null),d=a.get(cp,null),h={rendererFactory:c,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:l,changeDetectionScheduler:d},p=c.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",I=r?AN(p,r,this.componentDef.encapsulation,a):oD(p,g,DP(g)),w=512;this.componentDef.signals?w|=4096:this.componentDef.onPush||(w|=16);let A=null;I!==null&&(A=zp(I,a,!0));let te=em(0,null,null,1,0,null,null,null,null,null,null),K=Ku(null,te,null,w,null,null,h,p,a,null,A);Up(K);let ve,Ye;try{let ue=this.componentDef,rt,dn=null;ue.findHostDirectiveDefs?(rt=[],dn=new Map,ue.findHostDirectiveDefs(ue,rt,dn),rt.push(ue)):rt=[ue];let ni=CP(K,I),ro=bP(ni,I,ue,rt,K,h,p);Ye=DE(te,Ft),I&&AP(p,ue,I,r),n!==void 0&&RP(Ye,this.ngContentSelectors,n),ve=SP(ro,ue,rt,dn,K,[MP]),im(te,K,null)}finally{jp()}return new fp(this.componentType,ve,Gu(Ye,K),K,Ye)}finally{oe(o)}}},fp=class extends up{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new gi(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;rm(o[J],o,i,e,n),this.previousInputValues.set(e,n);let s=Ar(this._tNode.index,o);om(s)}}get injector(){return new ui(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function CP(t,e){let n=t[J],r=Ft;return t[r]=e,Ys(n,r,2,"#host",null)}function bP(t,e,n,r,i,o,s){let a=i[J];TP(r,t,e,s);let c=null;e!==null&&(c=zp(e,i[So]));let u=o.rendererFactory.createRenderer(e,n),l=16;n.signals?l=4096:n.onPush&&(l=64);let d=Ku(i,yD(n),null,l,i[t.index],t,o,u,null,null,c);return a.firstCreatePass&&op(a,t,r.length-1),Qu(i,d),i[t.index]=d}function TP(t,e,n,r){for(let i of t)e.mergedAttrs=Ls(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Au(e,e.mergedAttrs,!0),n!==null&&hD(r,n,e))}function SP(t,e,n,r,i,o){let s=It(),a=i[J],c=en(s,i);vD(a,i,s,n,null,r);for(let l=0;l<n.length;l++){let d=s.directiveStart+l,h=Mo(i,a,d,s);br(h,i)}_D(a,i,s),c&&br(c,i);let u=Mo(i,a,s.directiveStart+s.componentOffset,s);if(t[Jt]=i[Jt]=u,o!==null)for(let l of o)l(u,e);return Jp(a,s,i),u}function AP(t,e,n,r){if(r)Hf(t,n,["ng-version","17.3.4"]);else{let{attrs:i,classes:o}=PM(e.selectors[0]);i&&Hf(t,n,i),o&&o.length>0&&dD(t,n,o.join(" "))}}function RP(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function MP(){let t=It();qu(pe()[J],t)}var Oo=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=xP;let t=e;return t})();function xP(){let t=It();return PP(t,pe())}var NP=Oo,PD=class extends NP{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Gu(this._hostTNode,this._hostLView)}get injector(){return new ui(this._hostTNode,this._hostLView)}get parentInjector(){let e=$p(this._hostTNode,this._hostLView);if(UE(e)){let n=Eu(e,this._hostLView),r=wu(e),i=n[J].data[r+8];return new ui(i,n)}else return new ui(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=kw(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Ot}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Rw(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,Aw(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!KM(e),a;if(s)a=n;else{let g=n||{};a=g.index,r=g.injector,i=g.projectableNodes,o=g.environmentInjector||g.ngModuleRef}let c=s?e:new Gs(di(e)),u=r||this.parentInjector;if(!o&&c.ngModule==null){let I=(s?u:this.parentInjector).get(kt,null);I&&(o=I)}let l=di(c.componentType??{}),d=Rw(this._lContainer,l?.id??null),h=d?.firstChild??null,p=c.create(u,i,h,o);return this.insertImpl(p.hostView,a,Aw(this._hostTNode,d)),p}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(rx(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[it],u=new PD(c,c[Xt],c[it]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return XN(s,i,o,r),e.attachToViewContainerRef(),eE(Pf(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=kw(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=rp(this._lContainer,n);r&&(gu(Pf(this._lContainer),n),cD(r[J],r))}detach(e){let n=this._adjustIndex(e,-1),r=rp(this._lContainer,n);return r&&gu(Pf(this._lContainer),n)!=null?new gi(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function kw(t){return t[_u]}function Pf(t){return t[_u]||(t[_u]=[])}function PP(t,e){let n,r=e[t.index];return Jn(r)?n=r:(n=ID(r,e,null,t),e[t.index]=n,Qu(e,n)),kP(n,e,t,r),new PD(n,t,e)}function OP(t,e){let n=t[Oe],r=n.createComment(""),i=en(e,t),o=Qp(n,i);return bu(n,o,r,gN(n,i),!1),r}var kP=LP,FP=()=>!1;function VP(t,e,n){return FP(t,e,n)}function LP(t,e,n,r){if(t[fi])return;let i;n.type&8?i=vn(r):i=OP(e,n),t[fi]=i}function UP(t){return typeof t=="function"&&t[Zh]!==void 0}function OD(t){return UP(t)&&typeof t.set=="function"}function jP(t){return Object.getPrototypeOf(t.prototype).constructor}function bt(t){let e=jP(t.type),n=!0,r=[t];for(;e;){let i;if(Cr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new R(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=su(t.inputs),s.inputTransforms=su(t.inputTransforms),s.declaredInputs=su(t.declaredInputs),s.outputs=su(t.outputs);let a=i.hostBindings;a&&GP(t,a);let c=i.viewQuery,u=i.contentQueries;if(c&&HP(t,c),u&&qP(t,u),BP(t,i),XR(t.outputs,i.outputs),Cr(i)&&i.data.animation){let l=t.data;l.animation=(l.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===bt&&(n=!1)}}e=Object.getPrototypeOf(e)}$P(r)}function BP(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function $P(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ls(i.hostAttrs,n=Ls(n,i.hostAttrs))}}function su(t){return t===Co?{}:t===Pt?[]:t}function HP(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function qP(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function GP(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var Tr=class{},zs=class{};var pp=class extends Tr{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ru(this);let i=uE(e);this._bootstrapComponents=iD(i.bootstrap),this._r3Injector=KE(e,n,[{provide:Tr,useValue:this},{provide:Ju,useValue:this.componentFactoryResolver},...r],ft(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},mp=class extends zs{constructor(e){super(),this.moduleType=e}create(e){return new pp(this.moduleType,e,[])}};var Mu=class extends Tr{constructor(e){super(),this.componentFactoryResolver=new Ru(this),this.instance=null;let n=new Us([...e.providers,{provide:Tr,useValue:this},{provide:Ju,useValue:this.componentFactoryResolver}],e.parent||Np(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function am(t,e,n=null){return new Mu({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Zu=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Je(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function kD(t){return WP(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function zP(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function WP(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function KP(t,e,n){return t[e]=n}function xo(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function FD(t,e,n,r){let i=xo(t,e,n);return xo(t,e+1,r)||i}function QP(t){return(t.flags&32)===32}function YP(t,e,n,r,i,o,s,a,c){let u=e.consts,l=Ys(e,t,4,s||null,Ro(u,a));nm(e,n,l,Ro(u,c)),qu(e,l);let d=l.tView=em(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}function qe(t,e,n,r,i,o,s,a){let c=pe(),u=ot(),l=t+Ft,d=u.firstCreatePass?YP(l,u,c,e,n,r,i,o,s):u.data[l];_i(d,!1);let h=JP(u,c,d,t);$u()&&zu(u,c,h,d),br(h,c);let p=ID(h,c,h,d);return c[l]=p,Qu(c,p),VP(p,d,c),Bu(d)&&Zp(u,c,d),s!=null&&Xp(c,d,a),qe}var JP=ZP;function ZP(t,e,n,r){return Hu(!0),e[Oe].createComment("")}function VD(t,e,n,r){return xo(t,Lp(),n)?e+pu(n)+r:Dn}function XP(t,e,n,r,i,o){let s=gx(),a=FD(t,s,n,i);return ME(2),a?e+pu(n)+r+pu(i)+o:Dn}function au(t,e){return t<<17|e<<2}function yi(t){return t>>17&32767}function eO(t){return(t&2)==2}function tO(t,e){return t&131071|e<<17}function gp(t){return t|2}function No(t){return(t&131068)>>2}function Of(t,e){return t&-131069|e<<2}function nO(t){return(t&1)===1}function yp(t){return t|1}function rO(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=yi(s),c=No(s);t[r]=n;let u=!1,l;if(Array.isArray(n)){let d=n;l=d[1],(l===null||Qs(d,l)>0)&&(u=!0)}else l=n;if(i)if(c!==0){let h=yi(t[a+1]);t[r+1]=au(h,a),h!==0&&(t[h+1]=Of(t[h+1],r)),t[a+1]=tO(t[a+1],r)}else t[r+1]=au(a,0),a!==0&&(t[a+1]=Of(t[a+1],r)),a=r;else t[r+1]=au(c,0),a===0?a=r:t[c+1]=Of(t[c+1],r),c=r;u&&(t[r+1]=gp(t[r+1])),Fw(t,l,r,!0),Fw(t,l,r,!1),iO(e,l,t,r,o),s=au(a,c),o?e.classBindings=s:e.styleBindings=s}function iO(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Qs(o,e)>=0&&(n[r+1]=yp(n[r+1]))}function Fw(t,e,n,r){let i=t[n+1],o=e===null,s=r?yi(i):No(i),a=!1;for(;s!==0&&(a===!1||o);){let c=t[s],u=t[s+1];oO(c,e)&&(a=!0,t[s+1]=r?yp(u):gp(u)),s=r?yi(u):No(u)}a&&(t[n+1]=r?gp(i):yp(i))}function oO(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Qs(t,e)>=0:!1}function ee(t,e,n){let r=pe(),i=Lp();if(xo(r,i,e)){let o=ot(),s=Bp();tm(o,s,r,t,e,r[Oe],n,!1)}return ee}function Vw(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";rm(t,n,o[s],s,r)}function Xu(t,e){return sO(t,e,null,!0),Xu}function sO(t,e,n,r){let i=pe(),o=ot(),s=ME(2);if(o.firstUpdatePass&&cO(o,t,s,r),e!==Dn&&xo(i,s,e)){let a=o.data[Ii()];fO(o,a,i,i[Oe],t,i[s+1]=pO(e,n),r,s)}}function aO(t,e){return e>=t.expandoStartIndex}function cO(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Ii()],s=aO(t,n);mO(o,r)&&e===null&&!s&&(e=!1),e=uO(i,o,e,r),rO(i,o,e,n,s,r)}}function uO(t,e,n,r){let i=wx(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=kf(null,t,e,n,r),n=Ws(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=kf(i,t,e,n,r),o===null){let c=lO(t,e,r);c!==void 0&&Array.isArray(c)&&(c=kf(null,t,e,c[1],r),c=Ws(c,e.attrs,r),dO(t,e,r,c))}else o=hO(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function lO(t,e,n){let r=n?e.classBindings:e.styleBindings;if(No(r)!==0)return t[yi(r)]}function dO(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[yi(i)]=r}function hO(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Ws(r,s,n)}return Ws(r,e.attrs,n)}function kf(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Ws(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Ws(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),_M(t,s,n?!0:e[++o]))}return t===void 0?null:t}function fO(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let c=t.data,u=c[a+1],l=nO(u)?Lw(c,e,n,i,No(u),s):void 0;if(!xu(l)){xu(o)||eO(u)&&(o=Lw(c,null,n,i,a,s));let d=EE(Ii(),n);DN(r,s,d,i,o)}}function Lw(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let c=t[i],u=Array.isArray(c),l=u?c[1]:c,d=l===null,h=n[i+1];h===Dn&&(h=d?Pt:void 0);let p=d?Cf(h,r):l===r?h:void 0;if(u&&!xu(p)&&(p=Cf(c,r)),xu(p)&&(a=p,s))return a;let g=t[i+1];i=s?yi(g):No(g)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Cf(c,r))}return a}function xu(t){return t!==void 0}function pO(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=ft(Wp(t)))),t}function mO(t,e){return(t.flags&(e?8:16))!==0}function gO(t,e,n,r,i,o){let s=e.consts,a=Ro(s,i),c=Ys(e,t,2,r,a);return nm(e,n,c,Ro(s,o)),c.attrs!==null&&Au(c,c.attrs,!1),c.mergedAttrs!==null&&Au(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function _(t,e,n,r){let i=pe(),o=ot(),s=Ft+t,a=i[Oe],c=o.firstCreatePass?gO(s,o,i,e,n,r):o.data[s],u=yO(o,i,c,a,e,t);i[s]=u;let l=Bu(c);return _i(c,!0),hD(a,u,c),!QP(c)&&$u()&&zu(o,i,u,c),ax()===0&&br(u,i),cx(),l&&(Zp(o,i,c),Jp(o,c,i)),r!==null&&Xp(i,c),_}function v(){let t=It();Vp()?RE():(t=t.parent,_i(t,!1));let e=t;dx(e)&&hx(),ux();let n=ot();return n.firstCreatePass&&(qu(n,t),Op(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&Ax(e)&&Vw(n,e,pe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Rx(e)&&Vw(n,e,pe(),e.stylesWithoutHost,!1),v}function j(t,e,n,r){return _(t,e,n,r),v(),j}var yO=(t,e,n,r,i,o)=>(Hu(!0),oD(r,i,Cx()));function vO(t,e,n,r,i){let o=e.consts,s=Ro(o,r),a=Ys(e,t,8,"ng-container",s);s!==null&&Au(a,s,!0);let c=Ro(o,i);return nm(e,n,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function el(t,e,n){let r=pe(),i=ot(),o=t+Ft,s=i.firstCreatePass?vO(o,i,r,e,n):i.data[o];_i(s,!0);let a=_O(i,r,s,t);return r[o]=a,$u()&&zu(i,r,a,s),br(a,r),Bu(s)&&(Zp(i,r,s),Jp(i,s,r)),n!=null&&Xp(r,s),el}function tl(){let t=It(),e=ot();return Vp()?RE():(t=t.parent,_i(t,!1)),e.firstCreatePass&&(qu(e,t),Op(t)&&e.queries.elementEnd(t)),tl}var _O=(t,e,n,r)=>(Hu(!0),oN(e[Oe],""));function Xn(){return pe()}var ai=void 0;function IO(t){let e=t,n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var wO=["en",[["a","p"],["AM","PM"],ai],[["AM","PM"],ai,ai],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ai,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ai,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ai,"{1} 'at' {0}",ai],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",IO],Ff={};function Ut(t){let e=EO(t),n=Uw(e);if(n)return n;let r=e.split("-")[0];if(n=Uw(r),n)return n;if(r==="en")return wO;throw new R(701,!1)}function Uw(t){return t in Ff||(Ff[t]=zn.ng&&zn.ng.common&&zn.ng.common.locales&&zn.ng.common.locales[t]),Ff[t]}var Ne=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Ne||{});function EO(t){return t.toLowerCase().replace(/_/g,"-")}var Nu="en-US";var DO=Nu;function CO(t){typeof t=="string"&&(DO=t.toLowerCase().replace(/_/g,"-"))}function he(t,e,n,r){let i=pe(),o=ot(),s=It();return LD(o,i,i[Oe],s,t,e,r),he}function bO(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[js],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function LD(t,e,n,r,i,o,s){let a=Bu(r),u=t.firstCreatePass&&KN(t),l=e[Jt],d=WN(e),h=!0;if(r.type&3||s){let I=en(r,e),w=s?s(I):I,A=d.length,te=s?ve=>s(vn(ve[r.index])):r.index,K=null;if(!s&&a&&(K=bO(t,e,i,r.index)),K!==null){let ve=K.__ngLastListenerFn__||K;ve.__ngNextListenerFn__=o,K.__ngLastListenerFn__=o,h=!1}else{o=Bw(r,e,l,o,!1);let ve=n.listen(w,i,o);d.push(o,ve),u&&u.push(i,te,A,A+1)}}else o=Bw(r,e,l,o,!1);let p=r.outputs,g;if(h&&p!==null&&(g=p[i])){let I=g.length;if(I)for(let w=0;w<I;w+=2){let A=g[w],te=g[w+1],Ye=e[A][te].subscribe(o),ue=d.length;d.push(o,Ye),u&&u.push(i,r.index,ue,-(ue+1))}}}function jw(t,e,n,r){let i=oe(null);try{return fn(6,e,n),n(r)!==!1}catch(o){return ED(t,o),!1}finally{fn(7,e,n),oe(i)}}function Bw(t,e,n,r,i){return function o(s){if(s===Function)return r;let a=t.componentOffset>-1?Ar(t.index,e):e;om(a);let c=jw(e,n,r,s),u=o.__ngNextListenerFn__;for(;u;)c=jw(e,n,u,s)&&c,u=u.__ngNextListenerFn__;return i&&c===!1&&s.preventDefault(),c}}function st(t=1){return Dx(t)}function cm(t,e,n){return Js(t,"",e,"",n),cm}function Js(t,e,n,r,i){let o=pe(),s=VD(o,e,n,r);if(s!==Dn){let a=ot(),c=Bp();tm(a,c,o,t,s,o[Oe],i,!1)}return Js}function TO(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function um(t){let e=px();return CE(e,Ft+t)}function D(t,e=""){let n=pe(),r=ot(),i=t+Ft,o=r.firstCreatePass?Ys(r,i,1,e,null):r.data[i],s=SO(r,n,o,e,t);n[i]=s,$u()&&zu(r,n,s,o),_i(o,!1)}var SO=(t,e,n,r,i)=>(Hu(!0),rN(e[Oe],r));function ke(t){return Cn("",t,""),ke}function Cn(t,e,n){let r=pe(),i=VD(r,t,e,n);return i!==Dn&&DD(r,Ii(),i),Cn}function lm(t,e,n,r,i){let o=pe(),s=XP(o,t,e,n,r,i);return s!==Dn&&DD(o,Ii(),s),lm}function dm(t,e,n){OD(e)&&(e=e());let r=pe(),i=Lp();if(xo(r,i,e)){let o=ot(),s=Bp();tm(o,s,r,t,e,r[Oe],n,!1)}return dm}function UD(t,e){let n=OD(t);return n&&t.set(e),n}function hm(t,e){let n=pe(),r=ot(),i=It();return LD(r,n,n[Oe],i,t,e),hm}function AO(t,e,n){let r=ot();if(r.firstCreatePass){let i=Cr(t);vp(n,r.data,r.blueprint,i,!0),vp(e,r.data,r.blueprint,i,!1)}}function vp(t,e,n,r,i){if(t=ht(t),Array.isArray(t))for(let o=0;o<t.length;o++)vp(t[o],e,n,r,i);else{let o=ot(),s=pe(),a=It(),c=To(t)?t:ht(t.provide),u=mE(t),l=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(To(t)||!t.multi){let p=new mi(u,i,M),g=Lf(c,e,i?l:l+h,d);g===-1?(Jf(Cu(a,s),o,c),Vf(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(p),s.push(p)):(n[g]=p,s[g]=p)}else{let p=Lf(c,e,l+h,d),g=Lf(c,e,l,l+h),I=p>=0&&n[p],w=g>=0&&n[g];if(i&&!w||!i&&!I){Jf(Cu(a,s),o,c);let A=xO(i?MO:RO,n.length,i,r,u);!i&&w&&(n[g].providerFactory=A),Vf(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(A),s.push(A)}else{let A=jD(n[i?g:p],u,!i&&r);Vf(o,t,p>-1?p:g,A)}!i&&r&&w&&n[g].componentProviders++}}}function Vf(t,e,n,r){let i=To(e),o=jM(e);if(i||o){let c=(o?ht(e.useClass):e).prototype.ngOnDestroy;if(c){let u=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let l=u.indexOf(n);l===-1?u.push(n,[r,c]):u[l+1].push(r,c)}else u.push(n,c)}}}function jD(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Lf(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function RO(t,e,n,r){return _p(this.multi,[])}function MO(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Mo(n,n[J],this.providerFactory.index,r);o=a.slice(0,s),_p(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],_p(i,o);return o}function _p(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function xO(t,e,n,r,i){let o=new mi(t,n,M);return o.multi=[],o.index=e,o.componentProviders=0,jD(o,i,r&&!n),o}function er(t,e=[]){return n=>{n.providersResolver=(r,i)=>AO(r,i?i(t):t,e)}}var NO=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=hE(!1,r.type),o=i.length>0?am([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=N({token:e,providedIn:"environment",factory:()=>new e(W(kt))});let t=e;return t})();function Ge(t){xD("NgStandalone"),t.getStandaloneInjector=e=>e.get(NO).getOrCreateStandaloneInjector(t)}function PO(t,e){let n=t[e];return n===Dn?void 0:n}function OO(t,e,n,r,i,o,s){let a=e+n;return FD(t,a,i,o)?KP(t,a+2,s?r.call(s,i,o):r(i,o)):PO(t,a+2)}function ko(t,e){let n=ot(),r,i=t+Ft;n.firstCreatePass?(r=kO(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=li(r.type,!0)),s,a=_t(M);try{let c=Du(!1),u=o();return Du(c),TO(n,pe(),i,u),u}finally{_t(a)}}function kO(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function Fo(t,e,n,r){let i=t+Ft,o=pe(),s=CE(o,i);return FO(o,i)?OO(o,mx(),e,s.transform,n,r,s):s.transform(n,r)}function FO(t,e){return t[J].data[e].pure}function fm(t,e){return MD(t,e)}var Qn=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},BD=new Qn("17.3.4"),nl=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var $D=new O("");function wi(t){return!!t&&typeof t.then=="function"}function HD(t){return!!t&&typeof t.subscribe=="function"}var qD=new O(""),GD=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=E(qD,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(wi(s))r.push(s);else if(HD(s)){let a=new Promise((c,u)=>{s.subscribe({complete:c,error:u})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),pm=new O("");function VO(){FI(()=>{throw new R(600,!1)})}function LO(t){return t.isBoundToModule}function UO(t,e,n){try{let r=n();return wi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Zs=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=E(QE),this.afterRenderEffectManager=E(ND),this.externalTestViews=new Set,this.beforeRender=new dt,this.afterTick=new dt,this.componentTypes=[],this.components=[],this.isStable=E(Zu).hasPendingTasks.pipe(Y(r=>!r)),this._injector=E(kt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof Su;if(!this._injector.get(GD).done){let p=!o&&cE(r),g=!1;throw new R(405,g)}let a;o?a=r:a=this._injector.get(Ju).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=LO(a)?void 0:this._injector.get(Tr),u=i||a.selector,l=a.create(En.NULL,[],u,c),d=l.location.nativeElement,h=l.injector.get($D,null);return h?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),Uf(this.components,l),h?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new R(101,!1);let i=oe(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(o){this.internalErrorHandler(o)}finally{this.afterTick.next(),this._runningTick=!1,oe(i)}}detectChangesInAttachedViews(r){let i=0,o=this.afterRenderEffectManager;for(;;){if(i===bD)throw new R(103,!1);if(r){let s=i===0;this.beforeRender.next(s);for(let{_lView:a,notifyErrorHandler:c}of this._views)jO(a,s,c)}if(i++,o.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>Ip(s))&&(o.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>Ip(s))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Uf(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(pm,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Uf(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new R(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Uf(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function jO(t,e,n){!e&&!Ip(t)||BO(t,n,e)}function Ip(t){return Fp(t)}function BO(t,e,n){let r;n?(r=0,t[V]|=1024):t[V]&64?r=0:r=1,TD(t,e,r)}var wp=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},mm=(()=>{let e=class e{compileModuleSync(r){return new mp(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=uE(r),s=iD(o.declarations).reduce((a,c)=>{let u=di(c);return u&&a.push(new Gs(u)),a},[]);return new wp(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var $O=(()=>{let e=class e{constructor(){this.zone=E(_e),this.applicationRef=E(Zs)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function HO(t){return[{provide:_e,useFactory:t},{provide:bo,multi:!0,useFactory:()=>{let e=E($O,{optional:!0});return()=>e.initialize()}},{provide:bo,multi:!0,useFactory:()=>{let e=E(WO);return()=>{e.initialize()}}},{provide:QE,useFactory:qO}]}function qO(){let t=E(_e),e=E(Wn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function GO(t){let e=HO(()=>new _e(zO(t)));return Fu([[],e])}function zO(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var WO=(()=>{let e=class e{constructor(){this.subscription=new Me,this.initialized=!1,this.zone=E(_e),this.pendingTasks=E(Zu)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{_e.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{_e.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function KO(){return typeof $localize<"u"&&$localize.locale||Nu}var rl=new O("",{providedIn:"root",factory:()=>E(rl,z.Optional|z.SkipSelf)||KO()});var zD=new O("");var hu=null;function QO(t=[],e){return En.create({name:e,providers:[{provide:Vu,useValue:"platform"},{provide:zD,useValue:new Set([()=>hu=null])},...t]})}function YO(t=[]){if(hu)return hu;let e=QO(t);return hu=e,VO(),JO(e),e}function JO(t){t.get(qp,null)?.forEach(n=>n())}var Ei=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=ZO;let t=e;return t})();function ZO(t){return XO(It(),pe(),(t&16)===16)}function XO(t,e,n){if(ju(t)&&!n){let r=Ar(t.index,e);return new gi(r,r)}else if(t.type&47){let r=e[yn];return new gi(r,e)}return null}var Ep=class{constructor(){}supports(e){return kD(e)}create(e){return new Dp(e)}},ek=(t,e)=>e,Dp=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||ek}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<$w(r,i,o)?n:r,a=$w(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let u=a-i,l=c-i;if(u!=l){for(let h=0;h<u;h++){let p=h<o.length?o[h]:o[h]=0,g=p+h;l<=g&&g<u&&(o[h]=p+1)}let d=s.previousIndex;o[d]=l-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!kD(e))throw new R(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,zP(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new Cp(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Pu),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Pu),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Cp=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},bp=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Pu=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new bp,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function $w(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function Hw(){return new gm([new Ep])}var gm=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||Hw()),deps:[[e,new Xw,new _n]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i!=null)return i;throw new R(901,!1)}};e.\u0275prov=N({token:e,providedIn:"root",factory:Hw});let t=e;return t})();function WD(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=YO(r),o=[GO(),...n||[]],a=new Mu({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(_e);return c.run(()=>{a.resolveInjectorInitializers();let u=a.get(Wn,null),l;c.runOutsideAngular(()=>{l=c.onError.subscribe({next:p=>{u.handleError(p)}})});let d=()=>a.destroy(),h=i.get(zD);return h.add(d),a.onDestroy(()=>{l.unsubscribe(),h.delete(d)}),UO(u,c,()=>{let p=a.get(GD);return p.runInitializers(),p.donePromise.then(()=>{let g=a.get(rl,Nu);CO(g||Nu);let I=a.get(Zs);return e!==void 0&&I.bootstrap(e),I})})})}catch(e){return Promise.reject(e)}}function il(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var XD=null;function rr(){return XD}function e0(t){XD??=t}var fl=class{};var Bt=new O(""),t0=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:()=>E(rk),providedIn:"platform"});let t=e;return t})();var rk=(()=>{let e=class e extends t0{constructor(){super(),this._doc=E(Bt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return rr().getBaseHref(this._doc)}onPopState(r){let i=rr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=rr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function n0(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function KD(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Di(t){return t&&t[0]!=="?"?"?"+t:t}var gl=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:()=>E(r0),providedIn:"root"});let t=e;return t})(),ik=new O(""),r0=(()=>{let e=class e extends gl{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??E(Bt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return n0(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Di(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+Di(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+Di(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(W(t0),W(ik,8))},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Xs=(()=>{let e=class e{constructor(r){this._subject=new $e,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=ak(KD(QD(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Di(i))}normalize(r){return e.stripTrailingSlash(sk(this._basePath,QD(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Di(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Di(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=Di,e.joinWithSlash=n0,e.stripTrailingSlash=KD,e.\u0275fac=function(i){return new(i||e)(W(gl))},e.\u0275prov=N({token:e,factory:()=>ok(),providedIn:"root"});let t=e;return t})();function ok(){return new Xs(W(gl))}function sk(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function QD(t){return t.replace(/\/index.html$/,"")}function ak(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var pt=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(pt||{}),ge=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(ge||{}),Tt=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(Tt||{}),Nr={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function ck(t){return Ut(t)[Ne.LocaleId]}function uk(t,e,n){let r=Ut(t),i=[r[Ne.DayPeriodsFormat],r[Ne.DayPeriodsStandalone]],o=jt(i,e);return jt(o,n)}function lk(t,e,n){let r=Ut(t),i=[r[Ne.DaysFormat],r[Ne.DaysStandalone]],o=jt(i,e);return jt(o,n)}function dk(t,e,n){let r=Ut(t),i=[r[Ne.MonthsFormat],r[Ne.MonthsStandalone]],o=jt(i,e);return jt(o,n)}function hk(t,e){let r=Ut(t)[Ne.Eras];return jt(r,e)}function ol(t,e){let n=Ut(t);return jt(n[Ne.DateFormat],e)}function sl(t,e){let n=Ut(t);return jt(n[Ne.TimeFormat],e)}function al(t,e){let r=Ut(t)[Ne.DateTimeFormat];return jt(r,e)}function yl(t,e){let n=Ut(t),r=n[Ne.NumberSymbols][e];if(typeof r>"u"){if(e===Nr.CurrencyDecimal)return n[Ne.NumberSymbols][Nr.Decimal];if(e===Nr.CurrencyGroup)return n[Ne.NumberSymbols][Nr.Group]}return r}function i0(t){if(!t[Ne.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[Ne.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function fk(t){let e=Ut(t);return i0(e),(e[Ne.ExtraData][2]||[]).map(r=>typeof r=="string"?ym(r):[ym(r[0]),ym(r[1])])}function pk(t,e,n){let r=Ut(t);i0(r);let i=[r[Ne.ExtraData][0],r[Ne.ExtraData][1]],o=jt(i,e)||[];return jt(o,n)||[]}function jt(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function ym(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var mk=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,cl={},gk=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,nr=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}(nr||{}),ae=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}(ae||{}),se=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}(se||{});function yk(t,e,n,r){let i=Tk(t);e=tr(n,e)||e;let s=[],a;for(;e;)if(a=gk.exec(e),a){s=s.concat(a.slice(1));let l=s.pop();if(!l)break;e=l}else{s.push(e);break}let c=i.getTimezoneOffset();r&&(c=s0(r,c),i=bk(i,r,!0));let u="";return s.forEach(l=>{let d=Dk(l);u+=d?d(i,n,c):l==="''"?"'":l.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function pl(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function tr(t,e){let n=ck(t);if(cl[n]??={},cl[n][e])return cl[n][e];let r="";switch(e){case"shortDate":r=ol(t,Tt.Short);break;case"mediumDate":r=ol(t,Tt.Medium);break;case"longDate":r=ol(t,Tt.Long);break;case"fullDate":r=ol(t,Tt.Full);break;case"shortTime":r=sl(t,Tt.Short);break;case"mediumTime":r=sl(t,Tt.Medium);break;case"longTime":r=sl(t,Tt.Long);break;case"fullTime":r=sl(t,Tt.Full);break;case"short":let i=tr(t,"shortTime"),o=tr(t,"shortDate");r=ul(al(t,Tt.Short),[i,o]);break;case"medium":let s=tr(t,"mediumTime"),a=tr(t,"mediumDate");r=ul(al(t,Tt.Medium),[s,a]);break;case"long":let c=tr(t,"longTime"),u=tr(t,"longDate");r=ul(al(t,Tt.Long),[c,u]);break;case"full":let l=tr(t,"fullTime"),d=tr(t,"fullDate");r=ul(al(t,Tt.Full),[l,d]);break}return r&&(cl[n][e]=r),r}function ul(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function tn(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function vk(t,e){return tn(t,3).substring(0,e)}function Fe(t,e,n=0,r=!1,i=!1){return function(o,s){let a=_k(t,o);if((n>0||a>-n)&&(a+=n),t===ae.Hours)a===0&&n===-12&&(a=12);else if(t===ae.FractionalSeconds)return vk(a,e);let c=yl(s,Nr.MinusSign);return tn(a,e,c,r,i)}}function _k(t,e){switch(t){case ae.FullYear:return e.getFullYear();case ae.Month:return e.getMonth();case ae.Date:return e.getDate();case ae.Hours:return e.getHours();case ae.Minutes:return e.getMinutes();case ae.Seconds:return e.getSeconds();case ae.FractionalSeconds:return e.getMilliseconds();case ae.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}function Ie(t,e,n=pt.Format,r=!1){return function(i,o){return Ik(i,o,t,e,n,r)}}function Ik(t,e,n,r,i,o){switch(n){case se.Months:return dk(e,i,r)[t.getMonth()];case se.Days:return lk(e,i,r)[t.getDay()];case se.DayPeriods:let s=t.getHours(),a=t.getMinutes();if(o){let u=fk(e),l=pk(e,i,r),d=u.findIndex(h=>{if(Array.isArray(h)){let[p,g]=h,I=s>=p.hours&&a>=p.minutes,w=s<g.hours||s===g.hours&&a<g.minutes;if(p.hours<g.hours){if(I&&w)return!0}else if(I||w)return!0}else if(h.hours===s&&h.minutes===a)return!0;return!1});if(d!==-1)return l[d]}return uk(e,i,r)[s<12?0:1];case se.Eras:return hk(e,r)[t.getFullYear()<=0?0:1];default:let c=n;throw new Error(`unexpected translation type ${c}`)}}function ll(t){return function(e,n,r){let i=-1*r,o=yl(n,Nr.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case nr.Short:return(i>=0?"+":"")+tn(s,2,o)+tn(Math.abs(i%60),2,o);case nr.ShortGMT:return"GMT"+(i>=0?"+":"")+tn(s,1,o);case nr.Long:return"GMT"+(i>=0?"+":"")+tn(s,2,o)+":"+tn(Math.abs(i%60),2,o);case nr.Extended:return r===0?"Z":(i>=0?"+":"")+tn(s,2,o)+":"+tn(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${t}"`)}}}var wk=0,hl=4;function Ek(t){let e=pl(t,wk,1).getDay();return pl(t,0,1+(e<=hl?hl:hl+7)-e)}function o0(t){let e=t.getDay(),n=e===0?-3:hl-e;return pl(t.getFullYear(),t.getMonth(),t.getDate()+n)}function vm(t,e=!1){return function(n,r){let i;if(e){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();i=1+Math.floor((s+o)/7)}else{let o=o0(n),s=Ek(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return tn(i,t,yl(r,Nr.MinusSign))}}function dl(t,e=!1){return function(n,r){let o=o0(n).getFullYear();return tn(o,t,yl(r,Nr.MinusSign),e)}}var _m={};function Dk(t){if(_m[t])return _m[t];let e;switch(t){case"G":case"GG":case"GGG":e=Ie(se.Eras,ge.Abbreviated);break;case"GGGG":e=Ie(se.Eras,ge.Wide);break;case"GGGGG":e=Ie(se.Eras,ge.Narrow);break;case"y":e=Fe(ae.FullYear,1,0,!1,!0);break;case"yy":e=Fe(ae.FullYear,2,0,!0,!0);break;case"yyy":e=Fe(ae.FullYear,3,0,!1,!0);break;case"yyyy":e=Fe(ae.FullYear,4,0,!1,!0);break;case"Y":e=dl(1);break;case"YY":e=dl(2,!0);break;case"YYY":e=dl(3);break;case"YYYY":e=dl(4);break;case"M":case"L":e=Fe(ae.Month,1,1);break;case"MM":case"LL":e=Fe(ae.Month,2,1);break;case"MMM":e=Ie(se.Months,ge.Abbreviated);break;case"MMMM":e=Ie(se.Months,ge.Wide);break;case"MMMMM":e=Ie(se.Months,ge.Narrow);break;case"LLL":e=Ie(se.Months,ge.Abbreviated,pt.Standalone);break;case"LLLL":e=Ie(se.Months,ge.Wide,pt.Standalone);break;case"LLLLL":e=Ie(se.Months,ge.Narrow,pt.Standalone);break;case"w":e=vm(1);break;case"ww":e=vm(2);break;case"W":e=vm(1,!0);break;case"d":e=Fe(ae.Date,1);break;case"dd":e=Fe(ae.Date,2);break;case"c":case"cc":e=Fe(ae.Day,1);break;case"ccc":e=Ie(se.Days,ge.Abbreviated,pt.Standalone);break;case"cccc":e=Ie(se.Days,ge.Wide,pt.Standalone);break;case"ccccc":e=Ie(se.Days,ge.Narrow,pt.Standalone);break;case"cccccc":e=Ie(se.Days,ge.Short,pt.Standalone);break;case"E":case"EE":case"EEE":e=Ie(se.Days,ge.Abbreviated);break;case"EEEE":e=Ie(se.Days,ge.Wide);break;case"EEEEE":e=Ie(se.Days,ge.Narrow);break;case"EEEEEE":e=Ie(se.Days,ge.Short);break;case"a":case"aa":case"aaa":e=Ie(se.DayPeriods,ge.Abbreviated);break;case"aaaa":e=Ie(se.DayPeriods,ge.Wide);break;case"aaaaa":e=Ie(se.DayPeriods,ge.Narrow);break;case"b":case"bb":case"bbb":e=Ie(se.DayPeriods,ge.Abbreviated,pt.Standalone,!0);break;case"bbbb":e=Ie(se.DayPeriods,ge.Wide,pt.Standalone,!0);break;case"bbbbb":e=Ie(se.DayPeriods,ge.Narrow,pt.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ie(se.DayPeriods,ge.Abbreviated,pt.Format,!0);break;case"BBBB":e=Ie(se.DayPeriods,ge.Wide,pt.Format,!0);break;case"BBBBB":e=Ie(se.DayPeriods,ge.Narrow,pt.Format,!0);break;case"h":e=Fe(ae.Hours,1,-12);break;case"hh":e=Fe(ae.Hours,2,-12);break;case"H":e=Fe(ae.Hours,1);break;case"HH":e=Fe(ae.Hours,2);break;case"m":e=Fe(ae.Minutes,1);break;case"mm":e=Fe(ae.Minutes,2);break;case"s":e=Fe(ae.Seconds,1);break;case"ss":e=Fe(ae.Seconds,2);break;case"S":e=Fe(ae.FractionalSeconds,1);break;case"SS":e=Fe(ae.FractionalSeconds,2);break;case"SSS":e=Fe(ae.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=ll(nr.Short);break;case"ZZZZZ":e=ll(nr.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=ll(nr.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=ll(nr.Long);break;default:return null}return _m[t]=e,e}function s0(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function Ck(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function bk(t,e,n){let r=n?-1:1,i=t.getTimezoneOffset(),o=s0(e,i);return Ck(t,r*(o-i))}function Tk(t){if(YD(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,o=1,s=1]=t.split("-").map(a=>+a);return pl(i,o-1,s)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(mk))return Sk(r)}let e=new Date(t);if(!YD(e))throw new Error(`Unable to convert "${t}" into a date`);return e}function Sk(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,c=Number(t[6]||0),u=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return o.call(e,s,a,c,u),e}function YD(t){return t instanceof Date&&!isNaN(t.valueOf())}function a0(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Im=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Pr=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,o){this._viewContainer=r,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((o,s,a)=>{if(o.previousIndex==null)i.createEmbeddedView(this._template,new Im(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(s===null?void 0:s);else if(s!==null){let c=i.get(s);i.move(c,a),JD(c,o)}});for(let o=0,s=i.length;o<s;o++){let c=i.get(o).context;c.index=o,c.count=s,c.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{let s=i.get(o.currentIndex);JD(s,o)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(M(Oo),M(Yu),M(gm))},e.\u0275dir=xe({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function JD(t,e){t.context.$implicit=e.item}var vl=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new wm,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){ZD("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){ZD("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(M(Oo),M(Yu))},e.\u0275dir=xe({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),wm=class{constructor(){this.$implicit=null,this.ngIf=null}};function ZD(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${ft(e)}'.`)}function Ak(t,e){return new R(2100,!1)}var Rk="mediumDate",Mk=new O(""),xk=new O(""),_l=(()=>{let e=class e{constructor(r,i,o){this.locale=r,this.defaultTimezone=i,this.defaultOptions=o}transform(r,i,o,s){if(r==null||r===""||r!==r)return null;try{let a=i??this.defaultOptions?.dateFormat??Rk,c=o??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return yk(r,a,s||this.locale,c)}catch(a){throw Ak(e,a.message)}}};e.\u0275fac=function(i){return new(i||e)(M(rl,16),M(Mk,24),M(xk,24))},e.\u0275pipe=oE({name:"date",type:e,pure:!0,standalone:!0});let t=e;return t})();var nn=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Lt({type:e}),e.\u0275inj=Vt({});let t=e;return t})(),c0="browser",Nk="server";function Em(t){return t===Nk}var ml=class{};var bm=class extends fl{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Tm=class t extends bm{static makeCurrent(){e0(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=Pk();return n==null?null:Ok(n)}resetBaseElement(){ta=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return a0(document.cookie,e)}},ta=null;function Pk(){return ta=ta||document.querySelector("base"),ta?ta.getAttribute("href"):null}function Ok(t){return new URL(t,document.baseURI).pathname}var kk=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac});let t=e;return t})(),Sm=new O(""),h0=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new R(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(W(Sm),W(_e))},e.\u0275prov=N({token:e,factory:e.\u0275fac});let t=e;return t})(),Il=class{constructor(e){this._doc=e}},Dm="ng-app-id",f0=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Em(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Dm}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(Dm),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Dm,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(W(Bt),W(Hp),W(Gp,8),W(Mr))},e.\u0275prov=N({token:e,factory:e.\u0275fac});let t=e;return t})(),Cm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Rm=/%COMP%/g,p0="%COMP%",Fk=`_nghost-${p0}`,Vk=`_ngcontent-${p0}`,Lk=!0,Uk=new O("",{providedIn:"root",factory:()=>Lk});function jk(t){return Vk.replace(Rm,t)}function Bk(t){return Fk.replace(Rm,t)}function m0(t,e){return e.map(n=>n.replace(Rm,t))}var u0=(()=>{let e=class e{constructor(r,i,o,s,a,c,u,l=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Em(c),this.defaultRenderer=new na(r,a,u,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===mn.ShadowDom&&(i=le(S({},i),{encapsulation:mn.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof wl?o.applyToHost(r):o instanceof ra&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case mn.Emulated:s=new wl(u,l,i,this.appId,d,a,c,h);break;case mn.ShadowDom:return new Am(u,l,r,i,a,c,this.nonce,h);default:s=new ra(u,l,i,d,a,c,h);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(W(h0),W(f0),W(Hp),W(Uk),W(Bt),W(Mr),W(_e),W(Gp))},e.\u0275prov=N({token:e,factory:e.\u0275fac});let t=e;return t})(),na=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Cm[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(l0(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(l0(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new R(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Cm[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Cm[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Kn.DashCase|Kn.Important)?e.style.setProperty(n,r,i&Kn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Kn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=rr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function l0(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Am=class extends na{constructor(e,n,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=m0(i.id,i.styles);for(let l of u){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ra=class extends na{constructor(e,n,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?m0(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},wl=class extends ra{constructor(e,n,r,i,o,s,a,c){let u=i+"-"+r.id;super(e,n,r,o,s,a,c,u),this.contentAttr=jk(u),this.hostAttr=Bk(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},$k=(()=>{let e=class e extends Il{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(W(Bt))},e.\u0275prov=N({token:e,factory:e.\u0275fac});let t=e;return t})(),d0=["alt","control","meta","shift"],Hk={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qk={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},Gk=(()=>{let e=class e extends Il{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>rr().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),d0.forEach(l=>{let d=i.indexOf(l);d>-1&&(i.splice(d,1),a+=l+".")}),a+=s,i.length!=0||s.length===0)return null;let u={};return u.domEventName=o,u.fullKey=a,u}static matchEventFullKeyCode(r,i){let o=Hk[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),d0.forEach(a=>{if(a!==o){let c=qk[a];c(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(W(Bt))},e.\u0275prov=N({token:e,factory:e.\u0275fac});let t=e;return t})();function g0(t,e){return WD(S({rootComponent:t},zk(e)))}function zk(t){return{appProviders:[...Jk,...t?.providers??[]],platformProviders:Yk}}function Wk(){Tm.makeCurrent()}function Kk(){return new Wn}function Qk(){return nD(document),document}var Yk=[{provide:Mr,useValue:c0},{provide:qp,useValue:Wk,multi:!0},{provide:Bt,useFactory:Qk,deps:[]}];var Jk=[{provide:Vu,useValue:"root"},{provide:Wn,useFactory:Kk,deps:[]},{provide:Sm,useClass:$k,multi:!0,deps:[Bt,_e,Mr]},{provide:Sm,useClass:Gk,multi:!0,deps:[Bt]},u0,f0,h0,{provide:qs,useExisting:u0},{provide:ml,useClass:kk,deps:[]},[]];var y0=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(W(Bt))},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var q="primary",va=Symbol("RouteTitle"),Om=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Bo(t){return new Om(t)}function e1(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function t1(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!bn(t[n],e[n]))return!1;return!0}function bn(t,e){let n=t?km(t):void 0,r=e?km(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!D0(t[i],e[i]))return!1;return!0}function km(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function D0(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function C0(t){return t.length>0?t[t.length-1]:null}function Fr(t){return gf(t)?t:wi(t)?De(Promise.resolve(t)):$(t)}var n1={exact:T0,subset:S0},b0={exact:r1,subset:i1,ignored:()=>!0};function v0(t,e,n){return n1[n.paths](t.root,e.root,n.matrixParams)&&b0[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function r1(t,e){return bn(t,e)}function T0(t,e,n){if(!bi(t.segments,e.segments)||!Cl(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!T0(t.children[r],e.children[r],n))return!1;return!0}function i1(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>D0(t[n],e[n]))}function S0(t,e,n){return A0(t,e,e.segments,n)}function A0(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!bi(i,n)||e.hasChildren()||!Cl(i,n,r))}else if(t.segments.length===n.length){if(!bi(t.segments,n)||!Cl(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!S0(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!bi(t.segments,i)||!Cl(t.segments,i,r)||!t.children[q]?!1:A0(t.children[q],e,o,r)}}function Cl(t,e,n){return e.every((r,i)=>b0[n](t[i].parameters,r.parameters))}var Or=class{constructor(e=new de([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Bo(this.queryParams),this._queryParamMap}toString(){return a1.serialize(this)}},de=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return bl(this)}},Ci=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Bo(this.parameters),this._parameterMap}toString(){return M0(this)}};function o1(t,e){return bi(t,e)&&t.every((n,r)=>bn(n.parameters,e[r].parameters))}function bi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function s1(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===q&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==q&&(n=n.concat(e(i,r)))}),n}var ag=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:()=>new Sl,providedIn:"root"});let t=e;return t})(),Sl=class{parse(e){let n=new Vm(e);return new Or(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${ia(e.root,!0)}`,r=l1(e.queryParams),i=typeof e.fragment=="string"?`#${c1(e.fragment)}`:"";return`${n}${r}${i}`}},a1=new Sl;function bl(t){return t.segments.map(e=>M0(e)).join("/")}function ia(t,e){if(!t.hasChildren())return bl(t);if(e){let n=t.children[q]?ia(t.children[q],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==q&&r.push(`${i}:${ia(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=s1(t,(r,i)=>i===q?[ia(t.children[q],!1)]:[`${i}:${ia(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[q]!=null?`${bl(t)}/${n[0]}`:`${bl(t)}/(${n.join("//")})`}}function R0(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function El(t){return R0(t).replace(/%3B/gi,";")}function c1(t){return encodeURI(t)}function Fm(t){return R0(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Tl(t){return decodeURIComponent(t)}function _0(t){return Tl(t.replace(/\+/g,"%20"))}function M0(t){return`${Fm(t.path)}${u1(t.parameters)}`}function u1(t){return Object.entries(t).map(([e,n])=>`;${Fm(e)}=${Fm(n)}`).join("")}function l1(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${El(n)}=${El(i)}`).join("&"):`${El(n)}=${El(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var d1=/^[^\/()?;#]+/;function Mm(t){let e=t.match(d1);return e?e[0]:""}var h1=/^[^\/()?;=#]+/;function f1(t){let e=t.match(h1);return e?e[0]:""}var p1=/^[^=?&#]+/;function m1(t){let e=t.match(p1);return e?e[0]:""}var g1=/^[^&#]+/;function y1(t){let e=t.match(g1);return e?e[0]:""}var Vm=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new de([],{}):new de([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[q]=new de(e,n)),r}parseSegment(){let e=Mm(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new R(4009,!1);return this.capture(e),new Ci(Tl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=f1(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Mm(this.remaining);i&&(r=i,this.capture(r))}e[Tl(n)]=Tl(r)}parseQueryParam(e){let n=m1(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=y1(this.remaining);s&&(r=s,this.capture(r))}let i=_0(n),o=_0(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Mm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new R(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=q);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[q]:new de([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new R(4011,!1)}};function x0(t){return t.segments.length>0?new de([],{[q]:t}):t}function N0(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=N0(i);if(r===q&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new de(t.segments,e);return v1(n)}function v1(t){if(t.numberOfChildren===1&&t.children[q]){let e=t.children[q];return new de(t.segments.concat(e.segments),e.children)}return t}function $o(t){return t instanceof Or}function _1(t,e,n=null,r=null){let i=P0(t);return O0(i,e,n,r)}function P0(t){let e;function n(o){let s={};for(let c of o.children){let u=n(c);s[c.outlet]=u}let a=new de(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=x0(r);return e??i}function O0(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return xm(i,i,i,n,r);let o=I1(e);if(o.toRoot())return xm(i,i,new de([],{}),n,r);let s=w1(o,i,t),a=s.processChildren?aa(s.segmentGroup,s.index,o.commands):F0(s.segmentGroup,s.index,o.commands);return xm(i,s.segmentGroup,a,n,r)}function Al(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function la(t){return typeof t=="object"&&t!=null&&t.outlets}function xm(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(l=>`${l}`):`${u}`});let s;t===e?s=n:s=k0(t,e,n);let a=x0(N0(s));return new Or(a,o,i)}function k0(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=k0(o,e,n)}),new de(t.segments,r)}var Rl=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Al(r[0]))throw new R(4003,!1);let i=r.find(la);if(i&&i!==C0(r))throw new R(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function I1(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Rl(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Rl(n,e,r)}var Uo=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function w1(t,e,n){if(t.isAbsolute)return new Uo(e,!0,0);if(!n)return new Uo(e,!1,NaN);if(n.parent===null)return new Uo(n,!0,0);let r=Al(t.commands[0])?0:1,i=n.segments.length-1+r;return E1(n,i,t.numberOfDoubleDots)}function E1(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new R(4005,!1);i=r.segments.length}return new Uo(r,!1,i-o)}function D1(t){return la(t[0])?t[0].outlets:{[q]:t}}function F0(t,e,n){if(t??=new de([],{}),t.segments.length===0&&t.hasChildren())return aa(t,e,n);let r=C1(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new de(t.segments.slice(0,r.pathIndex),{});return o.children[q]=new de(t.segments.slice(r.pathIndex),t.children),aa(o,0,i)}else return r.match&&i.length===0?new de(t.segments,{}):r.match&&!t.hasChildren()?Lm(t,e,n):r.match?aa(t,0,i):Lm(t,e,n)}function aa(t,e,n){if(n.length===0)return new de(t.segments,{});{let r=D1(n),i={};if(Object.keys(r).some(o=>o!==q)&&t.children[q]&&t.numberOfChildren===1&&t.children[q].segments.length===0){let o=aa(t.children[q],e,n);return new de(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=F0(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new de(t.segments,i)}}function C1(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(la(a))break;let c=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!w0(c,u,s))return o;r+=2}else{if(!w0(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Lm(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(la(o)){let c=b1(o.outlets);return new de(r,c)}if(i===0&&Al(n[0])){let c=t.segments[e];r.push(new Ci(c.path,I0(n[0]))),i++;continue}let s=la(o)?o.outlets[q]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Al(a)?(r.push(new Ci(s,I0(a))),i+=2):(r.push(new Ci(s,{})),i++)}return new de(r,{})}function b1(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Lm(new de([],{}),0,r))}),e}function I0(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function w0(t,e,n){return t==n.path&&bn(e,n.parameters)}var ca="imperative",Xe=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Xe||{}),$t=class{constructor(e,n){this.id=e,this.url=n}},da=class extends $t{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Xe.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ti=class extends $t{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Xe.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},At=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(At||{}),Um=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Um||{}),kr=class extends $t{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Xe.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Si=class extends $t{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Xe.NavigationSkipped}},ha=class extends $t{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Xe.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ml=class extends $t{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Xe.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jm=class extends $t{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Xe.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Bm=class extends $t{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Xe.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},$m=class extends $t{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Xe.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hm=class extends $t{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Xe.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qm=class{constructor(e){this.route=e,this.type=Xe.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Gm=class{constructor(e){this.route=e,this.type=Xe.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},zm=class{constructor(e){this.snapshot=e,this.type=Xe.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Wm=class{constructor(e){this.snapshot=e,this.type=Xe.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Km=class{constructor(e){this.snapshot=e,this.type=Xe.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qm=class{constructor(e){this.snapshot=e,this.type=Xe.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var fa=class{},pa=class{constructor(e){this.url=e}};var Ym=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Fl,this.attachRef=null}},Fl=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Ym,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),xl=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Jm(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Jm(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Zm(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Zm(e,this._root).map(n=>n.value)}};function Jm(t,e){if(t===e.value)return e;for(let n of e.children){let r=Jm(t,n);if(r)return r}return null}function Zm(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Zm(t,n);if(r.length)return r.unshift(e),r}return[]}var St=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Lo(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Nl=class extends xl{constructor(e,n){super(e),this.snapshot=n,ug(this,e)}toString(){return this.snapshot.toString()}};function V0(t){let e=T1(t),n=new Je([new Ci("",{})]),r=new Je({}),i=new Je({}),o=new Je({}),s=new Je(""),a=new Ho(n,r,o,s,i,q,t,e.root);return a.snapshot=e.root,new Nl(new St(a,[]),e)}function T1(t){let e={},n={},r={},i="",o=new ma([],e,r,i,n,q,t,null,{});return new Pl("",new St(o,[]))}var Ho=class{constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Y(u=>u[va]))??$(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Y(e=>Bo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Y(e=>Bo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function cg(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:S(S({},e.params),t.params),data:S(S({},e.data),t.data),resolve:S(S(S(S({},t.data),e.data),i?.data),t._resolvedData)}:r={params:S({},t.params),data:S({},t.data),resolve:S(S({},t.data),t._resolvedData??{})},i&&U0(i)&&(r.resolve[va]=i.title),r}var ma=class{get title(){return this.data?.[va]}constructor(e,n,r,i,o,s,a,c,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Bo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Bo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Pl=class extends xl{constructor(e,n){super(n),this.url=e,ug(this,n)}toString(){return L0(this._root)}};function ug(t,e){e.value._routerState=t,e.children.forEach(n=>ug(t,n))}function L0(t){let e=t.children.length>0?` { ${t.children.map(L0).join(", ")} } `:"";return`${t.value}${e}`}function Nm(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,bn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),bn(e.params,n.params)||t.paramsSubject.next(n.params),t1(e.url,n.url)||t.urlSubject.next(n.url),bn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Xm(t,e){let n=bn(t.params,e.params)&&o1(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Xm(t.parent,e.parent))}function U0(t){return typeof t.title=="string"||t.title===null}var S1=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=q,this.activateEvents=new $e,this.deactivateEvents=new $e,this.attachEvents=new $e,this.detachEvents=new $e,this.parentContexts=E(Fl),this.location=E(Oo),this.changeDetector=E(Ei),this.environmentInjector=E(kt),this.inputBinder=E(lg,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new R(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new R(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new R(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new R(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new eg(r,c,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:u,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=xe({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Sr]});let t=e;return t})(),eg=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r,this.__ngOutletInjector=!0}get(e,n){return e===Ho?this.route:e===Fl?this.childContexts:this.parent.get(e,n)}},lg=new O("");function A1(t,e,n){let r=ga(t,e._root,n?n._root:void 0);return new Nl(r,e)}function ga(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=R1(t,e,n);return new St(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>ga(t,a)),s}}let r=M1(e.value),i=e.children.map(o=>ga(t,o));return new St(r,i)}}function R1(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return ga(t,r,i);return ga(t,r)})}function M1(t){return new Ho(new Je(t.url),new Je(t.params),new Je(t.queryParams),new Je(t.fragment),new Je(t.data),t.outlet,t.component,t)}var j0="ngNavigationCancelingError";function B0(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=$o(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=$0(!1,At.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function $0(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[j0]=!0,n.cancellationCode=e,n}function x1(t){return H0(t)&&$o(t.url)}function H0(t){return!!t&&t[j0]}var N1=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=He({type:e,selectors:[["ng-component"]],standalone:!0,features:[Ge],decls:1,vars:0,template:function(i,o){i&1&&j(0,"router-outlet")},dependencies:[S1],encapsulation:2});let t=e;return t})();function P1(t,e){return t.providers&&!t._injector&&(t._injector=am(t.providers,e,`Route: ${t.path}`)),t._injector??e}function dg(t){let e=t.children&&t.children.map(dg),n=e?le(S({},t),{children:e}):S({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==q&&(n.component=N1),n}function Tn(t){return t.outlet||q}function O1(t,e){let n=t.filter(r=>Tn(r)===e);return n.push(...t.filter(r=>Tn(r)!==e)),n}function _a(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var k1=(t,e,n,r)=>Y(i=>(new tg(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),tg=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Nm(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Lo(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Lo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Lo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Lo(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Qm(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Wm(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Nm(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Nm(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=_a(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},Ol=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},jo=class{constructor(e,n){this.component=e,this.route=n}};function F1(t,e,n){let r=t._root,i=e?e._root:null;return oa(r,i,n,[r.value])}function V1(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Go(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!zw(t)?t:e.get(t):r}function oa(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Lo(e);return t.children.forEach(s=>{L1(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>ua(a,n.getContext(s),i)),i}function L1(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=U1(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Ol(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?oa(t,e,a?a.children:null,r,i):oa(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new jo(a.outlet.component,s))}else s&&ua(e,a,i),i.canActivateChecks.push(new Ol(r)),o.component?oa(t,null,a?a.children:null,r,i):oa(t,null,n,r,i);return i}function U1(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!bi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!bi(t.url,e.url)||!bn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Xm(t,e)||!bn(t.queryParams,e.queryParams);case"paramsChange":default:return!Xm(t,e)}}function ua(t,e,n){let r=Lo(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?ua(s,e.children.getContext(o),n):ua(s,null,n):ua(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new jo(e.outlet.component,i)):n.canDeactivateChecks.push(new jo(null,i)):n.canDeactivateChecks.push(new jo(null,i))}function Ia(t){return typeof t=="function"}function j1(t){return typeof t=="boolean"}function B1(t){return t&&Ia(t.canLoad)}function $1(t){return t&&Ia(t.canActivate)}function H1(t){return t&&Ia(t.canActivateChild)}function q1(t){return t&&Ia(t.canDeactivate)}function G1(t){return t&&Ia(t.canMatch)}function q0(t){return t instanceof qn||t?.name==="EmptyError"}var Dl=Symbol("INITIAL_VALUE");function qo(){return Kt(t=>nu(t.map(e=>e.pipe(Gn(1),Ef(Dl)))).pipe(Y(e=>{for(let n of e)if(n!==!0){if(n===Dl)return Dl;if(n===!1||n instanceof Or)return n}return!0}),Wt(e=>e!==Dl),Gn(1)))}function z1(t,e){return je(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?$(le(S({},n),{guardsResult:!0})):W1(s,r,i,t).pipe(je(a=>a&&j1(a)?K1(r,o,t,e):$(a)),Y(a=>le(S({},n),{guardsResult:a})))})}function W1(t,e,n,r){return De(t).pipe(je(i=>X1(i.component,i.route,n,e,r)),hn(i=>i!==!0,!0))}function K1(t,e,n,r){return De(e).pipe(yo(i=>go(Y1(i.route.parent,r),Q1(i.route,r),Z1(t,i.path,n),J1(t,i.route,n))),hn(i=>i!==!0,!0))}function Q1(t,e){return t!==null&&e&&e(new Km(t)),$(!0)}function Y1(t,e){return t!==null&&e&&e(new zm(t)),$(!0)}function J1(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return $(!0);let i=r.map(o=>ru(()=>{let s=_a(e)??n,a=Go(o,s),c=$1(a)?a.canActivate(e,t):vi(s,()=>a(e,t));return Fr(c).pipe(hn())}));return $(i).pipe(qo())}function Z1(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>V1(s)).filter(s=>s!==null).map(s=>ru(()=>{let a=s.guards.map(c=>{let u=_a(s.node)??n,l=Go(c,u),d=H1(l)?l.canActivateChild(r,t):vi(u,()=>l(r,t));return Fr(d).pipe(hn())});return $(a).pipe(qo())}));return $(o).pipe(qo())}function X1(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return $(!0);let s=o.map(a=>{let c=_a(e)??i,u=Go(a,c),l=q1(u)?u.canDeactivate(t,e,n,r):vi(c,()=>u(t,e,n,r));return Fr(l).pipe(hn())});return $(s).pipe(qo())}function eF(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return $(!0);let o=i.map(s=>{let a=Go(s,t),c=B1(a)?a.canLoad(e,n):vi(t,()=>a(e,n));return Fr(c)});return $(o).pipe(qo(),G0(r))}function G0(t){return cf(Be(e=>{if($o(e))throw B0(t,e)}),Y(e=>e===!0))}function tF(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return $(!0);let o=i.map(s=>{let a=Go(s,t),c=G1(a)?a.canMatch(e,n):vi(t,()=>a(e,n));return Fr(c)});return $(o).pipe(qo(),G0(r))}var ya=class{constructor(e){this.segmentGroup=e||null}},kl=class extends Error{constructor(e){super(),this.urlTree=e}};function Vo(t){return mo(new ya(t))}function nF(t){return mo(new R(4e3,!1))}function rF(t){return mo($0(!1,At.GuardRejected))}var ng=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return $(r);if(i.numberOfChildren>1||!i.children[q])return nF(e.redirectTo);i=i.children[q]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new kl(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Or(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new de(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new R(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},rg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function iF(t,e,n,r,i){let o=hg(t,e,n);return o.matched?(r=P1(e,r),tF(r,e,n,i).pipe(Y(s=>s===!0?o:S({},rg)))):$(o)}function hg(t,e,n){if(e.path==="**")return oF(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?S({},rg):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||e1)(n,t,e);if(!i)return S({},rg);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?S(S({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function oF(t){return{matched:!0,parameters:t.length>0?C0(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function E0(t,e,n,r){return n.length>0&&cF(t,n,r)?{segmentGroup:new de(e,aF(r,new de(n,t.children))),slicedSegments:[]}:n.length===0&&uF(t,n,r)?{segmentGroup:new de(t.segments,sF(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new de(t.segments,t.children),slicedSegments:n}}function sF(t,e,n,r){let i={};for(let o of n)if(Vl(t,e,o)&&!r[Tn(o)]){let s=new de([],{});i[Tn(o)]=s}return S(S({},r),i)}function aF(t,e){let n={};n[q]=e;for(let r of t)if(r.path===""&&Tn(r)!==q){let i=new de([],{});n[Tn(r)]=i}return n}function cF(t,e,n){return n.some(r=>Vl(t,e,r)&&Tn(r)!==q)}function uF(t,e,n){return n.some(r=>Vl(t,e,r))}function Vl(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function lF(t,e,n,r){return Tn(t)!==r&&(r===q||!Vl(e,n,t))?!1:hg(e,t,n).matched}function dF(t,e,n){return e.length===0&&!t.children[n]}var ig=class{};function hF(t,e,n,r,i,o,s="emptyOnly"){return new og(t,e,n,r,i,s,o).recognize()}var fF=31,og=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new ng(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new R(4002,`'${e.segmentGroup}'`)}recognize(){let e=E0(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Y(n=>{let r=new ma([],Object.freeze({}),Object.freeze(S({},this.urlTree.queryParams)),this.urlTree.fragment,{},q,this.rootComponentType,null,{}),i=new St(r,n),o=new Pl("",i),s=_1(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,q).pipe(Ir(r=>{if(r instanceof kl)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ya?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=cg(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(Y(o=>o instanceof St?[o]:[]))}processChildren(e,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return De(i).pipe(yo(o=>{let s=r.children[o],a=O1(n,o);return this.processSegmentGroup(e,a,s,o)}),wf((o,s)=>(o.push(...s),o)),wr(null),If(),je(o=>{if(o===null)return Vo(r);let s=z0(o);return pF(s),$(s)}))}processSegment(e,n,r,i,o,s){return De(n).pipe(yo(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,o,s).pipe(Ir(c=>{if(c instanceof ya)return $(null);throw c}))),hn(a=>!!a),Ir(a=>{if(q0(a))return dF(r,i,o)?$(new ig):Vo(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return lF(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):Vo(i):Vo(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){let{matched:a,consumedSegments:c,positionalParamSegments:u,remainingSegments:l}=hg(n,i,o);if(!a)return Vo(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>fF&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,u);return this.applyRedirects.lineralizeSegments(i,d).pipe(je(h=>this.processSegment(e,r,n,h.concat(l),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){let s=iF(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(Kt(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Kt(({routes:c})=>{let u=r._loadedInjector??e,{consumedSegments:l,remainingSegments:d,parameters:h}=a,p=new ma(l,h,Object.freeze(S({},this.urlTree.queryParams)),this.urlTree.fragment,gF(r),Tn(r),r.component??r._loadedComponent??null,r,yF(r)),{segmentGroup:g,slicedSegments:I}=E0(n,l,d,c);if(I.length===0&&g.hasChildren())return this.processChildren(u,c,g).pipe(Y(A=>A===null?null:new St(p,A)));if(c.length===0&&I.length===0)return $(new St(p,[]));let w=Tn(r)===o;return this.processSegment(u,c,g,I,w?q:o,!0).pipe(Y(A=>new St(p,A instanceof St?[A]:[])))}))):Vo(n)))}getChildConfig(e,n,r){return n.children?$({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?$({routes:n._loadedRoutes,injector:n._loadedInjector}):eF(e,n,r,this.urlSerializer).pipe(je(i=>i?this.configLoader.loadChildren(e,n).pipe(Be(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):rF(n))):$({routes:[],injector:e})}};function pF(t){t.sort((e,n)=>e.value.outlet===q?-1:n.value.outlet===q?1:e.value.outlet.localeCompare(n.value.outlet))}function mF(t){let e=t.value.routeConfig;return e&&e.path===""}function z0(t){let e=[],n=new Set;for(let r of t){if(!mF(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=z0(r.children);e.push(new St(r.value,i))}return e.filter(r=>!n.has(r))}function gF(t){return t.data||{}}function yF(t){return t.resolve||{}}function vF(t,e,n,r,i,o){return je(s=>hF(t,e,n,r,s.extractedUrl,i,o).pipe(Y(({state:a,tree:c})=>le(S({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function _F(t,e){return je(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return $(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of W0(c))s.add(u);let a=0;return De(s).pipe(yo(c=>o.has(c)?IF(c,r,t,e):(c.data=cg(c,c.parent,t).resolve,$(void 0))),Be(()=>a++),vo(1),je(c=>a===s.size?$(n):Ct))})}function W0(t){let e=t.children.map(n=>W0(n)).flat();return[t,...e]}function IF(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!U0(i)&&(o[va]=i.title),wF(o,t,e,r).pipe(Y(s=>(t._resolvedData=s,t.data=cg(t,t.parent,n).resolve,null)))}function wF(t,e,n,r){let i=km(t);if(i.length===0)return $({});let o={};return De(i).pipe(je(s=>EF(t[s],e,n,r).pipe(hn(),Be(a=>{o[s]=a}))),vo(1),_f(o),Ir(s=>q0(s)?Ct:mo(s)))}function EF(t,e,n,r){let i=_a(e)??r,o=Go(t,i),s=o.resolve?o.resolve(e,n):vi(i,()=>o(e,n));return Fr(s)}function Pm(t){return Kt(e=>{let n=t(e);return n?De(n).pipe(Y(()=>e)):$(e)})}var K0=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===q);return i}getResolvedTitleForRoute(r){return r.data[va]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:()=>E(DF),providedIn:"root"});let t=e;return t})(),DF=(()=>{let e=class e extends K0{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(W(y0))},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),fg=new O("",{providedIn:"root",factory:()=>({})}),pg=new O(""),CF=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=E(mm)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return $(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Fr(r.loadComponent()).pipe(Y(Q0),Be(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),ks(()=>{this.componentLoaders.delete(r)})),o=new lo(i,()=>new dt).pipe(uo());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return $({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=bF(i,this.compiler,r,this.onLoadEndListener).pipe(ks(()=>{this.childrenLoaders.delete(i)})),a=new lo(s,()=>new dt).pipe(uo());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function bF(t,e,n,r){return Fr(t.loadChildren()).pipe(Y(Q0),je(i=>i instanceof zs||Array.isArray(i)?$(i):De(e.compileModuleAsync(i))),Y(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(pg,[],{optional:!0,self:!0}).flat()),{routes:s.map(dg),injector:o}}))}function TF(t){return t&&typeof t=="object"&&"default"in t}function Q0(t){return TF(t)?t.default:t}var mg=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:()=>E(SF),providedIn:"root"});let t=e;return t})(),SF=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),AF=new O("");var RF=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new dt,this.transitionAbortSubject=new dt,this.configLoader=E(CF),this.environmentInjector=E(kt),this.urlSerializer=E(ag),this.rootContexts=E(Fl),this.location=E(Xs),this.inputBindingEnabled=E(lg,{optional:!0})!==null,this.titleStrategy=E(K0),this.options=E(fg,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=E(mg),this.createViewTransition=E(AF,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>$(void 0),this.rootComponentType=null;let r=o=>this.events.next(new qm(o)),i=o=>this.events.next(new Gm(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(le(S(S({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new Je({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ca,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Wt(s=>s.id!==0),Y(s=>le(S({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Kt(s=>{let a=!1,c=!1;return $(s).pipe(Kt(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",At.SupersededByNewNavigation),Ct;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?le(S({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=u.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!l&&d!=="reload"){let h="";return this.events.next(new Si(u.id,this.urlSerializer.serialize(u.rawUrl),h,Um.IgnoredSameUrlNavigation)),u.resolve(null),Ct}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return $(u).pipe(Kt(h=>{let p=this.transitions?.getValue();return this.events.next(new da(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),p!==this.transitions?.getValue()?Ct:Promise.resolve(h)}),vF(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Be(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=le(S({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let p=new Ml(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:h,extractedUrl:p,source:g,restoredState:I,extras:w}=u,A=new da(h,this.urlSerializer.serialize(p),g,I);this.events.next(A);let te=V0(this.rootComponentType).snapshot;return this.currentTransition=s=le(S({},u),{targetSnapshot:te,urlAfterRedirects:p,extras:le(S({},w),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=p,$(s)}else{let h="";return this.events.next(new Si(u.id,this.urlSerializer.serialize(u.extractedUrl),h,Um.IgnoredByUrlHandlingStrategy)),u.resolve(null),Ct}}),Be(u=>{let l=new jm(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),Y(u=>(this.currentTransition=s=le(S({},u),{guards:F1(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),z1(this.environmentInjector,u=>this.events.next(u)),Be(u=>{if(s.guardsResult=u.guardsResult,$o(u.guardsResult))throw B0(this.urlSerializer,u.guardsResult);let l=new Bm(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),Wt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",At.GuardRejected),!1)),Pm(u=>{if(u.guards.canActivateChecks.length)return $(u).pipe(Be(l=>{let d=new $m(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),Kt(l=>{let d=!1;return $(l).pipe(_F(this.paramsInheritanceStrategy,this.environmentInjector),Be({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",At.NoDataFromResolver)}}))}),Be(l=>{let d=new Hm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),Pm(u=>{let l=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(Be(p=>{d.component=p}),Y(()=>{})));for(let p of d.children)h.push(...l(p));return h};return nu(l(u.targetSnapshot.root)).pipe(wr(null),Gn(1))}),Pm(()=>this.afterPreactivation()),Kt(()=>{let{currentSnapshot:u,targetSnapshot:l}=s,d=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return d?De(d).pipe(Y(()=>s)):$(s)}),Y(u=>{let l=A1(r.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=le(S({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),Be(()=>{this.events.next(new fa)}),k1(this.rootContexts,r.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Gn(1),Be({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ti(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),Df(this.transitionAbortSubject.pipe(Be(u=>{throw u}))),ks(()=>{!a&&!c&&this.cancelNavigationTransition(s,"",At.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ir(u=>{if(c=!0,H0(u))this.events.next(new kr(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),x1(u)?this.events.next(new pa(u.url)):s.resolve(!1);else{this.events.next(new ha(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(r.errorHandler(u))}catch(l){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(l)}}return Ct}))}))}cancelNavigationTransition(r,i,o){let s=new kr(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function MF(t){return t!==ca}var xF=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:()=>E(NF),providedIn:"root"});let t=e;return t})(),sg=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},NF=(()=>{let e=class e extends sg{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Rr(e)))(o||e)}})(),e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Y0=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:()=>E(PF),providedIn:"root"});let t=e;return t})(),PF=(()=>{let e=class e extends Y0{constructor(){super(...arguments),this.location=E(Xs),this.urlSerializer=E(ag),this.options=E(fg,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=E(mg),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Or,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=V0(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof da)this.stateMemento=this.createStateMemento();else if(r instanceof Si)this.rawUrlTree=i.initialUrl;else if(r instanceof Ml){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof fa?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof kr&&(r.code===At.GuardRejected||r.code===At.NoDataFromResolver)?this.restoreHistory(i):r instanceof ha?this.restoreHistory(i,!0):r instanceof Ti&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=S(S({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=S(S({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Rr(e)))(o||e)}})(),e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),sa=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(sa||{});function OF(t,e){t.events.pipe(Wt(n=>n instanceof Ti||n instanceof kr||n instanceof ha||n instanceof Si),Y(n=>n instanceof Ti||n instanceof Si?sa.COMPLETE:(n instanceof kr?n.code===At.Redirect||n.code===At.SupersededByNewNavigation:!1)?sa.REDIRECTING:sa.FAILED),Wt(n=>n!==sa.REDIRECTING),Gn(1)).subscribe(()=>{e()})}function kF(t){throw t}var FF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},VF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ll=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=E(nl),this.stateManager=E(Y0),this.options=E(fg,{optional:!0})||{},this.pendingTasks=E(Zu),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=E(RF),this.urlSerializer=E(ag),this.location=E(Xs),this.urlHandlingStrategy=E(mg),this._events=new dt,this.errorHandler=this.options.errorHandler||kF,this.navigated=!1,this.routeReuseStrategy=E(xF),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=E(pg,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!E(lg,{optional:!0}),this.eventsSubscription=new Me,this.isNgZoneEnabled=E(_e)instanceof _e&&_e.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof kr&&i.code!==At.Redirect&&i.code!==At.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Ti)this.navigated=!0;else if(i instanceof pa){let a=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),c={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||MF(o.source)};this.scheduleNavigation(a,ca,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}UF(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ca,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let u=S({},o);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(dg),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:u}=i,l=u?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=S(S({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let p=o?o.snapshot:this.routerState.snapshot.root;h=P0(p)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),h=this.currentUrlTree.root}return O0(h,r,d,l??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=$o(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,ca,null,i)}navigate(r,i={skipLocationChange:!1}){return LF(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=S({},FF):i===!1?o=S({},VF):o=i,$o(r))return v0(this.currentUrlTree,r,o);let s=this.parseUrl(r);return v0(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let c,u,l;a?(c=a.resolve,u=a.reject,l=a.promise):l=new Promise((h,p)=>{c=h,u=p});let d=this.pendingTasks.add();return OF(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function LF(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new R(4008,!1)}function UF(t){return!(t instanceof fa)&&!(t instanceof pa)}var jF=new O("");function J0(t,...e){return Fu([{provide:pg,multi:!0,useValue:t},[],{provide:Ho,useFactory:BF,deps:[Ll]},{provide:pm,multi:!0,useFactory:$F},e.map(n=>n.\u0275providers)])}function BF(t){return t.routerState.root}function $F(){let t=E(En);return e=>{let n=t.get(Zs);if(e!==n.components[0])return;let r=t.get(Ll),i=t.get(HF);t.get(qF)===1&&r.initialNavigation(),t.get(GF,null,z.Optional)?.setUpPreloading(),t.get(jF,null,z.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var HF=new O("",{factory:()=>new dt}),qF=new O("",{providedIn:"root",factory:()=>1});var GF=new O("");var Z0=[];var eC=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},zF=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},tC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,l=o>>2,d=(o&3)<<4|a>>4,h=(a&15)<<2|u>>6,p=u&63;c||(p=64,s||(h=64)),r.push(n[l],n[d],n[h],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(eC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):zF(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let u=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||u==null||d==null)throw new yg;let h=o<<2|a>>4;if(r.push(h),u!==64){let p=a<<4&240|u>>2;if(r.push(p),d!==64){let g=u<<6&192|d;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},yg=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},WF=function(t){let e=eC(t);return tC.encodeByteArray(e,!0)},wa=function(t){return WF(t).replace(/\./g,"")},_g=function(t){try{return tC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function KF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var QF=()=>KF().__FIREBASE_DEFAULTS__,YF=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},JF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&_g(t[1]);return e&&JSON.parse(e)},jl=()=>{try{return QF()||YF()||JF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ig=t=>{var e,n;return(n=(e=jl())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},nC=t=>{let e=Ig(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},wg=()=>{var t;return(t=jl())===null||t===void 0?void 0:t.config},Eg=t=>{var e;return(e=jl())===null||e===void 0?void 0:e[`_${t}`]};var Ul=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function rC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[wa(JSON.stringify(n)),wa(JSON.stringify(s)),""].join(".")}function Te(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Te())}function ZF(){var t;let e=(t=jl())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oC(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function sC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aC(){let t=Te();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function cC(){return!ZF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Bl(){try{return typeof indexedDB=="object"}catch{return!1}}function uC(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var XF="FirebaseError",Rt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=XF,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ir.prototype.create)}},ir=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?eV(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Rt(i,a,r)}};function eV(t,e){return t.replace(tV,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var tV=/\{\$([^}]+)}/g;function lC(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ai(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(X0(o)&&X0(s)){if(!Ai(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function X0(t){return t!==null&&typeof t=="object"}function Ea(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function zo(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Wo(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function dC(t,e){let n=new vg(t,e);return n.subscribe.bind(n)}var vg=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");nV(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=gg),i.error===void 0&&(i.error=gg),i.complete===void 0&&(i.complete=gg);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function nV(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function gg(){}var k6=4*60*60*1e3;function mt(t){return t&&t._delegate?t._delegate:t}var Ht=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ri="[DEFAULT]";var Dg=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Ul;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(iV(e))try{this.getOrInitializeService({instanceIdentifier:Ri})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ri){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return f(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ri){return this.instances.has(e)}getOptions(e=Ri){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:rV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ri){return this.component?this.component.multipleInstances?e:Ri:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function rV(t){return t===Ri?void 0:t}function iV(t){return t.instantiationMode==="EAGER"}var $l=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Dg(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var oV=[],Z=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(Z||{}),sV={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},aV=Z.INFO,cV={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},uV=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=cV[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Vr=class{constructor(e){this.name=e,this._logLevel=aV,this._logHandler=uV,this._userLogHandler=null,oV.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Z))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...e),this._logHandler(this,Z.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...e),this._logHandler(this,Z.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...e),this._logHandler(this,Z.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...e),this._logHandler(this,Z.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...e),this._logHandler(this,Z.ERROR,...e)}};var lV=(t,e)=>e.some(n=>t instanceof n),hC,fC;function dV(){return hC||(hC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hV(){return fC||(fC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var pC=new WeakMap,bg=new WeakMap,mC=new WeakMap,Cg=new WeakMap,Sg=new WeakMap;function fV(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Sn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&pC.set(n,t)}).catch(()=>{}),Sg.set(e,t),e}function pV(t){if(bg.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});bg.set(t,e)}var Tg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return bg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||mC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Sn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function gC(t){Tg=t(Tg)}function mV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Hl(this),e,...n);return mC.set(r,e.sort?e.sort():[e]),Sn(r)}:hV().includes(t)?function(...e){return t.apply(Hl(this),e),Sn(pC.get(this))}:function(...e){return Sn(t.apply(Hl(this),e))}}function gV(t){return typeof t=="function"?mV(t):(t instanceof IDBTransaction&&pV(t),lV(t,dV())?new Proxy(t,Tg):t)}function Sn(t){if(t instanceof IDBRequest)return fV(t);if(Cg.has(t))return Cg.get(t);let e=gV(t);return e!==t&&(Cg.set(t,e),Sg.set(e,t)),e}var Hl=t=>Sg.get(t);function vC(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=Sn(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Sn(s.result),c.oldVersion,c.newVersion,Sn(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var yV=["get","getKey","getAll","getAllKeys","count"],vV=["put","add","delete","clear"],Ag=new Map;function yC(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ag.get(e))return Ag.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=vV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||yV.includes(n)))return;let o=function(s,...a){return f(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[n](...a),i&&c.done]))[0]})};return Ag.set(e,o),o}gC(t=>le(S({},t),{get:(e,n,r)=>yC(e,n)||t.get(e,n,r),has:(e,n)=>!!yC(e,n)||t.has(e,n)}));var Mg=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(_V(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function _V(t){let e=t.getComponent();return e?.type==="VERSION"}var xg="@firebase/app",_C="0.10.1";var Mi=new Vr("@firebase/app"),IV="@firebase/app-compat",wV="@firebase/analytics-compat",EV="@firebase/analytics",DV="@firebase/app-check-compat",CV="@firebase/app-check",bV="@firebase/auth",TV="@firebase/auth-compat",SV="@firebase/database",AV="@firebase/database-compat",RV="@firebase/functions",MV="@firebase/functions-compat",xV="@firebase/installations",NV="@firebase/installations-compat",PV="@firebase/messaging",OV="@firebase/messaging-compat",kV="@firebase/performance",FV="@firebase/performance-compat",VV="@firebase/remote-config",LV="@firebase/remote-config-compat",UV="@firebase/storage",jV="@firebase/storage-compat",BV="@firebase/firestore",$V="@firebase/firestore-compat",HV="firebase",qV="10.11.0";var Ng="[DEFAULT]",GV={[xg]:"fire-core",[IV]:"fire-core-compat",[EV]:"fire-analytics",[wV]:"fire-analytics-compat",[CV]:"fire-app-check",[DV]:"fire-app-check-compat",[bV]:"fire-auth",[TV]:"fire-auth-compat",[SV]:"fire-rtdb",[AV]:"fire-rtdb-compat",[RV]:"fire-fn",[MV]:"fire-fn-compat",[xV]:"fire-iid",[NV]:"fire-iid-compat",[PV]:"fire-fcm",[OV]:"fire-fcm-compat",[kV]:"fire-perf",[FV]:"fire-perf-compat",[VV]:"fire-rc",[LV]:"fire-rc-compat",[UV]:"fire-gcs",[jV]:"fire-gcs-compat",[BV]:"fire-fst",[$V]:"fire-fst-compat","fire-js":"fire-js",[HV]:"fire-js-all"};var Da=new Map,zV=new Map,Pg=new Map;function IC(t,e){try{t.container.addComponent(e)}catch(n){Mi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ur(t){let e=t.name;if(Pg.has(e))return Mi.debug(`There were multiple attempts to register component ${e}.`),!1;Pg.set(e,t);for(let n of Da.values())IC(n,t);for(let n of zV.values())IC(n,t);return!0}function ba(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function An(t){return t.settings!==void 0}var WV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Lr=new ir("app","Firebase",WV);var Og=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ht("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Lr.create("app-deleted",{appName:this._name})}};var jr=qV;function Vg(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Ng,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Lr.create("bad-app-name",{appName:String(i)});if(n||(n=wg()),!n)throw Lr.create("no-options");let o=Da.get(i);if(o){if(Ai(n,o.options)&&Ai(r,o.config))return o;throw Lr.create("duplicate-app",{appName:i})}let s=new $l(i);for(let c of Pg.values())s.addComponent(c);let a=new Og(n,r,s);return Da.set(i,a),a}function Ko(t=Ng){let e=Da.get(t);if(!e&&t===Ng&&wg())return Vg();if(!e)throw Lr.create("no-app",{appName:t});return e}function ql(){return Array.from(Da.values())}function et(t,e,n){var r;let i=(r=GV[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mi.warn(a.join(" "));return}Ur(new Ht(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var KV="firebase-heartbeat-database",QV=1,Ca="firebase-heartbeat-store",Rg=null;function CC(){return Rg||(Rg=vC(KV,QV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ca)}catch(n){console.warn(n)}}}}).catch(t=>{throw Lr.create("idb-open",{originalErrorMessage:t.message})})),Rg}function YV(t){return f(this,null,function*(){try{let n=(yield CC()).transaction(Ca),r=yield n.objectStore(Ca).get(bC(t));return yield n.done,r}catch(e){if(e instanceof Rt)Mi.warn(e.message);else{let n=Lr.create("idb-get",{originalErrorMessage:e?.message});Mi.warn(n.message)}}})}function wC(t,e){return f(this,null,function*(){try{let r=(yield CC()).transaction(Ca,"readwrite");yield r.objectStore(Ca).put(e,bC(t)),yield r.done}catch(n){if(n instanceof Rt)Mi.warn(n.message);else{let r=Lr.create("idb-set",{originalErrorMessage:n?.message});Mi.warn(r.message)}}})}function bC(t){return`${t.name}!${t.options.appId}`}var JV=1024,ZV=30*24*60*60*1e3,kg=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Fg(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return f(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=EC();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)))return this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{let a=new Date(s.date).valueOf();return Date.now()-a<=ZV}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return f(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=EC(),{heartbeatsToSend:r,unsentEntries:i}=XV(this._heartbeatsCache.heartbeats),o=wa(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o})}};function EC(){return new Date().toISOString().substring(0,10)}function XV(t,e=JV){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),DC(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),DC(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Fg=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return f(this,null,function*(){return Bl()?uC().then(()=>!0).catch(()=>!1):!1})}read(){return f(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield YV(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return f(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return wC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return f(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return wC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function DC(t){return wa(JSON.stringify({version:2,heartbeats:t})).length}function eL(t){Ur(new Ht("platform-logger",e=>new Mg(e),"PRIVATE")),Ur(new Ht("heartbeat",e=>new kg(e),"PRIVATE")),et(xg,_C,t),et(xg,_C,"esm2017"),et("fire-js","")}eL("");var tL="firebase",nL="10.11.0";et(tL,nL,"app");var Ta=new Qn("ANGULARFIRE2_VERSION");function TC(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Ug=(t,e)=>{let n=e?[e]:ql(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Gl=class{constructor(){return Ug(rL)}},rL="app-check";function Qo(){}var zl=class{zone;delegate;constructor(e,n=pf){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},Lg=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Qo,{},Qo,Qo)),n.pipe(Be({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Wl=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new zl(Zone.current)),this.insideAngular=n.run(()=>new zl(Zone.current,ff)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(W(_e))};static \u0275prov=N({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Kl(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function iL(t){return Kl().ngZone.runOutsideAngular(()=>t())}function xi(t){return Kl().ngZone.run(()=>t())}function oL(t){return sL(Kl())(t)}function sL(t){return function(n){return n=n.lift(new Lg(t.ngZone)),n.pipe(_r(t.outsideAngular),vr(t.insideAngular))}}var aL=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),xi(()=>t.apply(void 0,r))},Ql=(t,e)=>function(){let n,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(n||=xi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Qo,{},Qo,Qo))),r[o]=aL(r[o],n));let i=iL(()=>t.apply(this,r));if(!e)if(i instanceof ne){let o=Kl();return i.pipe(_r(o.outsideAngular),vr(o.insideAngular))}else return xi(()=>i);return i instanceof ne?i.pipe(oL):i instanceof Promise?xi(()=>new Promise((o,s)=>i.then(a=>xi(()=>o(a)),a=>xi(()=>s(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:xi(()=>i)};var Ni=class{constructor(e){return e}},Sa=class{constructor(){return ql()}};function cL(t){return t&&t.length===1?t[0]:new Ni(Ko())}var jg=new O("angularfire2._apps"),uL={provide:Ni,useFactory:cL,deps:[[new _n,jg]]},lL={provide:Sa,deps:[[new _n,jg]]};function dL(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Ni(r)}}var hL=(()=>{class t{constructor(n){et("angularfire",Ta.full,"core"),et("angularfire",Ta.full,"app"),et("angular",BD.full,n.toString())}static \u0275fac=function(r){return new(r||t)(W(Mr))};static \u0275mod=Lt({type:t});static \u0275inj=Vt({providers:[uL,lL]})}return t})();function SC(t,...e){return{ngModule:hL,providers:[{provide:jg,useFactory:dL(t),multi:!0,deps:[_e,En,Wl,...e]}]}}var AC=Ql(Vg,!0);function zC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var WC=zC,KC=new ir("auth","Firebase",zC());var td=new Vr("@firebase/auth");function fL(t,...e){td.logLevel<=Z.WARN&&td.warn(`Auth (${jr}): ${t}`,...e)}function Jl(t,...e){td.logLevel<=Z.ERROR&&td.error(`Auth (${jr}): ${t}`,...e)}function Mn(t,...e){throw cy(t,...e)}function Pi(t,...e){return cy(t,...e)}function QC(t,e,n){let r=Object.assign(Object.assign({},WC()),{[e]:n});return new ir("auth","Firebase",r).create(e,{appName:t.name})}function $r(t){return QC(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cy(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return KC.create(t,...e)}function k(t,e,...n){if(!t)throw cy(e,...n)}function or(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Jl(e),new Error(e)}function Hr(t,e){t||or(e)}function qg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function pL(){return RC()==="http:"||RC()==="https:"}function RC(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function mL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pL()||oC()||"connection"in navigator)?navigator.onLine:!0}function gL(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Oi=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Hr(n>e,"Short delay should be less than long delay!"),this.isMobile=iC()||sC()}get(){return mL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function uy(t,e){Hr(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var nd=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var yL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var vL=new Oi(3e4,6e4);function Fi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function qr(o,s,a,c){return f(this,arguments,function*(t,e,n,r,i={}){return YC(t,i,()=>f(this,null,function*(){let u={},l={};r&&(e==="GET"?l=r:u={body:JSON.stringify(r)});let d=Ea(Object.assign({key:t.config.apiKey},l)).slice(1),h=yield t._getAdditionalHeaders();return h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode),nd.fetch()(JC(t,t.config.apiHost,n,d),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},u))}))})}function YC(t,e,n){return f(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},yL),e);try{let i=new Gg(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Yl(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yl(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Yl(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw Yl(t,"user-disabled",s);let l=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw QC(t,l,u);Mn(t,l)}}catch(i){if(i instanceof Rt)throw i;Mn(t,"network-request-failed",{message:String(i)})}})}function hd(o,s,a,c){return f(this,arguments,function*(t,e,n,r,i={}){let u=yield qr(t,e,n,r,i);return"mfaPendingCredential"in u&&Mn(t,"multi-factor-auth-required",{_serverResponse:u}),u})}function JC(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?uy(t.config,i):`${t.config.apiScheme}://${i}`}function _L(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Gg=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Pi(this.auth,"network-request-failed")),vL.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Yl(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Pi(t,e,r);return i.customData._tokenResponse=n,i}function MC(t){return t!==void 0&&t.enterprise!==void 0}var zg=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return _L(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function IL(t,e){return f(this,null,function*(){return qr(t,"GET","/v2/recaptchaConfig",Fi(t,e))})}function wL(t,e){return f(this,null,function*(){return qr(t,"POST","/v1/accounts:delete",e)})}function ZC(t,e){return f(this,null,function*(){return qr(t,"POST","/v1/accounts:lookup",e)})}function Aa(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function ly(t,e=!1){return f(this,null,function*(){let n=mt(t),r=yield n.getIdToken(e),i=dy(r);k(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Aa(Bg(i.auth_time)),issuedAtTime:Aa(Bg(i.iat)),expirationTime:Aa(Bg(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Bg(t){return Number(t)*1e3}function dy(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Jl("JWT malformed, contained fewer than 3 sections"),null;try{let i=_g(n);return i?JSON.parse(i):(Jl("Failed to decode base64 JWT payload"),null)}catch(i){return Jl("Caught error parsing JWT payload as JSON",i?.toString()),null}}function xC(t){let e=dy(t);return k(e,"internal-error"),k(typeof e.exp<"u","internal-error"),k(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ma(t,e,n=!1){return f(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Rt&&EL(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function EL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Wg=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>f(this,null,function*(){yield this.iteration()}),n)}iteration(){return f(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var xa=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Aa(this.lastLoginAt),this.creationTime=Aa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function rd(t){return f(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Ma(t,ZC(n,{idToken:r}));k(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?XC(o.providerUserInfo):[],a=DL(t.providerData,s),c=t.isAnonymous,u=!(t.email&&o.passwordHash)&&!a?.length,l=c?u:!1,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new xa(o.createdAt,o.lastLoginAt),isAnonymous:l};Object.assign(t,d)})}function hy(t){return f(this,null,function*(){let e=mt(t);yield rd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function DL(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function XC(t){return t.map(e=>{var{providerId:n}=e,r=mf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function CL(t,e){return f(this,null,function*(){let n=yield YC(t,{},()=>f(this,null,function*(){let r=Ea({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=JC(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",nd.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function bL(t,e){return f(this,null,function*(){return qr(t,"POST","/v2/accounts:revokeToken",Fi(t,e))})}var Ra=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){k(e.idToken,"internal-error"),k(typeof e.idToken<"u","internal-error"),k(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):xC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){k(e.length!==0,"internal-error");let n=xC(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return f(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(k(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return f(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield CL(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(k(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(k(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(k(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return or("not implemented")}};function Br(t,e){k(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Yo=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=mf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Wg(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new xa(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return f(this,null,function*(){let n=yield Ma(this,this.stsTokenManager.getToken(this.auth,e));return k(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return ly(this,e)}reload(){return hy(this)}_assign(e){this!==e&&(k(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){k(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return f(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield rd(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return f(this,null,function*(){if(An(this.auth.app))return Promise.reject($r(this.auth));let e=yield this.getIdToken();return yield Ma(this,wL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,c,u,l;let d=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,p=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,g=(s=n.photoURL)!==null&&s!==void 0?s:void 0,I=(a=n.tenantId)!==null&&a!==void 0?a:void 0,w=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,A=(u=n.createdAt)!==null&&u!==void 0?u:void 0,te=(l=n.lastLoginAt)!==null&&l!==void 0?l:void 0,{uid:K,emailVerified:ve,isAnonymous:Ye,providerData:ue,stsTokenManager:rt}=n;k(K&&rt,e,"internal-error");let dn=Ra.fromJSON(this.name,rt);k(typeof K=="string",e,"internal-error"),Br(d,e.name),Br(h,e.name),k(typeof ve=="boolean",e,"internal-error"),k(typeof Ye=="boolean",e,"internal-error"),Br(p,e.name),Br(g,e.name),Br(I,e.name),Br(w,e.name),Br(A,e.name),Br(te,e.name);let ni=new t({uid:K,auth:e,email:h,emailVerified:ve,displayName:d,isAnonymous:Ye,photoURL:g,phoneNumber:p,tenantId:I,stsTokenManager:dn,createdAt:A,lastLoginAt:te});return ue&&Array.isArray(ue)&&(ni.providerData=ue.map(ro=>Object.assign({},ro))),w&&(ni._redirectEventId=w),ni}static _fromIdTokenResponse(e,n,r=!1){return f(this,null,function*(){let i=new Ra;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield rd(o),o})}static _fromGetAccountInfoResponse(e,n,r){return f(this,null,function*(){let i=n.users[0];k(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?XC(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Ra;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new xa(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,u),c})}};var NC=new Map;function sr(t){Hr(t instanceof Function,"Expected a class definition");let e=NC.get(t);return e?(Hr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,NC.set(t,e),e)}var TL=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return f(this,null,function*(){return!0})}_set(n,r){return f(this,null,function*(){this.storage[n]=r})}_get(n){return f(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return f(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Kg=TL;function Zl(t,e,n){return`firebase:${t}:${e}:${n}`}var id=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Zl(this.userKey,i.apiKey,o),this.fullPersistenceKey=Zl("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return f(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Yo._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return f(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return f(this,null,function*(){if(!n.length)return new t(sr(Kg),e,r);let i=(yield Promise.all(n.map(u=>f(this,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),o=i[0]||sr(Kg),s=Zl(r,e.config.apiKey,e.name),a=null;for(let u of n)try{let l=yield u._get(s);if(l){let d=Yo._fromJSON(e,l);u!==o&&(a=d),o=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new t(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(u=>f(this,null,function*(){if(u!==o)try{yield u._remove(s)}catch{}}))),new t(o,e,r))})}};function PC(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(nb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(eb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ib(e))return"Blackberry";if(ob(e))return"Webos";if(fy(e))return"Safari";if((e.includes("chrome/")||tb(e))&&!e.includes("edge/"))return"Chrome";if(rb(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function eb(t=Te()){return/firefox\//i.test(t)}function fy(t=Te()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tb(t=Te()){return/crios\//i.test(t)}function nb(t=Te()){return/iemobile/i.test(t)}function rb(t=Te()){return/android/i.test(t)}function ib(t=Te()){return/blackberry/i.test(t)}function ob(t=Te()){return/webos/i.test(t)}function fd(t=Te()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function SL(t=Te()){var e;return fd(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function AL(){return aC()&&document.documentMode===10}function sb(t=Te()){return fd(t)||rb(t)||ob(t)||ib(t)||/windows phone/i.test(t)||nb(t)}function RL(){try{return!!(window&&window!==window.top)}catch{return!1}}function ab(t,e=[]){let n;switch(t){case"Browser":n=PC(Te());break;case"Worker":n=`${PC(Te())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${jr}/${r}`}var Qg=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return f(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function ML(n){return f(this,arguments,function*(t,e={}){return qr(t,"GET","/v2/passwordPolicy",Fi(t,e))})}var xL=6,Yg=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:xL,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Jg=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new od(this),this.idTokenSubscription=new od(this),this.beforeStateQueue=new Qg(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=KC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=sr(n)),this._initializationPromise=this.queue(()=>f(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield id.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return f(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return f(this,null,function*(){try{let n=yield ZC(this,{idToken:e}),r=yield Yo._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return f(this,null,function*(){var n;if(An(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return k(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return f(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return f(this,null,function*(){try{yield rd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=gL()}_delete(){return f(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return f(this,null,function*(){if(An(this.app))return Promise.reject($r(this));let n=e?mt(e):null;return n&&k(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return f(this,null,function*(){if(!this._deleted)return e&&k(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>f(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return f(this,null,function*(){return An(this.app)?Promise.reject($r(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return An(this.app)?Promise.reject($r(this)):this.queue(()=>f(this,null,function*(){yield this.assertedPersistence.setPersistence(sr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return f(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return f(this,null,function*(){let e=yield ML(this),n=new Yg(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ir("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return f(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield bL(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return f(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return f(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&sr(e)||this._popupRedirectResolver;k(n,this,"argument-error"),this.redirectPersistenceManager=yield id.create(this,[sr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return f(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>f(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return f(this,null,function*(){if(e===this.currentUser)return this.queue(()=>f(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(k(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(n);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return f(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return k(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ab(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return f(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return f(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&fL(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Jo(t){return mt(t)}var od=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=dC(n=>this.observer=n)}get next(){return k(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var pd={loadJS(){return f(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function NL(t){pd=t}function cb(t){return pd.loadJS(t)}function PL(){return pd.recaptchaEnterpriseScript}function OL(){return pd.gapiScript}function ub(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var kL="recaptcha-enterprise",FL="NO_RECAPTCHA",Zg=class{constructor(e){this.type=kL,this.auth=Jo(e)}verify(e="verify",n=!1){return f(this,null,function*(){function r(o){return f(this,null,function*(){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>f(this,null,function*(){IL(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let u=new zg(c);return o.tenantId==null?o._agentRecaptchaConfig=u:o._tenantRecaptchaConfigs[o.tenantId]=u,s(u.siteKey)}}).catch(c=>{a(c)})}))})}function i(o,s,a){let c=window.grecaptcha;MC(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(u=>{s(u)}).catch(()=>{s(FL)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&MC(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=PL();c.length!==0&&(c+=a),cb(c).then(()=>{i(a,o,s)}).catch(u=>{s(u)})}}).catch(a=>{s(a)})})})}};function OC(t,e,n,r=!1){return f(this,null,function*(){let i=new Zg(t),o;try{o=yield i.verify(n)}catch{o=yield i.verify(n,!0)}let s=Object.assign({},e);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s})}function kC(t,e,n,r){return f(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=yield OC(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(o=>f(this,null,function*(){if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let s=yield OC(t,e,n,n==="getOobCode");return r(t,s)}else return Promise.reject(o)}))})}function py(t,e){let n=ba(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(Ai(o,e??{}))return i;Mn(i,"already-initialized")}return n.initialize({options:e})}function VL(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(sr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function my(t,e,n){let r=Jo(t);k(r._canInitEmulator,r,"emulator-config-failed"),k(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=lb(e),{host:s,port:a}=LL(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||UL()}function lb(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function LL(t){let e=lb(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:FC(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:FC(s)}}}function FC(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function UL(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Na=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return or("not implemented")}_getIdTokenResponse(e){return or("not implemented")}_linkToIdToken(e,n){return or("not implemented")}_getReauthenticationResolver(e){return or("not implemented")}};function jL(t,e){return f(this,null,function*(){return qr(t,"POST","/v1/accounts:signUp",e)})}function BL(t,e){return f(this,null,function*(){return hd(t,"POST","/v1/accounts:signInWithPassword",Fi(t,e))})}function $L(t,e){return f(this,null,function*(){return hd(t,"POST","/v1/accounts:signInWithEmailLink",Fi(t,e))})}function HL(t,e){return f(this,null,function*(){return hd(t,"POST","/v1/accounts:signInWithEmailLink",Fi(t,e))})}var Pa=class t extends Na{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return f(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kC(e,n,"signInWithPassword",BL);case"emailLink":return $L(e,{email:this._email,oobCode:this._password});default:Mn(e,"internal-error")}})}_linkToIdToken(e,n){return f(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kC(e,r,"signUpPassword",jL);case"emailLink":return HL(e,{idToken:n,email:this._email,oobCode:this._password});default:Mn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function $g(t,e){return f(this,null,function*(){return hd(t,"POST","/v1/accounts:signInWithIdp",Fi(t,e))})}function qL(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function GL(t){let e=zo(Wo(t)).link,n=e?zo(Wo(e)).deep_link_id:null,r=zo(Wo(t)).deep_link_id;return(r?zo(Wo(r)).link:null)||r||n||e||t}var sd=class t{constructor(e){var n,r,i,o,s,a;let c=zo(Wo(e)),u=(n=c.apiKey)!==null&&n!==void 0?n:null,l=(r=c.oobCode)!==null&&r!==void 0?r:null,d=qL((i=c.mode)!==null&&i!==void 0?i:null);k(u&&l&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=l,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=c.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=GL(e);try{return new t(n)}catch{return null}}};var db=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return Pa._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=sd.parseLink(r);return k(i,"argument-error"),Pa._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),ad=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Xg=class extends ad{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Oa=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return f(this,null,function*(){let o=yield Yo._fromIdTokenResponse(e,r,i),s=VC(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return f(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=VC(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function VC(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var ey=class t extends Rt{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function hb(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?ey._fromErrorAndOperation(t,o,e,r):o})}function zL(t,e,n=!1){return f(this,null,function*(){let r=yield Ma(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Oa._forOperation(t,"link",r)})}function WL(t,e,n=!1){return f(this,null,function*(){let{auth:r}=t;if(An(r.app))return Promise.reject($r(r));let i="reauthenticate";try{let o=yield Ma(t,hb(r,i,e,t),n);k(o.idToken,r,"internal-error");let s=dy(o.idToken);k(s,r,"internal-error");let{sub:a}=s;return k(t.uid===a,r,"user-mismatch"),Oa._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Mn(r,"user-mismatch"),o}})}function fb(t,e,n=!1){return f(this,null,function*(){if(An(t.app))return Promise.reject($r(t));let r="signIn",i=yield hb(t,r,e),o=yield Oa._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})}function gy(t,e){return f(this,null,function*(){return fb(Jo(t),e)})}function KL(t){return f(this,null,function*(){let e=Jo(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function md(t,e,n){return An(t.app)?Promise.reject($r(t)):gy(mt(t),db.credential(e,n)).catch(r=>f(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&KL(t),r}))}function yy(t,e,n,r){return mt(t).onIdTokenChanged(e,n,r)}function vy(t,e,n){return mt(t).beforeAuthStateChanged(e,n)}var cd="__sak";var ud=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(cd,"1"),this.storage.removeItem(cd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function QL(){let t=Te();return fy(t)||fd(t)}var YL=1e3,JL=10,ZL=(()=>{class t extends ud{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=QL()&&RL(),this.fallbackToPolling=sb(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}let i=n.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let a=this.storage.getItem(i);if(n.newValue!==a)n.newValue!==null?this.storage.setItem(i,n.newValue):this.storage.removeItem(i);else if(this.localCache[i]===n.newValue&&!r)return}let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);AL()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,JL):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},YL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return f(this,null,function*(){yield gr(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return f(this,null,function*(){let r=yield gr(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return f(this,null,function*(){yield gr(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),pb=ZL;var XL=(()=>{class t extends ud{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),_y=XL;function e2(t){return Promise.all(t.map(e=>f(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var t2=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return f(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(l=>f(this,null,function*(){return l(r.origin,s)})),u=yield e2(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:u})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function mb(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var ty=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return f(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let u=mb("",20);i.port1.start();let l=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(d){let h=d;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(l),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(h.data.response);break;default:clearTimeout(l),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Rn(){return window}function n2(t){Rn().location.href=t}function gb(){return typeof Rn().WorkerGlobalScope<"u"&&typeof Rn().importScripts=="function"}function r2(){return f(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function i2(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function o2(){return gb()?self:null}var yb="firebaseLocalStorageDb",s2=1,ld="firebaseLocalStorage",vb="fbase_key",ki=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function gd(t,e){return t.transaction([ld],e?"readwrite":"readonly").objectStore(ld)}function a2(){let t=indexedDB.deleteDatabase(yb);return new ki(t).toPromise()}function ny(){let t=indexedDB.open(yb,s2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(ld,{keyPath:vb})}catch(i){n(i)}}),t.addEventListener("success",()=>f(this,null,function*(){let r=t.result;r.objectStoreNames.contains(ld)?e(r):(r.close(),yield a2(),e(yield ny()))}))})}function LC(t,e,n){return f(this,null,function*(){let r=gd(t,!0).put({[vb]:e,value:n});return new ki(r).toPromise()})}function c2(t,e){return f(this,null,function*(){let n=gd(t,!1).get(e),r=yield new ki(n).toPromise();return r===void 0?null:r.value})}function UC(t,e){let n=gd(t,!0).delete(e);return new ki(n).toPromise()}var u2=800,l2=3,d2=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return f(this,null,function*(){return this.db?this.db:(this.db=yield ny(),this.db)})}_withRetries(n){return f(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>l2)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return f(this,null,function*(){return gb()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return f(this,null,function*(){this.receiver=t2._getInstance(o2()),this.receiver._subscribe("keyChanged",(n,r)=>f(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>f(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return f(this,null,function*(){var n,r;if(this.activeServiceWorker=yield r2(),!this.activeServiceWorker)return;this.sender=new ty(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return f(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||i2()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return f(this,null,function*(){try{if(!indexedDB)return!1;let n=yield ny();return yield LC(n,cd,"1"),yield UC(n,cd),!0}catch{}return!1})}_withPendingWrite(n){return f(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return f(this,null,function*(){return this._withPendingWrite(()=>f(this,null,function*(){return yield this._withRetries(i=>LC(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return f(this,null,function*(){let r=yield this._withRetries(i=>c2(i,n));return this.localCache[n]=r,r})}_remove(n){return f(this,null,function*(){return this._withPendingWrite(()=>f(this,null,function*(){return yield this._withRetries(r=>UC(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return f(this,null,function*(){let n=yield this._withRetries(o=>{let s=gd(o,!1).getAll();return new ki(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>f(this,null,function*(){return this._poll()}),u2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),_b=d2;var T5=ub("rcb"),S5=new Oi(3e4,6e4);function h2(t,e){return e?sr(e):(k(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var ka=class extends Na{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $g(e,this._buildIdpRequest())}_linkToIdToken(e,n){return $g(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return $g(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function f2(t){return fb(t.auth,new ka(t),t.bypassAuthState)}function p2(t){let{auth:e,user:n}=t;return k(n,e,"internal-error"),WL(n,new ka(t),t.bypassAuthState)}function m2(t){return f(this,null,function*(){let{auth:e,user:n}=t;return k(n,e,"internal-error"),zL(n,new ka(t),t.bypassAuthState)})}var ry=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>f(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return f(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return f2;case"linkViaPopup":case"linkViaRedirect":return m2;case"reauthViaPopup":case"reauthViaRedirect":return p2;default:Mn(this.auth,"internal-error")}}resolve(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var A5=new Oi(2e3,1e4);var g2="pendingRedirect",Xl=new Map,iy=class t extends ry{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return f(this,null,function*(){let e=Xl.get(this.auth._key());if(!e){try{let r=(yield y2(this.resolver,this.auth))?yield gr(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Xl.set(this.auth._key(),e)}return this.bypassAuthState||Xl.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return f(this,null,function*(){if(e.type==="signInViaRedirect")return gr(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,gr(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return f(this,null,function*(){})}cleanUp(){}};function y2(t,e){return f(this,null,function*(){let n=I2(e),r=_2(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function v2(t,e){Xl.set(t._key(),e)}function _2(t){return sr(t._redirectPersistence)}function I2(t){return Zl(g2,t.config.apiKey,t.name)}function w2(t,e,n=!1){return f(this,null,function*(){if(An(t.app))return Promise.reject($r(t));let r=Jo(t),i=h2(r,e),s=yield new iy(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var E2=10*60*1e3,oy=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!D2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Ib(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Pi(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=E2&&this.cachedEventUids.clear(),this.cachedEventUids.has(jC(e))}saveEventToCache(e){this.cachedEventUids.add(jC(e)),this.lastProcessedEventTime=Date.now()}};function jC(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Ib({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function D2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ib(t);default:return!1}}function C2(n){return f(this,arguments,function*(t,e={}){return qr(t,"GET","/v1/projects",e)})}var b2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,T2=/^https?/;function S2(t){return f(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield C2(t);for(let n of e)try{if(A2(n))return}catch{}Mn(t,"unauthorized-domain")})}function A2(t){let e=qg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!T2.test(n))return!1;if(b2.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var R2=new Oi(3e4,6e4);function BC(){let t=Rn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function M2(t){return new Promise((e,n)=>{var r,i,o;function s(){BC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{BC(),n(Pi(t,"network-request-failed"))},timeout:R2.get()})}if(!((i=(r=Rn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Rn().gapi)===null||o===void 0)&&o.load)s();else{let a=ub("iframefcb");return Rn()[a]=()=>{gapi.load?s():n(Pi(t,"network-request-failed"))},cb(`${OL()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw ed=null,e})}var ed=null;function x2(t){return ed=ed||M2(t),ed}var N2=new Oi(5e3,15e3),P2="__/auth/iframe",O2="emulator/auth/iframe",k2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},F2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function V2(t){let e=t.config;k(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?uy(e,O2):`https://${t.config.authDomain}/${P2}`,r={apiKey:e.apiKey,appName:t.name,v:jr},i=F2.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Ea(r).slice(1)}`}function L2(t){return f(this,null,function*(){let e=yield x2(t),n=Rn().gapi;return k(n,t,"internal-error"),e.open({where:document.body,url:V2(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:k2,dontclear:!0},r=>new Promise((i,o)=>f(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Pi(t,"network-request-failed"),a=Rn().setTimeout(()=>{o(s)},N2.get());function c(){Rn().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var U2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},j2=500,B2=600,$2="_blank",H2="http://localhost",dd=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function q2(t,e,n,r=j2,i=B2){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},U2),{width:r.toString(),height:i.toString(),top:o,left:s}),u=Te().toLowerCase();n&&(a=tb(u)?$2:n),eb(u)&&(e=e||H2,c.scrollbars="yes");let l=Object.entries(c).reduce((h,[p,g])=>`${h}${p}=${g},`,"");if(SL(u)&&a!=="_self")return G2(e||"",a),new dd(null);let d=window.open(e||"",a,l);k(d,t,"popup-blocked");try{d.focus()}catch{}return new dd(d)}function G2(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var z2="__/auth/handler",W2="emulator/auth/handler",K2=encodeURIComponent("fac");function $C(t,e,n,r,i,o){return f(this,null,function*(){k(t.config.authDomain,t,"auth-domain-config-required"),k(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:jr,eventId:i};if(e instanceof ad){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",lC(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[l,d]of Object.entries(o||{}))s[l]=d}if(e instanceof Xg){let l=e.getScopes().filter(d=>d!=="");l.length>0&&(s.scopes=l.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let l of Object.keys(a))a[l]===void 0&&delete a[l];let c=yield t._getAppCheckToken(),u=c?`#${K2}=${encodeURIComponent(c)}`:"";return`${Q2(t)}?${Ea(a).slice(1)}${u}`})}function Q2({config:t}){return t.emulator?uy(t,W2):`https://${t.authDomain}/${z2}`}var Hg="webStorageSupport",sy=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_y,this._completeRedirectFn=w2,this._overrideRedirectResult=v2}_openPopup(e,n,r,i){return f(this,null,function*(){var o;Hr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield $C(e,n,r,qg(),i);return q2(e,s,mb())})}_openRedirect(e,n,r,i){return f(this,null,function*(){yield this._originValidation(e);let o=yield $C(e,n,r,qg(),i);return n2(o),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Hr(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return f(this,null,function*(){let n=yield L2(e),r=new oy(e);return n.register("authEvent",i=>(k(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Hg,{type:Hg},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[Hg];s!==void 0&&n(!!s),Mn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=S2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return sb()||fy()||fd()}},wb=sy;var HC="@firebase/auth",qC="1.7.1";var ay=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return f(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){k(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Y2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function J2(t){Ur(new Ht("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;k(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ab(t)},u=new Jg(r,i,o,c);return VL(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ur(new Ht("auth-internal",e=>{let n=Jo(e.getProvider("auth").getImmediate());return(r=>new ay(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),et(HC,qC,Y2(t)),et(HC,qC,"esm2017")}var Z2=5*60,X2=Eg("authIdTokenMaxAge")||Z2,GC=null,eU=t=>e=>f(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>X2)return;let i=n?.token;GC!==i&&(GC=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Iy(t=Ko()){let e=ba(t,"auth");if(e.isInitialized())return e.getImmediate();let n=py(t,{popupRedirectResolver:wb,persistence:[_b,pb,_y]}),r=Eg("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=eU(o.toString());vy(n,s,()=>s(n.currentUser)),yy(n,a=>s(a))}}let i=Ig("auth");return i&&my(n,`http://${i}`),n}function tU(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}NL({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=Pi("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",tU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});J2("Browser");var Eb="auth",rn=class{constructor(e){return e}},wy=class{constructor(){return Ug(Eb)}};var Ey=new O("angularfire2.auth-instances");function WU(t,e){let n=TC(Eb,t,e);return n&&new rn(n)}function KU(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new rn(r)}}var QU={provide:wy,deps:[[new _n,Ey]]},YU={provide:rn,useFactory:WU,deps:[[new _n,Ey],Ni]},JU=(()=>{class t{constructor(){et("angularfire",Ta.full,"auth")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Lt({type:t});static \u0275inj=Vt({providers:[YU,QU]})}return t})();function Db(t,...e){return{ngModule:JU,providers:[{provide:Ey,useFactory:KU(t),multi:!0,deps:[_e,En,Wl,Sa,[new _n,Gl],...e]}]}}var Cb=Ql(Iy,!0);var ZU={apiKey:"AIzaSyCP29nVcnjbsOXNeSXVZgRlVjhCJNCcYgY",authDomain:"essos-13593.firebaseapp.com",projectId:"essos-13593",storageBucket:"essos-13593.appspot.com",messagingSenderId:"234509148552",appId:"1:234509148552:web:19e5316606e6a5eaeb1a3d"},bb={providers:[J0(Z0),Mp([SC(()=>AC(ZU)),Db(()=>Cb())])]};var Ob=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(M(xr),M(Zn))},e.\u0275dir=xe({type:e});let t=e;return t})(),bd=(()=>{let e=class e extends Ob{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Rr(e)))(o||e)}})(),e.\u0275dir=xe({type:e,features:[bt]});let t=e;return t})(),Xo=new O("");var XU={provide:Xo,useExisting:Zt(()=>Wr),multi:!0};function ej(){let t=rr()?rr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var tj=new O(""),Wr=(()=>{let e=class e extends Ob{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!ej())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(M(xr),M(Zn),M(tj,8))},e.\u0275dir=xe({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&he("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[er([XU]),bt]});let t=e;return t})();function Gr(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function kb(t){return t!=null&&typeof t.length=="number"}var Td=new O(""),Sd=new O(""),nj=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,zr=class{static min(e){return rj(e)}static max(e){return ij(e)}static required(e){return oj(e)}static requiredTrue(e){return sj(e)}static email(e){return aj(e)}static minLength(e){return cj(e)}static maxLength(e){return uj(e)}static pattern(e){return lj(e)}static nullValidator(e){return Fb(e)}static compose(e){return $b(e)}static composeAsync(e){return Hb(e)}};function rj(t){return e=>{if(Gr(e.value)||Gr(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function ij(t){return e=>{if(Gr(e.value)||Gr(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function oj(t){return Gr(t.value)?{required:!0}:null}function sj(t){return t.value===!0?null:{required:!0}}function aj(t){return Gr(t.value)||nj.test(t.value)?null:{email:!0}}function cj(t){return e=>Gr(e.value)||!kb(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function uj(t){return e=>kb(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function lj(t){if(!t)return Fb;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(Gr(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function Fb(t){return null}function Vb(t){return t!=null}function Lb(t){return wi(t)?De(t):t}function Ub(t){let e={};return t.forEach(n=>{e=n!=null?S(S({},e),n):e}),Object.keys(e).length===0?null:e}function jb(t,e){return e.map(n=>n(t))}function dj(t){return!t.validate}function Bb(t){return t.map(e=>dj(e)?e:n=>e.validate(n))}function $b(t){if(!t)return null;let e=t.filter(Vb);return e.length==0?null:function(n){return Ub(jb(n,e))}}function Cy(t){return t!=null?$b(Bb(t)):null}function Hb(t){if(!t)return null;let e=t.filter(Vb);return e.length==0?null:function(n){let r=jb(n,e).map(Lb);return vf(r).pipe(Y(Ub))}}function by(t){return t!=null?Hb(Bb(t)):null}function Tb(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function qb(t){return t._rawValidators}function Gb(t){return t._rawAsyncValidators}function Dy(t){return t?Array.isArray(t)?t:[t]:[]}function vd(t,e){return Array.isArray(t)?t.includes(e):t===e}function Sb(t,e){let n=Dy(e);return Dy(t).forEach(i=>{vd(n,i)||n.push(i)}),n}function Ab(t,e){return Dy(e).filter(n=>!vd(t,n))}var _d=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Cy(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=by(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},ar=class extends _d{get formDirective(){return null}get path(){return null}},Vi=class extends _d{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Id=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},hj={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},O8=le(S({},hj),{"[class.ng-submitted]":"isSubmitted"}),xn=(()=>{let e=class e extends Id{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(M(Vi,2))},e.\u0275dir=xe({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&Xu("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[bt]});let t=e;return t})(),Nn=(()=>{let e=class e extends Id{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(M(ar,10))},e.\u0275dir=xe({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){i&2&&Xu("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[bt]});let t=e;return t})();var Fa="VALID",yd="INVALID",Zo="PENDING",Va="DISABLED";function zb(t){return(Ad(t)?t.validators:t)||null}function fj(t){return Array.isArray(t)?Cy(t):t||null}function Wb(t,e){return(Ad(e)?e.asyncValidators:t)||null}function pj(t){return Array.isArray(t)?by(t):t||null}function Ad(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function mj(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new R(1e3,"");if(!r[n])throw new R(1001,"")}function gj(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new R(1002,"")})}var wd=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Fa}get invalid(){return this.status===yd}get pending(){return this.status==Zo}get disabled(){return this.status===Va}get enabled(){return this.status!==Va}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Sb(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Sb(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Ab(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Ab(e,this._rawAsyncValidators))}hasValidator(e){return vd(this._rawValidators,e)}hasAsyncValidator(e){return vd(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Zo,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Va,this.errors=null,this._forEachChild(r=>{r.disable(le(S({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(le(S({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Fa,this._forEachChild(r=>{r.enable(le(S({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(le(S({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Fa||this.status===Zo)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Va:Fa}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Zo,this._hasOwnPendingAsyncValidator=!0;let n=Lb(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new $e,this.statusChanges=new $e}_calculateStatus(){return this._allControlsDisabled()?Va:this.errors?yd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Zo)?Zo:this._anyControlsHaveStatus(yd)?yd:Fa}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ad(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=fj(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=pj(this._rawAsyncValidators)}},wt=class extends wd{constructor(e,n,r){super(zb(n),Wb(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){gj(this,!0,e),Object.keys(e).forEach(r=>{mj(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Ua=new O("CallSetDisabledState",{providedIn:"root",factory:()=>Rd}),Rd="always";function Kb(t,e){return[...e.path,t]}function Ed(t,e,n=Rd){Ty(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),vj(t,e),Ij(t,e),_j(t,e),yj(t,e)}function Rb(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Cd(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Dd(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function yj(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function Ty(t,e){let n=qb(t);e.validator!==null?t.setValidators(Tb(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=Gb(t);e.asyncValidator!==null?t.setAsyncValidators(Tb(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();Dd(e._rawValidators,i),Dd(e._rawAsyncValidators,i)}function Cd(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=qb(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(n=!0,t.setValidators(o))}}if(e.asyncValidator!==null){let i=Gb(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(n=!0,t.setAsyncValidators(o))}}}let r=()=>{};return Dd(e._rawValidators,r),Dd(e._rawAsyncValidators,r),n}function vj(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&Qb(t,e)})}function _j(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&Qb(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function Qb(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Ij(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function Yb(t,e){t==null,Ty(t,e)}function wj(t,e){return Cd(t,e)}function Jb(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function Ej(t){return Object.getPrototypeOf(t.constructor)===bd}function Zb(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Xb(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===Wr?n=o:Ej(o)?r=o:i=o}),i||r||n||null}function Dj(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var Cj={provide:ar,useExisting:Zt(()=>Sy)},La=Promise.resolve(),Sy=(()=>{let e=class e extends ar{constructor(r,i,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new $e,this.form=new wt({},Cy(r),by(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){La.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),Ed(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){La.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){La.then(()=>{let i=this._findContainer(r.path),o=new wt({});Yb(o,r),i.registerControl(r.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){La.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){La.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,Zb(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(M(Td,10),M(Sd,10),M(Ua,8))},e.\u0275dir=xe({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,o){i&1&&he("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{options:[Ze.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[er([Cj]),bt]});let t=e;return t})();function Mb(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function xb(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Ce=class extends wd{constructor(e=null,n,r){super(zb(n),Wb(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ad(n)&&(n.nonNullable||n.initialValueIsDefault)&&(xb(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Mb(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Mb(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){xb(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var bj=t=>t instanceof Ce;var Tj={provide:Vi,useExisting:Zt(()=>Ay)},Nb=Promise.resolve(),Ay=(()=>{let e=class e extends Vi{constructor(r,i,o,s,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new Ce,this._registered=!1,this.name="",this.update=new $e,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=Xb(this,s)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),Jb(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Ed(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){Nb.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,o=i!==0&&il(i);Nb.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?Kb(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(M(ar,9),M(Td,10),M(Sd,10),M(Xo,10),M(Ei,8),M(Ua,8))},e.\u0275dir=xe({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Ze.None,"disabled","isDisabled"],model:[Ze.None,"ngModel","model"],options:[Ze.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[er([Tj]),bt,Sr]});let t=e;return t})(),Pn=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=xe({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})(),Sj={provide:Xo,useExisting:Zt(()=>Ry),multi:!0},Ry=(()=>{let e=class e extends bd{writeValue(r){let i=r??"";this.setProperty("value",i)}registerOnChange(r){this.onChange=i=>{r(i==""?null:parseFloat(i))}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Rr(e)))(o||e)}})(),e.\u0275dir=xe({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,o){i&1&&he("input",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},features:[er([Sj]),bt]});let t=e;return t})();var eT=new O("");var Aj={provide:ar,useExisting:Zt(()=>cr)},cr=(()=>{let e=class e extends ar{constructor(r,i,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new $e,this._setValidators(r),this._setAsyncValidators(i)}ngOnChanges(r){this._checkFormPresent(),r.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Cd(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(r){let i=this.form.get(r.path);return Ed(i,r,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(r),i}getControl(r){return this.form.get(r.path)}removeControl(r){Rb(r.control||null,r,!1),Dj(this.directives,r)}addFormGroup(r){this._setUpFormContainer(r)}removeFormGroup(r){this._cleanUpFormContainer(r)}getFormGroup(r){return this.form.get(r.path)}addFormArray(r){this._setUpFormContainer(r)}removeFormArray(r){this._cleanUpFormContainer(r)}getFormArray(r){return this.form.get(r.path)}updateModel(r,i){this.form.get(r.path).setValue(i)}onSubmit(r){return this.submitted=!0,Zb(this.form,this.directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_updateDomValue(){this.directives.forEach(r=>{let i=r.control,o=this.form.get(r.path);i!==o&&(Rb(i||null,r),bj(o)&&(Ed(o,r,this.callSetDisabledState),r.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(r){let i=this.form.get(r.path);Yb(i,r),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(r){if(this.form){let i=this.form.get(r.path);i&&wj(i,r)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ty(this.form,this),this._oldForm&&Cd(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(i){return new(i||e)(M(Td,10),M(Sd,10),M(Ua,8))},e.\u0275dir=xe({type:e,selectors:[["","formGroup",""]],hostBindings:function(i,o){i&1&&he("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{form:[Ze.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[er([Aj]),bt,Sr]});let t=e;return t})();var Rj={provide:Vi,useExisting:Zt(()=>ur)},ur=(()=>{let e=class e extends Vi{set isDisabled(r){}constructor(r,i,o,s,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new $e,this._ngModelWarningSent=!1,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=Xb(this,s)}ngOnChanges(r){this._added||this._setUpControl(),Jb(r,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}get path(){return Kb(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)(M(ar,13),M(Td,10),M(Sd,10),M(Xo,10),M(eT,8))},e.\u0275dir=xe({type:e,selectors:[["","formControlName",""]],inputs:{name:[Ze.None,"formControlName","name"],isDisabled:[Ze.None,"disabled","isDisabled"],model:[Ze.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[er([Rj]),bt,Sr]});let t=e;return t})(),Mj={provide:Xo,useExisting:Zt(()=>Kr),multi:!0};function tT(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function xj(t){return t.split(":")[0]}var Kr=(()=>{let e=class e extends bd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i=this._getOptionId(r),o=tT(i,r);this.setProperty("value",o)}registerOnChange(r){this.onChange=i=>{this.value=this._getOptionValue(i),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),r))return i;return null}_getOptionValue(r){let i=xj(r);return this._optionMap.has(i)?this._optionMap.get(i):r}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Rr(e)))(o||e)}})(),e.\u0275dir=xe({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,o){i&1&&he("change",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[er([Mj]),bt]});let t=e;return t})(),es=(()=>{let e=class e{constructor(r,i,o){this._element=r,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(r){this._select!=null&&(this._select._optionMap.set(this.id,r),this._setElementValue(tT(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._setElementValue(r),this._select&&this._select.writeValue(this._select.value)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(M(Zn),M(xr),M(Kr,9))},e.\u0275dir=xe({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})(),Nj={provide:Xo,useExisting:Zt(()=>nT),multi:!0};function Pb(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function Pj(t){return t.split(":")[0]}var nT=(()=>{let e=class e extends bd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i;if(Array.isArray(r)){let o=r.map(s=>this._getOptionId(s));i=(s,a)=>{s._setSelected(o.indexOf(a.toString())>-1)}}else i=(o,s)=>{o._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(r){this.onChange=i=>{let o=[],s=i.selectedOptions;if(s!==void 0){let a=s;for(let c=0;c<a.length;c++){let u=a[c],l=this._getOptionValue(u.value);o.push(l)}}else{let a=i.options;for(let c=0;c<a.length;c++){let u=a[c];if(u.selected){let l=this._getOptionValue(u.value);o.push(l)}}}this.value=o,r(o)}}_registerOption(r){let i=(this._idCounter++).toString();return this._optionMap.set(i,r),i}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,r))return i;return null}_getOptionValue(r){let i=Pj(r);return this._optionMap.has(i)?this._optionMap.get(i)._value:r}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Rr(e)))(o||e)}})(),e.\u0275dir=xe({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,o){i&1&&he("change",function(a){return o.onChange(a.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[er([Nj]),bt]});let t=e;return t})(),ts=(()=>{let e=class e{constructor(r,i,o){this._element=r,this._renderer=i,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(r){this._select!=null&&(this._value=r,this._setElementValue(Pb(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._select?(this._value=r,this._setElementValue(Pb(this.id,r)),this._select.writeValue(this._select.value)):this._setElementValue(r)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}_setSelected(r){this._renderer.setProperty(this._element.nativeElement,"selected",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(M(Zn),M(xr),M(nT,9))},e.\u0275dir=xe({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})();var rT=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Lt({type:e}),e.\u0275inj=Vt({});let t=e;return t})();var iT=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:Ua,useValue:r.callSetDisabledState??Rd}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Lt({type:e}),e.\u0275inj=Vt({imports:[rT]});let t=e;return t})(),Qr=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:eT,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:Ua,useValue:r.callSetDisabledState??Rd}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Lt({type:e}),e.\u0275inj=Vt({imports:[rT]});let t=e;return t})();var oT=(()=>{let e=class e{constructor(){this.loginForm=new wt({email:new Ce("",zr.required),password:new Ce("",zr.required)}),this.firebaseAuth=E(rn),this.router=E(Ll)}onSubmit(){console.log(this.loginForm.value);let r=this.loginForm.getRawValue();this.login(r.email,r.password).subscribe({next:()=>{this.router.navigateByUrl("/")},error:i=>{console.log(i)}})}login(r,i){let o=md(this.firebaseAuth,r,i).then(()=>{});return De(o)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=He({type:e,selectors:[["app-login"]],standalone:!0,features:[Ge],decls:11,vars:1,consts:[[3,"ngSubmit","formGroup"],["for","email"],["id","email","type","email","formControlName","email"],["for","password"],["id","password","type","password","formControlName","password"],["type","submit"]],template:function(i,o){i&1&&(_(0,"form",0),he("ngSubmit",function(){return o.onSubmit()}),_(1,"p"),D(2,"login"),v(),_(3,"label",1),D(4,"email"),v(),j(5,"input",2),_(6,"label",3),D(7,"password"),v(),j(8,"input",4),_(9,"button",5),D(10,"Submit"),v()()),i&2&&ee("formGroup",o.loginForm)},dependencies:[Qr,Pn,Wr,xn,Nn,cr,ur]});let t=e;return t})();var Oj=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},sn={},C,Jy=Jy||{},L=Oj||self;function Hd(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function ec(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function kj(t){return Object.prototype.hasOwnProperty.call(t,My)&&t[My]||(t[My]=++Fj)}var My="closure_uid_"+(1e9*Math.random()>>>0),Fj=0;function Vj(t,e,n){return t.call.apply(t.bind,arguments)}function Lj(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function at(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?at=Vj:at=Lj,at.apply(null,arguments)}function Md(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Ke(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[i].apply(r,s)}}function Yr(){this.s=this.s,this.o=this.o}var Uj=0;Yr.prototype.s=!1;Yr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),Uj!=0)&&kj(this)};Yr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var vT=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Zy(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function sT(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(Hd(r)){let i=t.length||0,o=r.length||0;t.length=i+o;for(let s=0;s<o;s++)t[i+s]=r[s]}else t.push(r)}}function ct(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}ct.prototype.h=function(){this.defaultPrevented=!0};var jj=function(){if(!L.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};L.addEventListener("test",n,e),L.removeEventListener("test",n,e)}catch{}return t}();function za(t){return/^[\s\xa0]*$/.test(t)}function qd(){var t=L.navigator;return t&&(t=t.userAgent)?t:""}function On(t){return qd().indexOf(t)!=-1}function Xy(t){return Xy[" "](t),t}Xy[" "]=function(){};function Bj(t,e){var n=RB;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var $j=On("Opera"),os=On("Trident")||On("MSIE"),_T=On("Edge"),ky=_T||os,IT=On("Gecko")&&!(qd().toLowerCase().indexOf("webkit")!=-1&&!On("Edge"))&&!(On("Trident")||On("MSIE"))&&!On("Edge"),Hj=qd().toLowerCase().indexOf("webkit")!=-1&&!On("Edge");function wT(){var t=L.document;return t?t.documentMode:void 0}var Fy;e:{if(xd="",Nd=function(){var t=qd();if(IT)return/rv:([^\);]+)(\)|;)/.exec(t);if(_T)return/Edge\/([\d\.]+)/.exec(t);if(os)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(Hj)return/WebKit\/(\S+)/.exec(t);if($j)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),Nd&&(xd=Nd?Nd[1]:""),os&&(Pd=wT(),Pd!=null&&Pd>parseFloat(xd))){Fy=String(Pd);break e}Fy=xd}var xd,Nd,Pd,Vy;L.document&&os?(xy=wT(),Vy=xy||parseInt(Fy,10)||void 0):Vy=void 0;var xy,qj=Vy;function Wa(t,e){if(ct.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(IT){e:{try{Xy(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:Gj[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Wa.$.h.call(this)}}Ke(Wa,ct);var Gj={2:"touch",3:"pen",4:"mouse"};Wa.prototype.h=function(){Wa.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var tc="closure_listenable_"+(1e6*Math.random()|0),zj=0;function Wj(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++zj,this.fa=this.ia=!1}function Gd(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function ev(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function Kj(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function ET(t){let e={};for(let n in t)e[n]=t[n];return e}var aT="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function DT(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let o=0;o<aT.length;o++)n=aT[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function zd(t){this.src=t,this.g={},this.h=0}zd.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var s=Uy(t,e,r,i);return-1<s?(e=t[s],n||(e.ia=!1)):(e=new Wj(e,this.src,o,!!r,i),e.ia=n,t.push(e)),e};function Ly(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=vT(r,e),o;(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(Gd(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Uy(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==r)return i}return-1}var tv="closure_lm_"+(1e6*Math.random()|0),Ny={};function CT(t,e,n,r,i){if(r&&r.once)return TT(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)CT(t,e[o],n,r,i);return null}return n=iv(n),t&&t[tc]?t.O(e,n,ec(r)?!!r.capture:!!r,i):bT(t,e,n,!1,r,i)}function bT(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=ec(i)?!!i.capture:!!i,a=rv(t);if(a||(t[tv]=a=new zd(t)),n=a.add(e,n,r,s,o),n.proxy)return n;if(r=Qj(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)jj||(i=s),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(AT(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function Qj(){function t(n){return e.call(t.src,t.listener,n)}let e=Yj;return t}function TT(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)TT(t,e[o],n,r,i);return null}return n=iv(n),t&&t[tc]?t.P(e,n,ec(r)?!!r.capture:!!r,i):bT(t,e,n,!0,r,i)}function ST(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)ST(t,e[o],n,r,i);else r=ec(r)?!!r.capture:!!r,n=iv(n),t&&t[tc]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],n=Uy(o,n,r,i),-1<n&&(Gd(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=rv(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Uy(e,n,r,i)),(n=-1<t?e[t]:null)&&nv(n))}function nv(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[tc])Ly(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(AT(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=rv(e))?(Ly(n,t),n.h==0&&(n.src=null,e[tv]=null)):Gd(t)}}}function AT(t){return t in Ny?Ny[t]:Ny[t]="on"+t}function Yj(t,e){if(t.fa)t=!0;else{e=new Wa(e,this);var n=t.listener,r=t.la||t.src;t.ia&&nv(t),t=n.call(r,e)}return t}function rv(t){return t=t[tv],t instanceof zd?t:null}var Py="__closure_events_fn_"+(1e9*Math.random()>>>0);function iv(t){return typeof t=="function"?t:(t[Py]||(t[Py]=function(e){return t.handleEvent(e)}),t[Py])}function We(){Yr.call(this),this.i=new zd(this),this.S=this,this.J=null}Ke(We,Yr);We.prototype[tc]=!0;We.prototype.removeEventListener=function(t,e,n,r){ST(this,t,e,n,r)};function nt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new ct(e,t);else if(e instanceof ct)e.target=e.target||t;else{var i=e;e=new ct(r,t),DT(e,i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=Od(s,r,!0,e)&&i}if(s=e.g=t,i=Od(s,r,!0,e)&&i,i=Od(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)s=e.g=n[o],i=Od(s,r,!1,e)&&i}We.prototype.N=function(){if(We.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Gd(n[r]);delete t.g[e],t.h--}}this.J=null};We.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};We.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Od(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,c=s.la||s.src;s.ia&&Ly(t.i,s),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var ov=L.JSON.stringify,jy=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function Jj(){var t=sv;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var By=class{constructor(){this.h=this.g=null}add(e,n){let r=RT.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},RT=new jy(()=>new $y,t=>t.reset()),$y=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function Zj(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function Xj(t){L.setTimeout(()=>{throw t},0)}var Ka,Qa=!1,sv=new By,MT=()=>{let t=L.Promise.resolve(void 0);Ka=()=>{t.then(eB)}},eB=()=>{for(var t;t=Jj();){try{t.h.call(t.g)}catch(n){Xj(n)}var e=RT;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Qa=!1};function Wd(t,e){We.call(this),this.h=t||1,this.g=e||L,this.j=at(this.qb,this),this.l=Date.now()}Ke(Wd,We);C=Wd.prototype;C.ga=!1;C.T=null;C.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),nt(this,"tick"),this.ga&&(av(this),this.start()))}};C.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function av(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}C.N=function(){Wd.$.N.call(this),av(this),delete this.g};function cv(t,e,n){if(typeof t=="function")n&&(t=at(t,n));else if(t&&typeof t.handleEvent=="function")t=at(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:L.setTimeout(t,e||0)}function xT(t){t.g=cv(()=>{t.g=null,t.i&&(t.i=!1,xT(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var Hy=class extends Yr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:xT(this)}N(){super.N(),this.g&&(L.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function Ya(t){Yr.call(this),this.h=t,this.g={}}Ke(Ya,Yr);var cT=[];function NT(t,e,n,r){Array.isArray(n)||(n&&(cT[0]=n.toString()),n=cT);for(var i=0;i<n.length;i++){var o=CT(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function PT(t){ev(t.g,function(e,n){this.g.hasOwnProperty(n)&&nv(e)},t),t.g={}}Ya.prototype.N=function(){Ya.$.N.call(this),PT(this)};Ya.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Kd(){this.g=!0}Kd.prototype.Ea=function(){this.g=!1};function tB(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var d=l.split("_");s=2<=d.length&&d[1]=="type"?s+(l+"="+u+"&"):s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+s})}function nB(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+o+" "+s})}function rs(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+iB(t,n)+(r?" "+r:"")})}function rB(t,e){t.info(function(){return"TIMEOUT: "+e})}Kd.prototype.info=function(){};function iB(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if(o!="noop"&&o!="stop"&&o!="close")for(var s=1;s<i.length;s++)i[s]=""}}}}return ov(n)}catch{return e}}var Bi={},uT=null;function Qd(){return uT=uT||new We}Bi.Ta="serverreachability";function OT(t){ct.call(this,Bi.Ta,t)}Ke(OT,ct);function Ja(t){let e=Qd();nt(e,new OT(e))}Bi.STAT_EVENT="statevent";function kT(t,e){ct.call(this,Bi.STAT_EVENT,t),this.stat=e}Ke(kT,ct);function gt(t){let e=Qd();nt(e,new kT(e,t))}Bi.Ua="timingevent";function FT(t,e){ct.call(this,Bi.Ua,t),this.size=e}Ke(FT,ct);function nc(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return L.setTimeout(function(){t()},e)}var Yd={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},VT={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function uv(){}uv.prototype.h=null;function lT(t){return t.h||(t.h=t.i())}function LT(){}var rc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function lv(){ct.call(this,"d")}Ke(lv,ct);function dv(){ct.call(this,"c")}Ke(dv,ct);var qy;function Jd(){}Ke(Jd,uv);Jd.prototype.g=function(){return new XMLHttpRequest};Jd.prototype.i=function(){return{}};qy=new Jd;function ic(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Ya(this),this.P=oB,t=ky?125:void 0,this.V=new Wd(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new UT}function UT(){this.i=null,this.g="",this.h=!1}var oB=45e3,jT={},Gy={};C=ic.prototype;C.setTimeout=function(t){this.P=t};function zy(t,e,n){t.L=1,t.A=Xd(dr(e)),t.u=n,t.S=!0,BT(t,null)}function BT(t,e){t.G=Date.now(),oc(t),t.B=dr(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),QT(n.i,"t",r),t.o=0,n=t.l.J,t.h=new UT,t.g=gS(t.l,n?e:null,!t.u),0<t.O&&(t.M=new Hy(at(t.Pa,t,t.g),t.O)),NT(t.U,t.g,"readystatechange",t.nb),e=t.I?ET(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Ja(),tB(t.j,t.v,t.B,t.m,t.W,t.u)}C.nb=function(t){t=t.target;let e=this.M;e&&kn(t)==3?e.l():this.Pa(t)};C.Pa=function(t){try{if(t==this.g)e:{let l=kn(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>l)&&(l!=3||ky||this.g&&(this.h.h||this.g.ja()||pT(this.g)))){this.J||l!=4||e==7||(e==8||0>=d?Ja(3):Ja(2)),Zd(this);var n=this.g.da();this.ca=n;t:if($T(this)){var r=pT(this.g);t="";var i=r.length,o=kn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Li(this),Ga(this);var s="";break t}this.h.i=new L.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.length=0,this.h.g+=t,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=n==200,nB(this.j,this.v,this.B,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!za(a)){var u=a;break t}}u=null}if(n=u)rs(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wy(this,n);else{this.i=!1,this.s=3,gt(12),Li(this),Ga(this);break e}}this.S?(HT(this,l,s),ky&&this.i&&l==3&&(NT(this.U,this.V,"tick",this.mb),this.V.start())):(rs(this.j,this.m,s,null),Wy(this,s)),l==4&&Li(this),this.i&&!this.J&&(l==4?hS(this.l,this):(this.i=!1,oc(this)))}else TB(this.g),n==400&&0<s.indexOf("Unknown SID")?(this.s=3,gt(12)):(this.s=0,gt(13)),Li(this),Ga(this)}}}catch{}finally{}};function $T(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function HT(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=sB(t,n),i==Gy){e==4&&(t.s=4,gt(14),r=!1),rs(t.j,t.m,null,"[Incomplete Response]");break}else if(i==jT){t.s=4,gt(15),rs(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else rs(t.j,t.m,i,null),Wy(t,i);$T(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,gt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),yv(e),e.M=!0,gt(11))):(rs(t.j,t.m,n,"[Invalid Chunked Response]"),Li(t),Ga(t))}C.mb=function(){if(this.g){var t=kn(this.g),e=this.g.ja();this.o<e.length&&(Zd(this),HT(this,t,e),this.i&&t!=4&&oc(this))}};function sB(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?Gy:(n=Number(e.substring(n,r)),isNaN(n)?jT:(r+=1,r+n>e.length?Gy:(e=e.slice(r,r+n),t.o=r+n,e)))}C.cancel=function(){this.J=!0,Li(this)};function oc(t){t.Y=Date.now()+t.P,qT(t,t.P)}function qT(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=nc(at(t.lb,t),e)}function Zd(t){t.C&&(L.clearTimeout(t.C),t.C=null)}C.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(rB(this.j,this.B),this.L!=2&&(Ja(),gt(17)),Li(this),this.s=2,Ga(this)):qT(this,this.Y-t)};function Ga(t){t.l.H==0||t.J||hS(t.l,t)}function Li(t){Zd(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,av(t.V),PT(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Wy(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Ky(n.i,t))){if(!t.K&&Ky(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Ud(n),nh(n);else break e;gv(n),gt(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=nc(at(n.ib,n),6e3));if(1>=ZT(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Ui(n,11)}else if((t.K||n.g==t)&&Ud(n),!za(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];let l=u[3];l!=null&&(n.ra=l,n.l.info("VER="+n.ra));let d=u[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=u[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let p=t.g;if(p){let g=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var o=r.i;o.g||g.indexOf("spdy")==-1&&g.indexOf("quic")==-1&&g.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(hv(o,o.h),o.h=null))}if(r.F){let I=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;I&&(r.Da=I,Ee(r.I,r.F,I))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var s=t;if(r.wa=mS(r,r.J?r.pa:null,r.Y),s.K){XT(r.i,s);var a=s,c=r.L;c&&a.setTimeout(c),a.C&&(Zd(a),oc(a)),r.g=s}else lS(r);0<n.j.length&&rh(n)}else u[0]!="stop"&&u[0]!="close"||Ui(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?Ui(n,7):mv(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}Ja(4)}catch{}}function aB(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Hd(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function cB(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Hd(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function GT(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Hd(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=cB(t),r=aB(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}var zT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uB(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function ji(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof ji){this.h=t.h,Vd(this,t.j),this.s=t.s,this.g=t.g,Ld(this,t.m),this.l=t.l;var e=t.i,n=new Za;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),dT(this,n),this.o=t.o}else t&&(e=String(t).match(zT))?(this.h=!1,Vd(this,e[1]||"",!0),this.s=Ha(e[2]||""),this.g=Ha(e[3]||"",!0),Ld(this,e[4]),this.l=Ha(e[5]||"",!0),dT(this,e[6]||"",!0),this.o=Ha(e[7]||"")):(this.h=!1,this.i=new Za(null,this.h))}ji.prototype.toString=function(){var t=[],e=this.j;e&&t.push(qa(e,hT,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(qa(e,hT,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(qa(n,n.charAt(0)=="/"?hB:dB,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",qa(n,pB)),t.join("")};function dr(t){return new ji(t)}function Vd(t,e,n){t.j=n?Ha(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Ld(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function dT(t,e,n){e instanceof Za?(t.i=e,mB(t.i,t.h)):(n||(e=qa(e,fB)),t.i=new Za(e,t.h))}function Ee(t,e,n){t.i.set(e,n)}function Xd(t){return Ee(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ha(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qa(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,lB),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function lB(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var hT=/[#\/\?@]/g,dB=/[#\?:]/g,hB=/[#\?]/g,fB=/[#\?@]/g,pB=/#/g;function Za(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Jr(t){t.g||(t.g=new Map,t.h=0,t.i&&uB(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}C=Za.prototype;C.add=function(t,e){Jr(this),this.i=null,t=ss(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function WT(t,e){Jr(t),e=ss(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function KT(t,e){return Jr(t),e=ss(t,e),t.g.has(e)}C.forEach=function(t,e){Jr(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};C.ta=function(){Jr(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let o=0;o<i.length;o++)n.push(e[r])}return n};C.Z=function(t){Jr(this);let e=[];if(typeof t=="string")KT(this,t)&&(e=e.concat(this.g.get(ss(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};C.set=function(t,e){return Jr(this),this.i=null,t=ss(this,t),KT(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};C.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function QT(t,e,n){WT(t,e),0<n.length&&(t.i=null,t.g.set(ss(t,e),Zy(n)),t.h+=n.length)}C.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;s[r]!==""&&(i+="="+encodeURIComponent(String(s[r]))),t.push(i)}}return this.i=t.join("&")};function ss(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function mB(t,e){e&&!t.j&&(Jr(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(WT(this,r),QT(this,i,n))},t)),t.j=e}var gB=class{constructor(t,e){this.g=t,this.map=e}};function YT(t){this.l=t||yB,L.PerformanceNavigationTiming?(t=L.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(L.g&&L.g.Ka&&L.g.Ka()&&L.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var yB=10;function JT(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function ZT(t){return t.h?1:t.g?t.g.size:0}function Ky(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function hv(t,e){t.g?t.g.add(e):t.h=e}function XT(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}YT.prototype.cancel=function(){if(this.i=eS(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function eS(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return Zy(t.i)}var vB=class{stringify(t){return L.JSON.stringify(t,void 0)}parse(t){return L.JSON.parse(t,void 0)}};function _B(){this.g=new vB}function IB(t,e,n){let r=n||"";try{GT(t,function(i,o){let s=i;ec(i)&&(s=ov(i)),e.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function wB(t,e){let n=new Kd;if(L.Image){let r=new Image;r.onload=Md(kd,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Md(kd,n,r,"TestLoadImage: error",!1,e),r.onabort=Md(kd,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Md(kd,n,r,"TestLoadImage: timeout",!1,e),L.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function kd(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function sc(t){this.l=t.ec||null,this.j=t.ob||!1}Ke(sc,uv);sc.prototype.g=function(){return new eh(this.l,this.j)};sc.prototype.i=function(t){return function(){return t}}({});function eh(t,e){We.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=fv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ke(eh,We);var fv=0;C=eh.prototype;C.open=function(t,e){if(this.readyState!=fv)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Xa(this)};C.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||L).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};C.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ac(this)),this.readyState=fv};C.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Xa(this)),this.g&&(this.readyState=3,Xa(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof L.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;tS(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function tS(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}C.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?ac(this):Xa(this),this.readyState==3&&tS(this)}};C.Za=function(t){this.g&&(this.response=this.responseText=t,ac(this))};C.Ya=function(t){this.g&&(this.response=t,ac(this))};C.ka=function(){this.g&&ac(this)};function ac(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Xa(t)}C.setRequestHeader=function(t,e){this.v.append(t,e)};C.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};C.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Xa(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(eh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var EB=L.JSON.parse;function Se(t){We.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=nS,this.L=this.M=!1}Ke(Se,We);var nS="",DB=/^https?$/i,CB=["POST","PUT"];C=Se.prototype;C.Oa=function(t){this.M=t};C.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():qy.g(),this.C=this.u?lT(this.u):lT(qy),this.g.onreadystatechange=at(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){fT(this,o);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let o of r.keys())n.set(o,r.get(o));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(o=>o.toLowerCase()=="content-type"),i=L.FormData&&t instanceof L.FormData,!(0<=vT(CB,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{oS(this),0<this.B&&((this.L=bB(this.g))?(this.g.timeout=this.B,this.g.ontimeout=at(this.ua,this)):this.A=cv(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){fT(this,o)}};function bB(t){return os&&typeof t.timeout=="number"&&t.ontimeout!==void 0}C.ua=function(){typeof Jy<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,nt(this,"timeout"),this.abort(8))};function fT(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,rS(t),th(t)}function rS(t){t.F||(t.F=!0,nt(t,"complete"),nt(t,"error"))}C.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,nt(this,"complete"),nt(this,"abort"),th(this))};C.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),th(this,!0)),Se.$.N.call(this)};C.La=function(){this.s||(this.G||this.v||this.l?iS(this):this.kb())};C.kb=function(){iS(this)};function iS(t){if(t.h&&typeof Jy<"u"&&(!t.C[1]||kn(t)!=4||t.da()!=2)){if(t.v&&kn(t)==4)cv(t.La,0,t);else if(nt(t,"readystatechange"),kn(t)==4){t.h=!1;try{let s=t.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=s===0){var i=String(t.I).match(zT)[1]||null;!i&&L.self&&L.self.location&&(i=L.self.location.protocol.slice(0,-1)),r=!DB.test(i?i.toLowerCase():"")}n=r}if(n)nt(t,"complete"),nt(t,"success");else{t.m=6;try{var o=2<kn(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",rS(t)}}finally{th(t)}}}}function th(t,e){if(t.g){oS(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||nt(t,"ready");try{n.onreadystatechange=r}catch{}}}function oS(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(L.clearTimeout(t.A),t.A=null)}C.isActive=function(){return!!this.g};function kn(t){return t.g?t.g.readyState:0}C.da=function(){try{return 2<kn(this)?this.g.status:-1}catch{return-1}};C.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};C.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),EB(e)}};function pT(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case nS:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function TB(t){let e={};t=(t.g&&2<=kn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(za(t[r]))continue;var n=Zj(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let o=e[i]||[];e[i]=o,o.push(n)}Kj(e,function(r){return r.join(", ")})}C.Ia=function(){return this.m};C.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function sS(t){let e="";return ev(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function pv(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=sS(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ee(t,e,n))}function Ba(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function aS(t){this.Ga=0,this.j=[],this.l=new Kd,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ba("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ba("baseRetryDelayMs",5e3,t),this.hb=Ba("retryDelaySeedMs",1e4,t),this.eb=Ba("forwardChannelMaxRetries",2,t),this.xa=Ba("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new YT(t&&t.concurrentRequestLimit),this.Ja=new _B,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}C=aS.prototype;C.ra=8;C.H=1;function mv(t){if(cS(t),t.H==3){var e=t.W++,n=dr(t.I);if(Ee(n,"SID",t.K),Ee(n,"RID",e),Ee(n,"TYPE","terminate"),cc(t,n),e=new ic(t,t.l,e),e.L=2,e.A=Xd(dr(n)),n=!1,L.navigator&&L.navigator.sendBeacon)try{n=L.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&L.Image&&(new Image().src=e.A,n=!0),n||(e.g=gS(e.l,null),e.g.ha(e.A)),e.G=Date.now(),oc(e)}pS(t)}function nh(t){t.g&&(yv(t),t.g.cancel(),t.g=null)}function cS(t){nh(t),t.u&&(L.clearTimeout(t.u),t.u=null),Ud(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&L.clearTimeout(t.m),t.m=null)}function rh(t){if(!JT(t.i)&&!t.m){t.m=!0;var e=t.Na;Ka||MT(),Qa||(Ka(),Qa=!0),sv.add(e,t),t.C=0}}function SB(t,e){return ZT(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=nc(at(t.Na,t,e),fS(t,t.C)),t.C++,!0)}C.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new ic(this,this.l,t),o=this.s;if(this.U&&(o?(o=ET(o),DT(o,this.U)):o=this.U),this.o!==null||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=uS(this,i,e),n=dr(this.I),Ee(n,"RID",t),Ee(n,"CVER",22),this.F&&Ee(n,"X-HTTP-Session-Id",this.F),cc(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(sS(o)))+"&"+e:this.o&&pv(n,this.o,o)),hv(this.i,i),this.bb&&Ee(n,"TYPE","init"),this.P?(Ee(n,"$req",e),Ee(n,"SID","null"),i.aa=!0,zy(i,n,null)):zy(i,n,e),this.H=2}}else this.H==3&&(t?mT(this,t):this.j.length==0||JT(this.i)||mT(this))};function mT(t,e){var n;e?n=e.m:n=t.W++;let r=dr(t.I);Ee(r,"SID",t.K),Ee(r,"RID",n),Ee(r,"AID",t.V),cc(t,r),t.o&&t.s&&pv(r,t.o,t.s),n=new ic(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=uS(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),hv(t.i,n),zy(n,r,e)}function cc(t,e){t.na&&ev(t.na,function(n,r){Ee(e,r,n)}),t.h&&GT({},function(n,r){Ee(e,r,n)})}function uS(t,e,n){n=Math.min(t.j.length,n);var r=t.h?at(t.h.Va,t.h,t):null;e:{var i=t.j;let o=-1;for(;;){let s=["count="+n];o==-1?0<n?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let c=0;c<n;c++){let u=i[c].g,l=i[c].map;if(u-=o,0>u)o=Math.max(0,i[c].g-100),a=!1;else try{IB(l,s,"req"+u+"_")}catch{r&&r(l)}}if(a){r=s.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function lS(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Ka||MT(),Qa||(Ka(),Qa=!0),sv.add(e,t),t.A=0}}function gv(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=nc(at(t.Ma,t),fS(t,t.A)),t.A++,!0)}C.Ma=function(){if(this.u=null,dS(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=nc(at(this.jb,this),t)}};C.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,gt(10),nh(this),dS(this))};function yv(t){t.B!=null&&(L.clearTimeout(t.B),t.B=null)}function dS(t){t.g=new ic(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=dr(t.wa);Ee(e,"RID","rpc"),Ee(e,"SID",t.K),Ee(e,"AID",t.V),Ee(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Ee(e,"TO",t.qa),Ee(e,"TYPE","xmlhttp"),cc(t,e),t.o&&t.s&&pv(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Xd(dr(e)),n.u=null,n.S=!0,BT(n,t)}C.ib=function(){this.v!=null&&(this.v=null,nh(this),gv(this),gt(19))};function Ud(t){t.v!=null&&(L.clearTimeout(t.v),t.v=null)}function hS(t,e){var n=null;if(t.g==e){Ud(t),yv(t),t.g=null;var r=2}else if(Ky(t.i,e))n=e.F,XT(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=Qd(),nt(r,new FT(r,n)),rh(t)}else lS(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&SB(t,e)||r==2&&gv(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Ui(t,5);break;case 4:Ui(t,10);break;case 3:Ui(t,6);break;default:Ui(t,2)}}}function fS(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Ui(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=at(t.pb,t);n||(n=new ji("//www.google.com/images/cleardot.gif"),L.location&&L.location.protocol=="http"||Vd(n,"https"),Xd(n)),wB(n.toString(),r)}else gt(2);t.H=0,t.h&&t.h.za(e),pS(t),cS(t)}C.pb=function(t){t?(this.l.info("Successfully pinged google.com"),gt(2)):(this.l.info("Failed to ping google.com"),gt(1))};function pS(t){if(t.H=0,t.ma=[],t.h){let e=eS(t.i);(e.length!=0||t.j.length!=0)&&(sT(t.ma,e),sT(t.ma,t.j),t.i.i.length=0,Zy(t.j),t.j.length=0),t.h.ya()}}function mS(t,e,n){var r=n instanceof ji?dr(n):new ji(n);if(r.g!="")e&&(r.g=e+"."+r.g),Ld(r,r.m);else{var i=L.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new ji(null);r&&Vd(o,r),e&&(o.g=e),i&&Ld(o,i),n&&(o.l=n),r=o}return n=t.F,e=t.Da,n&&e&&Ee(r,n,e),Ee(r,"VER",t.ra),cc(t,r),r}function gS(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Se(new sc({ob:n})):new Se(t.va),e.Oa(t.J),e}C.isActive=function(){return!!this.h&&this.h.isActive(this)};function yS(){}C=yS.prototype;C.Ba=function(){};C.Aa=function(){};C.za=function(){};C.ya=function(){};C.isActive=function(){return!0};C.Va=function(){};function jd(){if(os&&!(10<=Number(qj)))throw Error("Environmental error: no available transport.")}jd.prototype.g=function(t,e){return new Mt(t,e)};function Mt(t,e){We.call(this),this.g=new aS(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!za(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!za(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new as(this)}Ke(Mt,We);Mt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;gt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=mS(t,null,t.Y),rh(t)};Mt.prototype.close=function(){mv(this.g)};Mt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=ov(t),t=n);e.j.push(new gB(e.fb++,t)),e.H==3&&rh(e)};Mt.prototype.N=function(){this.g.h=null,delete this.j,mv(this.g),delete this.g,Mt.$.N.call(this)};function vS(t){lv.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Ke(vS,lv);function _S(){dv.call(this),this.status=1}Ke(_S,dv);function as(t){this.g=t}Ke(as,yS);as.prototype.Ba=function(){nt(this.g,"a")};as.prototype.Aa=function(t){nt(this.g,new vS(t))};as.prototype.za=function(t){nt(this.g,new _S)};as.prototype.ya=function(){nt(this.g,"b")};function AB(){this.blockSize=-1}function on(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Ke(on,AB);on.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Oy(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var o=t.g[3],s=e+(o^n&(i^o))+r[0]+3614090360&4294967295;e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[1]+3905402710&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[2]+606105819&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[3]+3250441966&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[4]+4118548399&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[5]+1200080426&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[6]+2821735955&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[7]+4249261313&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[8]+1770035416&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[9]+2336552879&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[10]+4294925233&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[11]+2304563134&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[12]+1804603682&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[13]+4254626195&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[14]+2792965006&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[15]+1236535329&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(i^o&(n^i))+r[1]+4129170786&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[6]+3225465664&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[11]+643717713&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[0]+3921069994&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[5]+3593408605&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[10]+38016083&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[15]+3634488961&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[4]+3889429448&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[9]+568446438&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[14]+3275163606&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[3]+4107603335&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[8]+1163531501&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[13]+2850285829&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[2]+4243563512&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[7]+1735328473&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[12]+2368359562&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(n^i^o)+r[5]+4294588738&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[8]+2272392833&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[11]+1839030562&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[14]+4259657740&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[1]+2763975236&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[4]+1272893353&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[7]+4139469664&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[10]+3200236656&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[13]+681279174&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[0]+3936430074&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[3]+3572445317&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[6]+76029189&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[9]+3654602809&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[12]+3873151461&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[15]+530742520&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[2]+3299628645&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(i^(n|~o))+r[0]+4096336452&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[7]+1126891415&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[14]+2878612391&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[5]+4237533241&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[12]+1700485571&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[3]+2399980690&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[10]+4293915773&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[1]+2240044497&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[8]+1873313359&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[15]+4264355552&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[6]+2734768916&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[13]+1309151649&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[4]+4149444226&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[11]+3174756917&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[2]+718787259&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+o&4294967295}on.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(i==0)for(;o<=n;)Oy(this,t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<e;)if(r[i++]=t.charCodeAt(o++),i==this.blockSize){Oy(this,r),i=0;break}}else for(;o<e;)if(r[i++]=t[o++],i==this.blockSize){Oy(this,r),i=0;break}}this.h=i,this.i+=e};on.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function fe(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var o=t[i]|0;r&&o==e||(n[i]=o,r=!1)}this.g=n}var RB={};function vv(t){return-128<=t&&128>t?Bj(t,function(e){return new fe([e|0],0>e?-1:0)}):new fe([t|0],0>t?-1:0)}function Fn(t){if(isNaN(t)||!isFinite(t))return is;if(0>t)return tt(Fn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Qy;return new fe(e,0)}function IS(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return tt(IS(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Fn(Math.pow(e,8)),r=is,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+o),e);8>o?(o=Fn(Math.pow(e,o)),r=r.R(o).add(Fn(s))):(r=r.R(n),r=r.add(Fn(s)))}return r}var Qy=4294967296,is=vv(0),Yy=vv(1),gT=vv(16777216);C=fe.prototype;C.ea=function(){if(qt(this))return-tt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Qy+r)*e,e*=Qy}return t};C.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(lr(this))return"0";if(qt(this))return"-"+tt(this).toString(t);for(var e=Fn(Math.pow(t,6)),n=this,r="";;){var i=$d(n,e).g;n=Bd(n,i.R(e));var o=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,lr(n))return o+r;for(;6>o.length;)o="0"+o;r=o+r}};C.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function lr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function qt(t){return t.h==-1}C.X=function(t){return t=Bd(this,t),qt(t)?-1:lr(t)?0:1};function tt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new fe(n,~t.h).add(Yy)}C.abs=function(){return qt(this)?tt(this):this};C.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var o=r+(this.D(i)&65535)+(t.D(i)&65535),s=(o>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new fe(n,n[n.length-1]&-2147483648?-1:0)};function Bd(t,e){return t.add(tt(e))}C.R=function(t){if(lr(this)||lr(t))return is;if(qt(this))return qt(t)?tt(this).R(tt(t)):tt(tt(this).R(t));if(qt(t))return tt(this.R(tt(t)));if(0>this.X(gT)&&0>t.X(gT))return Fn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var o=this.D(r)>>>16,s=this.D(r)&65535,a=t.D(i)>>>16,c=t.D(i)&65535;n[2*r+2*i]+=s*c,Fd(n,2*r+2*i),n[2*r+2*i+1]+=o*c,Fd(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,Fd(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,Fd(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new fe(n,0)};function Fd(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function $a(t,e){this.g=t,this.h=e}function $d(t,e){if(lr(e))throw Error("division by zero");if(lr(t))return new $a(is,is);if(qt(t))return e=$d(tt(t),e),new $a(tt(e.g),tt(e.h));if(qt(e))return e=$d(t,tt(e)),new $a(tt(e.g),e.h);if(30<t.g.length){if(qt(t)||qt(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Yy,r=e;0>=r.X(t);)n=yT(n),r=yT(r);var i=ns(n,1),o=ns(r,1);for(r=ns(r,2),n=ns(n,2);!lr(r);){var s=o.add(r);0>=s.X(t)&&(i=i.add(n),o=s),r=ns(r,1),n=ns(n,1)}return e=Bd(t,i.R(e)),new $a(i,e)}for(i=is;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),o=Fn(n),s=o.R(e);qt(s)||0<s.X(t);)n-=r,o=Fn(n),s=o.R(e);lr(o)&&(o=Yy),i=i.add(o),t=Bd(t,s)}return new $a(i,t)}C.gb=function(t){return $d(this,t).h};C.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new fe(n,this.h&t.h)};C.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new fe(n,this.h|t.h)};C.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new fe(n,this.h^t.h)};function yT(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new fe(n,t.h)}function ns(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],o=0;o<r;o++)i[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new fe(i,t.h)}jd.prototype.createWebChannel=jd.prototype.g;Mt.prototype.send=Mt.prototype.u;Mt.prototype.open=Mt.prototype.m;Mt.prototype.close=Mt.prototype.close;Yd.NO_ERROR=0;Yd.TIMEOUT=8;Yd.HTTP_ERROR=6;VT.COMPLETE="complete";LT.EventType=rc;rc.OPEN="a";rc.CLOSE="b";rc.ERROR="c";rc.MESSAGE="d";We.prototype.listen=We.prototype.O;Se.prototype.listenOnce=Se.prototype.P;Se.prototype.getLastError=Se.prototype.Sa;Se.prototype.getLastErrorCode=Se.prototype.Ia;Se.prototype.getStatus=Se.prototype.da;Se.prototype.getResponseJson=Se.prototype.Wa;Se.prototype.getResponseText=Se.prototype.ja;Se.prototype.send=Se.prototype.ha;Se.prototype.setWithCredentials=Se.prototype.Oa;on.prototype.digest=on.prototype.l;on.prototype.reset=on.prototype.reset;on.prototype.update=on.prototype.j;fe.prototype.add=fe.prototype.add;fe.prototype.multiply=fe.prototype.R;fe.prototype.modulo=fe.prototype.gb;fe.prototype.compare=fe.prototype.X;fe.prototype.toNumber=fe.prototype.ea;fe.prototype.toString=fe.prototype.toString;fe.prototype.getBits=fe.prototype.D;fe.fromNumber=Fn;fe.fromString=IS;var wS=sn.createWebChannelTransport=function(){return new jd},ES=sn.getStatEventTarget=function(){return Qd()},ih=sn.ErrorCode=Yd,DS=sn.EventType=VT,CS=sn.Event=Bi,_v=sn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},G8=sn.FetchXmlHttpFactory=sc,uc=sn.WebChannel=LT,bS=sn.XhrIo=Se,TS=sn.Md5=on,$i=sn.Integer=fe;var SS="@firebase/firestore";var Qe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Qe.UNAUTHENTICATED=new Qe(null),Qe.GOOGLE_CREDENTIALS=new Qe("google-credentials-uid"),Qe.FIRST_PARTY=new Qe("first-party-uid"),Qe.MOCK_USER=new Qe("mock-user");var As="10.11.0";var Wi=new Vr("@firebase/firestore");function lc(){return Wi.logLevel}function b(t,...e){if(Wi.logLevel<=Z.DEBUG){let n=e.map(uI);Wi.debug(`Firestore (${As}): ${t}`,...n)}}function $n(t,...e){if(Wi.logLevel<=Z.ERROR){let n=e.map(uI);Wi.error(`Firestore (${As}): ${t}`,...n)}}function ms(t,...e){if(Wi.logLevel<=Z.WARN){let n=e.map(uI);Wi.warn(`Firestore (${As}): ${t}`,...n)}}function uI(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function F(t="Unexpected state"){let e=`FIRESTORE (${As}) INTERNAL ASSERTION FAILED: `+t;throw $n(e),new Error(e)}function we(t,e){t||F()}function B(t,e){return t}var m={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},T=class extends Rt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var cn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var uh=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Cv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Qe.UNAUTHENTICATED))}shutdown(){}},bv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Tv=class{constructor(e){this.t=e,this.currentUser=Qe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),o=new cn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new cn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>f(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{b("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(b("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new cn)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(b("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(we(typeof r.accessToken=="string"),new uh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string"),new Qe(e)}},Sv=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Qe.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Av=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Sv(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Qe.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Rv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Mv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=o=>{o.error!=null&&b("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,b("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{b("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):b("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(we(typeof n.token=="string"),this.R=n.token,new Rv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function MB(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var lh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=MB(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}};function ce(t,e){return t<e?-1:t>e?1:0}function gs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var ye=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new T(m.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new T(m.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new T(m.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new T(m.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var H=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new ye(0,0))}static max(){return new t(new ye(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var dh=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&F(),r===void 0?r=e.length-n:r>e.length-n&&F(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},be=class t extends dh{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new T(m.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},xB=/^[_a-zA-Z][_a-zA-Z0-9]*$/,xt=class t extends dh{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return xB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new T(m.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new T(m.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new T(m.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new T(m.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var x=class t{constructor(e){this.path=e}static fromPath(e){return new t(be.fromString(e))}static fromName(e){return new t(be.fromString(e).popFirst(5))}static empty(){return new t(be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new be(e.slice()))}};var xv=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};xv.UNKNOWN_ID=-1;function NB(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=H.fromTimestamp(r===1e9?new ye(n+1,0):new ye(n,r));return new Ki(i,x.empty(),e)}function PB(t){return new Ki(t.readTime,t.key,-1)}var Ki=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(H.min(),x.empty(),-1)}static max(){return new t(H.max(),x.empty(),-1)}};function OB(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=x.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}var kB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Nv=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ac(t){return f(this,null,function*(){if(t.code!==m.FAILED_PRECONDITION||t.message!==kB)throw t;b("LocalStore","Unexpectedly lost primary lease")})}var y=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&F(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},c=>r(c))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let u=c;n(e[u]).next(l=>{s[u]=l,++a,a===o&&r(s)},l=>i(l))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};var Pv=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new cn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new zi(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=lI(r.target.error);this.V.reject(new zi(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new zi(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(b("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new kv(n)}},hh=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(Te())===12.2&&$n("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return b("SimpleDb","Removing database:",e),Hi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Bl())return!1;if(t.C())return!0;let e=Te(),n=t.S(e),r=0<n&&n<10,i=t.v(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){let n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){return f(this,null,function*(){return this.db||(b("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;n(s)},i.onblocked=()=>{r(new zi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new T(m.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new T(m.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new zi(e,s))},i.onupgradeneeded=o=>{b("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.N(s,i.transaction,o.oldVersion,this.version).next(()=>{b("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db})}B(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return f(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.O(e);let a=Pv.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),y.reject(u))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,u=c.name!=="FirebaseError"&&s<3;if(b("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}},Ov=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Hi(this.k.delete())}},zi=class extends T{constructor(e,n){super(m.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function Rc(t){return t.name==="IndexedDbTransactionError"}var kv=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(b("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(b("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Hi(r)}add(e){return b("SimpleDb","ADD",this.store.name,e,e),Hi(this.store.add(e))}get(e){return Hi(this.store.get(e)).next(n=>(n===void 0&&(n=null),b("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return b("SimpleDb","DELETE",this.store.name,e),Hi(this.store.delete(e))}count(){return b("SimpleDb","COUNT",this.store.name),Hi(this.store.count())}W(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new y((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.G(o,(a,c)=>{s.push(c)}).next(()=>s)}}j(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new y((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}H(e,n){b("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.J=!1;let i=this.cursor(r);return this.G(i,(o,s,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.G(i,n)}Z(e){let n=this.cursor({});return new y((r,i)=>{n.onerror=o=>{let s=lI(o.target.error);i(s)},n.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}G(e,n){let r=[];return new y((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new Ov(a),u=n(a.primaryKey,a.value,c);if(u instanceof y){let l=u.catch(d=>(c.done(),y.reject(d)));r.push(l)}c.isDone?i():c.$===null?a.continue():a.continue(c.$)}}).next(()=>y.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Hi(t){return new y((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=lI(r.target.error);n(i)}})}var AS=!1;function lI(t){let e=hh.S(Te());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new T("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return AS||(AS=!0,setTimeout(()=>{throw r},0)),r}}return t}var oA=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function Lh(t){return t==null}function gc(t){return t===0&&1/t==-1/0}function FB(t){return typeof t=="number"&&Number.isInteger(t)&&!gc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var VB=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],tK=[...VB,"documentOverlays"],LB=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],UB=LB,nK=[...UB,"indexConfiguration","indexState","indexEntries"];function RS(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Rs(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function sA(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Re=class t{constructor(e,n){this.comparator=e,this.root=n||Un.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Un.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Un.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ds(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ds(this.root,e,this.comparator,!1)}getReverseIterator(){return new ds(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ds(this.root,e,this.comparator,!0)}},ds=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Un=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw F();let e=this.left.check();if(e!==this.right.check())throw F();return e+(this.isRed()?0:1)}};Un.EMPTY=null,Un.RED=!0,Un.BLACK=!1;Un.EMPTY=new class{constructor(){this.size=0}get key(){throw F()}get value(){throw F()}get color(){throw F()}get left(){throw F()}get right(){throw F()}copy(e,n,r,i,o){return this}insert(e,n,r){return new Un(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var lt=class t{constructor(e){this.comparator=e,this.data=new Re(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new fh(this.data.getIterator())}getIteratorFrom(e){return new fh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},fh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ln=class t{constructor(e){this.fields=e,e.sort(xt.comparator)}static empty(){return new t([])}unionWith(e){let n=new lt(xt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return gs(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var ph=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var yt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new ph("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};yt.EMPTY_BYTE_STRING=new yt("");var jB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fr(t){if(we(!!t),typeof t=="string"){let e=0,n=jB.exec(t);if(we(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ae(t.seconds),nanos:Ae(t.nanos)}}function Ae(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Xr(t){return typeof t=="string"?yt.fromBase64String(t):yt.fromUint8Array(t)}function dI(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function hI(t){let e=t.mapValue.fields.__previous_value__;return dI(e)?hI(e):e}function yc(t){let e=fr(t.mapValue.fields.__local_write_time__.timestampValue);return new ye(e.seconds,e.nanos)}var Fv=class{constructor(e,n,r,i,o,s,a,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},mh=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var oh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Qi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?dI(t)?4:aA(t)?9007199254740991:10:F()}function Hn(t,e){if(t===e)return!0;let n=Qi(t);if(n!==Qi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return yc(t).isEqual(yc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=fr(i.timestampValue),a=fr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Xr(i.bytesValue).isEqual(Xr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Ae(i.geoPointValue.latitude)===Ae(o.geoPointValue.latitude)&&Ae(i.geoPointValue.longitude)===Ae(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ae(i.integerValue)===Ae(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ae(i.doubleValue),a=Ae(o.doubleValue);return s===a?gc(s)===gc(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return gs(t.arrayValue.values||[],e.arrayValue.values||[],Hn);case 10:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(RS(s)!==RS(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Hn(s[c],a[c])))return!1;return!0}(t,e);default:return F()}}function vc(t,e){return(t.values||[]).find(n=>Hn(n,e))!==void 0}function ys(t,e){if(t===e)return 0;let n=Qi(t),r=Qi(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Ae(o.integerValue||o.doubleValue),c=Ae(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return MS(t.timestampValue,e.timestampValue);case 4:return MS(yc(t),yc(e));case 5:return ce(t.stringValue,e.stringValue);case 6:return function(o,s){let a=Xr(o),c=Xr(s);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){let l=ce(a[u],c[u]);if(l!==0)return l}return ce(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ce(Ae(o.latitude),Ae(s.latitude));return a!==0?a:ce(Ae(o.longitude),Ae(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){let a=o.values||[],c=s.values||[];for(let u=0;u<a.length&&u<c.length;++u){let l=ys(a[u],c[u]);if(l)return l}return ce(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===oh.mapValue&&s===oh.mapValue)return 0;if(o===oh.mapValue)return 1;if(s===oh.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),u=s.fields||{},l=Object.keys(u);c.sort(),l.sort();for(let d=0;d<c.length&&d<l.length;++d){let h=ce(c[d],l[d]);if(h!==0)return h;let p=ys(a[c[d]],u[l[d]]);if(p!==0)return p}return ce(c.length,l.length)}(t.mapValue,e.mapValue);default:throw F()}}function MS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);let n=fr(t),r=fr(e),i=ce(n.seconds,r.seconds);return i!==0?i:ce(n.nanos,r.nanos)}function vs(t){return Vv(t)}function Vv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=fr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Xr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return x.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=Vv(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Vv(n.fields[s])}`;return i+"}"}(t.mapValue):F()}function xS(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Lv(t){return!!t&&"integerValue"in t}function fI(t){return!!t&&"arrayValue"in t}function NS(t){return!!t&&"nullValue"in t}function PS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ah(t){return!!t&&"mapValue"in t}function hc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Rs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=hc(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=hc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function aA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var an=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ah(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=hc(n)}setAll(e){let n=xt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=hc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());ah(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Hn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ah(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Rs(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(hc(this.value))}};function cA(t){let e=[];return Rs(t.fields,(n,r)=>{let i=new xt([n]);if(ah(r)){let o=cA(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Ln(e)}var un=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,H.min(),H.min(),H.min(),an.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,H.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,H.min(),H.min(),an.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,H.min(),H.min(),an.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(H.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=an.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=an.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=H.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var _s=class{constructor(e,n){this.position=e,this.inclusive=n}};function OS(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=x.comparator(x.fromName(s.referenceValue),n.key):r=ys(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function kS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Hn(t.position[n],e.position[n]))return!1;return!0}var Is=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function BB(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var gh=class{},Ue=class t extends gh{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new jv(e,n,r):n==="array-contains"?new Hv(e,r):n==="in"?new qv(e,r):n==="not-in"?new Gv(e,r):n==="array-contains-any"?new zv(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Bv(e,r):new $v(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ys(n,this.value)):n!==null&&Qi(this.value)===Qi(n)&&this.matchesComparison(ys(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return F()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ln=class t extends gh{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new t(e,n)}matches(e){return uA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function uA(t){return t.op==="and"}function lA(t){return $B(t)&&uA(t)}function $B(t){for(let e of t.filters)if(e instanceof ln)return!1;return!0}function Uv(t){if(t instanceof Ue)return t.field.canonicalString()+t.op.toString()+vs(t.value);if(lA(t))return t.filters.map(e=>Uv(e)).join(",");{let e=t.filters.map(n=>Uv(n)).join(",");return`${t.op}(${e})`}}function dA(t,e){return t instanceof Ue?function(r,i){return i instanceof Ue&&r.op===i.op&&r.field.isEqual(i.field)&&Hn(r.value,i.value)}(t,e):t instanceof ln?function(r,i){return i instanceof ln&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&dA(s,i.filters[a]),!0):!1}(t,e):void F()}function hA(t){return t instanceof Ue?function(n){return`${n.field.canonicalString()} ${n.op} ${vs(n.value)}`}(t):t instanceof ln?function(n){return n.op.toString()+" {"+n.getFilters().map(hA).join(" ,")+"}"}(t):"Filter"}var jv=class extends Ue{constructor(e,n,r){super(e,n,r),this.key=x.fromName(r.referenceValue)}matches(e){let n=x.comparator(e.key,this.key);return this.matchesComparison(n)}},Bv=class extends Ue{constructor(e,n){super(e,"in",n),this.keys=fA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},$v=class extends Ue{constructor(e,n){super(e,"not-in",n),this.keys=fA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function fA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>x.fromName(r.referenceValue))}var Hv=class extends Ue{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return fI(n)&&vc(n.arrayValue,this.value)}},qv=class extends Ue{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&vc(this.value.arrayValue,n)}},Gv=class extends Ue{constructor(e,n){super(e,"not-in",n)}matches(e){if(vc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!vc(this.value.arrayValue,n)}},zv=class extends Ue{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!fI(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>vc(this.value.arrayValue,r))}};var Wv=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}};function FS(t,e=null,n=[],r=[],i=null,o=null,s=null){return new Wv(t,e,n,r,i,o,s)}function pI(t){let e=B(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Uv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Lh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>vs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>vs(r)).join(",")),e.ce=n}return e.ce}function mI(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!BB(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!dA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!kS(t.startAt,e.startAt)&&kS(t.endAt,e.endAt)}function Kv(t){return x.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Yi=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function HB(t,e,n,r,i,o,s,a){return new Yi(t,e,n,r,i,o,s,a)}function pA(t){return new Yi(t)}function VS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function mA(t){return t.collectionGroup!==null}function fc(t){let e=B(t);if(e.le===null){e.le=[];let n=new Set;for(let o of e.explicitOrderBy)e.le.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new lt(xt.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.le.push(new Is(o,r))}),n.has(xt.keyField().canonicalString())||e.le.push(new Is(xt.keyField(),r))}return e.le}function jn(t){let e=B(t);return e.he||(e.he=qB(e,fc(t))),e.he}function qB(t,e){if(t.limitType==="F")return FS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Is(i.field,o)});let n=t.endAt?new _s(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new _s(t.startAt.position,t.startAt.inclusive):null;return FS(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Qv(t,e){let n=t.filters.concat([e]);return new Yi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Yv(t,e,n){return new Yi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Uh(t,e){return mI(jn(t),jn(e))&&t.limitType===e.limitType}function gA(t){return`${pI(jn(t))}|lt:${t.limitType}`}function cs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>hA(i)).join(", ")}]`),Lh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>vs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>vs(i)).join(",")),`Target(${r})`}(jn(t))}; limitType=${t.limitType})`}function jh(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):x.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of fc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let u=OS(s,a,c);return s.inclusive?u<=0:u<0}(r.startAt,fc(r),i)||r.endAt&&!function(s,a,c){let u=OS(s,a,c);return s.inclusive?u>=0:u>0}(r.endAt,fc(r),i))}(t,e)}function GB(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function yA(t){return(e,n)=>{let r=!1;for(let i of fc(t)){let o=zB(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function zB(t,e,n){let r=t.field.isKeyField()?x.comparator(e.key,n.key):function(o,s,a){let c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?ys(c,u):F()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return F()}}var ei=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Rs(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return sA(this.inner)}size(){return this.innerSize}};var WB=new Re(x.comparator);function pr(){return WB}var vA=new Re(x.comparator);function dc(...t){let e=vA;for(let n of t)e=e.insert(n.key,n);return e}function _A(t){let e=vA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function qi(){return pc()}function IA(){return pc()}function pc(){return new ei(t=>t.toString(),(t,e)=>t.isEqual(e))}var KB=new Re(x.comparator),QB=new lt(x.comparator);function X(...t){let e=QB;for(let n of t)e=e.add(n);return e}var YB=new lt(ce);function JB(){return YB}function wA(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gc(e)?"-0":e}}function EA(t){return{integerValue:""+t}}function ZB(t,e){return FB(e)?EA(e):wA(t,e)}var ws=class{constructor(){this._=void 0}};function XB(t,e,n){return t instanceof Es?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&dI(o)&&(o=hI(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof Ji?CA(t,e):t instanceof Zi?bA(t,e):function(i,o){let s=DA(i,o),a=LS(s)+LS(i.Ie);return Lv(s)&&Lv(i.Ie)?EA(a):wA(i.serializer,a)}(t,e)}function e$(t,e,n){return t instanceof Ji?CA(t,e):t instanceof Zi?bA(t,e):n}function DA(t,e){return t instanceof Ds?function(r){return Lv(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Es=class extends ws{},Ji=class extends ws{constructor(e){super(),this.elements=e}};function CA(t,e){let n=TA(e);for(let r of t.elements)n.some(i=>Hn(i,r))||n.push(r);return{arrayValue:{values:n}}}var Zi=class extends ws{constructor(e){super(),this.elements=e}};function bA(t,e){let n=TA(e);for(let r of t.elements)n=n.filter(i=>!Hn(i,r));return{arrayValue:{values:n}}}var Ds=class extends ws{constructor(e,n){super(),this.serializer=e,this.Ie=n}};function LS(t){return Ae(t.integerValue||t.doubleValue)}function TA(t){return fI(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function t$(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ji&&i instanceof Ji||r instanceof Zi&&i instanceof Zi?gs(r.elements,i.elements,Hn):r instanceof Ds&&i instanceof Ds?Hn(r.Ie,i.Ie):r instanceof Es&&i instanceof Es}(t.transform,e.transform)}var Jv=class{constructor(e,n){this.version=e,this.transformResults=n}},hr=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function ch(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Cs=class{};function SA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new _c(t.key,hr.none()):new Xi(t.key,t.data,hr.none());{let n=t.data,r=an.empty(),i=new lt(xt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new mr(t.key,r,new Ln(i.toArray()),hr.none())}}function n$(t,e,n){t instanceof Xi?function(i,o,s){let a=i.value.clone(),c=jS(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof mr?function(i,o,s){if(!ch(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=jS(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(AA(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function mc(t,e,n,r){return t instanceof Xi?function(o,s,a,c){if(!ch(o.precondition,s))return a;let u=o.value.clone(),l=BS(o.fieldTransforms,c,s);return u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof mr?function(o,s,a,c){if(!ch(o.precondition,s))return a;let u=BS(o.fieldTransforms,c,s),l=s.data;return l.setAll(AA(o)),l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(o,s,a){return ch(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function r$(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=DA(r.transform,i||null);o!=null&&(n===null&&(n=an.empty()),n.set(r.field,o))}return n||null}function US(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&gs(r,i,(o,s)=>t$(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Xi=class extends Cs{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},mr=class extends Cs{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function AA(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function jS(t,e,n){let r=new Map;we(t.length===n.length);for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,e$(s,a,n[i]))}return r}function BS(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,XB(o,s,e))}return r}var _c=class extends Cs{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Zv=class extends Cs{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Xv=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&n$(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=mc(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=mc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=IA();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let c=SA(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(H.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),X())}isEqual(e){return this.batchId===e.batchId&&gs(this.mutations,e.mutations,(n,r)=>US(n,r))&&gs(this.baseMutations,e.baseMutations,(n,r)=>US(n,r))}},e_=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){we(e.mutations.length===r.length);let i=function(){return KB}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var t_=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var n_=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Ve,ie;function i$(t){switch(t){default:return F();case m.CANCELLED:case m.UNKNOWN:case m.DEADLINE_EXCEEDED:case m.RESOURCE_EXHAUSTED:case m.INTERNAL:case m.UNAVAILABLE:case m.UNAUTHENTICATED:return!1;case m.INVALID_ARGUMENT:case m.NOT_FOUND:case m.ALREADY_EXISTS:case m.PERMISSION_DENIED:case m.FAILED_PRECONDITION:case m.ABORTED:case m.OUT_OF_RANGE:case m.UNIMPLEMENTED:case m.DATA_LOSS:return!0}}function RA(t){if(t===void 0)return $n("GRPC error has no .code"),m.UNKNOWN;switch(t){case Ve.OK:return m.OK;case Ve.CANCELLED:return m.CANCELLED;case Ve.UNKNOWN:return m.UNKNOWN;case Ve.DEADLINE_EXCEEDED:return m.DEADLINE_EXCEEDED;case Ve.RESOURCE_EXHAUSTED:return m.RESOURCE_EXHAUSTED;case Ve.INTERNAL:return m.INTERNAL;case Ve.UNAVAILABLE:return m.UNAVAILABLE;case Ve.UNAUTHENTICATED:return m.UNAUTHENTICATED;case Ve.INVALID_ARGUMENT:return m.INVALID_ARGUMENT;case Ve.NOT_FOUND:return m.NOT_FOUND;case Ve.ALREADY_EXISTS:return m.ALREADY_EXISTS;case Ve.PERMISSION_DENIED:return m.PERMISSION_DENIED;case Ve.FAILED_PRECONDITION:return m.FAILED_PRECONDITION;case Ve.ABORTED:return m.ABORTED;case Ve.OUT_OF_RANGE:return m.OUT_OF_RANGE;case Ve.UNIMPLEMENTED:return m.UNIMPLEMENTED;case Ve.DATA_LOSS:return m.DATA_LOSS;default:return F()}}(ie=Ve||(Ve={}))[ie.OK=0]="OK",ie[ie.CANCELLED=1]="CANCELLED",ie[ie.UNKNOWN=2]="UNKNOWN",ie[ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ie[ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ie[ie.NOT_FOUND=5]="NOT_FOUND",ie[ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",ie[ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",ie[ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",ie[ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ie[ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ie[ie.ABORTED=10]="ABORTED",ie[ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",ie[ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",ie[ie.INTERNAL=13]="INTERNAL",ie[ie.UNAVAILABLE=14]="UNAVAILABLE",ie[ie.DATA_LOSS=15]="DATA_LOSS";var $S=null;function o$(){return new TextEncoder}var s$=new $i([4294967295,4294967295],0);function HS(t){let e=o$().encode(t),n=new TS;return n.update(e),new Uint8Array(n.digest())}function qS(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new $i([n,r],0),new $i([i,o],0)]}var r_=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Gi(`Invalid padding: ${n}`);if(r<0)throw new Gi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Gi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Gi(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=$i.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply($i.fromNumber(r)));return i.compare(s$)===1&&(i=new $i([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=HS(e),[r,i]=qS(n);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);if(!this.Ae(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Te===0)return;let n=HS(e),[r,i]=qS(n);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);this.Re(s)}}Re(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Gi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var yh=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Ic.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(H.min(),i,new Re(ce),pr(),X())}},Ic=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,X(),X(),X())}};var fs=class{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}},vh=class{constructor(e,n){this.targetId=e,this.fe=n}},_h=class{constructor(e,n,r=yt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Ih=class{constructor(){this.ge=0,this.pe=zS(),this.ye=yt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=X(),n=X(),r=X();return this.pe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:F()}}),new Ic(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=zS()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,we(this.ge>=0)}Le(){this.Se=!0,this.we=!0}},i_=class{constructor(e){this.Be=e,this.ke=new Map,this.qe=pr(),this.Qe=GS(),this.Ke=new Re(ce)}$e(e){for(let n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(let n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{let r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:F()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){let n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){let o=i.target;if(Kv(o))if(r===0){let s=new x(o.path);this.We(n,s,un.newNoDocument(s,H.min()))}else we(r===1);else{let s=this.Ze(n);if(s!==r){let a=this.Xe(e),c=a?this.et(a,e,s):1;if(c!==0){this.He(n);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,u)}$S?.tt(function(l,d,h,p,g){var I,w,A,te,K,ve;let Ye={localCacheCount:l,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},ue=d.unchangedNames;return ue&&(Ye.bloomFilter={applied:g===0,hashCount:(I=ue?.hashCount)!==null&&I!==void 0?I:0,bitmapLength:(te=(A=(w=ue?.bits)===null||w===void 0?void 0:w.bitmap)===null||A===void 0?void 0:A.length)!==null&&te!==void 0?te:0,padding:(ve=(K=ue?.bits)===null||K===void 0?void 0:K.padding)!==null&&ve!==void 0?ve:0,mightContain:rt=>{var dn;return(dn=p?.mightContain(rt))!==null&&dn!==void 0&&dn}}),Ye}(s,e.fe,this.Be.nt(),a,c))}}}}Xe(e){let n=e.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=Xr(r).toUint8Array()}catch(c){if(c instanceof ph)return ms("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new r_(s,i,o)}catch(c){return ms(c instanceof Gi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){let r=this.Be.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Be.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(n,o,null),i++)}),i}it(e){let n=new Map;this.ke.forEach((o,s)=>{let a=this.Ye(s);if(a){if(o.current&&Kv(a.target)){let c=new x(a.target.path);this.qe.get(c)!==null||this.st(s,c)||this.We(s,c,un.newNoDocument(c,e))}o.De&&(n.set(s,o.ve()),o.Fe())}});let r=X();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let u=this.Ye(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(e));let i=new yh(e,n,this.Ke,this.qe,r);return this.qe=pr(),this.Qe=GS(),this.Ke=new Re(ce),i}Ue(e,n){if(!this.je(e))return;let r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;let i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new Ih,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new lt(ce),this.Qe=this.Qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||b("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.ke.get(e);return n&&n.be?null:this.Be._t(e)}He(e){this.ke.set(e,new Ih),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}};function GS(){return new Re(x.comparator)}function zS(){return new Re(x.comparator)}var a$={asc:"ASCENDING",desc:"DESCENDING"},c$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},u$={and:"AND",or:"OR"},o_=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function s_(t,e){return t.useProto3Json||Lh(e)?e:{value:e}}function wh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function MA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function l$(t,e){return wh(t,e.toTimestamp())}function Bn(t){return we(!!t),H.fromTimestamp(function(n){let r=fr(n);return new ye(r.seconds,r.nanos)}(t))}function gI(t,e){return a_(t,e).canonicalString()}function a_(t,e){let n=function(i){return new be(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function xA(t){let e=be.fromString(t);return we(FA(e)),e}function c_(t,e){return gI(t.databaseId,e.path)}function Iv(t,e){let n=xA(e);if(n.get(1)!==t.databaseId.projectId)throw new T(m.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new T(m.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new x(PA(n))}function NA(t,e){return gI(t.databaseId,e)}function d$(t){let e=xA(t);return e.length===4?be.emptyPath():PA(e)}function u_(t){return new be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function PA(t){return we(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function WS(t,e,n){return{name:c_(t,e),fields:n.value.mapValue.fields}}function h$(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:F()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,l){return u.useProto3Json?(we(l===void 0||typeof l=="string"),yt.fromBase64String(l||"")):(we(l===void 0||l instanceof Buffer||l instanceof Uint8Array),yt.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){let l=u.code===void 0?m.UNKNOWN:RA(u.code);return new T(l,u.message||"")}(s);n=new _h(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Iv(t,r.document.name),o=Bn(r.document.updateTime),s=r.document.createTime?Bn(r.document.createTime):H.min(),a=new an({mapValue:{fields:r.document.fields}}),c=un.newFoundDocument(i,o,s,a),u=r.targetIds||[],l=r.removedTargetIds||[];n=new fs(u,l,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Iv(t,r.document),o=r.readTime?Bn(r.readTime):H.min(),s=un.newNoDocument(i,o),a=r.removedTargetIds||[];n=new fs([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Iv(t,r.document),o=r.removedTargetIds||[];n=new fs([],o,i,null)}else{if(!("filter"in e))return F();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new n_(i,o),a=r.targetId;n=new vh(a,s)}}return n}function f$(t,e){let n;if(e instanceof Xi)n={update:WS(t,e.key,e.value)};else if(e instanceof _c)n={delete:c_(t,e.key)};else if(e instanceof mr)n={update:WS(t,e.key,e.data),updateMask:E$(e.fieldMask)};else{if(!(e instanceof Zv))return F();n={verify:c_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Es)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ji)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Zi)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ds)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw F()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:l$(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:F()}(t,e.precondition)),n}function p$(t,e){return t&&t.length>0?(we(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?Bn(i.updateTime):Bn(o);return s.isEqual(H.min())&&(s=Bn(o)),new Jv(s,i.transformResults||[])}(n,e))):[]}function m$(t,e){return{documents:[NA(t,e.path)]}}function g$(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=NA(t,i);let o=function(u){if(u.length!==0)return kA(ln.create(u,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(l=>function(h){return{field:us(h.field),direction:_$(h.dir)}}(l))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=s_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ut:n,parent:i}}function y$(t){let e=d$(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){we(r===1);let l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let o=[];n.where&&(o=function(d){let h=OA(d);return h instanceof ln&&lA(h)?h.getFilters():[h]}(n.where));let s=[];n.orderBy&&(s=function(d){return d.map(h=>function(g){return new Is(ls(g.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,Lh(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(d){let h=!!d.before,p=d.values||[];return new _s(p,h)}(n.startAt));let u=null;return n.endAt&&(u=function(d){let h=!d.before,p=d.values||[];return new _s(p,h)}(n.endAt)),HB(e,i,s,o,a,"F",c,u)}function v$(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return F()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function OA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=ls(n.unaryFilter.field);return Ue.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ls(n.unaryFilter.field);return Ue.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ls(n.unaryFilter.field);return Ue.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ls(n.unaryFilter.field);return Ue.create(s,"!=",{nullValue:"NULL_VALUE"});default:return F()}}(t):t.fieldFilter!==void 0?function(n){return Ue.create(ls(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return F()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ln.create(n.compositeFilter.filters.map(r=>OA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return F()}}(n.compositeFilter.op))}(t):F()}function _$(t){return a$[t]}function I$(t){return c$[t]}function w$(t){return u$[t]}function us(t){return{fieldPath:t.canonicalString()}}function ls(t){return xt.fromServerFormat(t.fieldPath)}function kA(t){return t instanceof Ue?function(n){if(n.op==="=="){if(PS(n.value))return{unaryFilter:{field:us(n.field),op:"IS_NAN"}};if(NS(n.value))return{unaryFilter:{field:us(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(PS(n.value))return{unaryFilter:{field:us(n.field),op:"IS_NOT_NAN"}};if(NS(n.value))return{unaryFilter:{field:us(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:us(n.field),op:I$(n.op),value:n.value}}}(t):t instanceof ln?function(n){let r=n.getFilters().map(i=>kA(i));return r.length===1?r[0]:{compositeFilter:{op:w$(n.op),filters:r}}}(t):F()}function E$(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function FA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var wc=class t{constructor(e,n,r,i,o=H.min(),s=H.min(),a=yt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var l_=class{constructor(e){this.ct=e}};function D$(t){let e=y$({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Yv(e,e.limit,"L"):e}var Eh=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Ae(e.integerValue));else if("doubleValue"in e){let r=Ae(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),gc(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"&&(r=fr(r)),n.At(`${r.seconds||""}`),n.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Xr(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?aA(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):F()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),x.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};Eh.bt=new Eh;var d_=class{constructor(){this._n=new h_}addToCollectionParentIndex(e,n){return this._n.add(n),y.resolve()}getCollectionParents(e,n){return y.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return y.resolve()}deleteFieldIndex(e,n){return y.resolve()}deleteAllFieldIndexes(e){return y.resolve()}createTargetIndexes(e,n){return y.resolve()}getDocumentsMatchingTarget(e,n){return y.resolve(null)}getIndexType(e,n){return y.resolve(0)}getFieldIndexes(e,n){return y.resolve([])}getNextCollectionGroupToUpdate(e){return y.resolve(null)}getMinOffset(e,n){return y.resolve(Ki.min())}getMinOffsetFromCollectionGroup(e,n){return y.resolve(Ki.min())}updateCollectionGroup(e,n,r){return y.resolve()}updateIndexEntries(e,n){return y.resolve()}},h_=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new lt(be.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new lt(be.comparator)).toArray()}};var iK=new Uint8Array(0);var Vn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Vn.DEFAULT_COLLECTION_PERCENTILE=10,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vn.DEFAULT=new Vn(41943040,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vn.DISABLED=new Vn(-1,0,0);var Ec=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var f_=class{constructor(){this.changes=new ei(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,un.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?y.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var p_=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var m_=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&mc(r.mutation,i,Ln.empty(),ye.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,X()).next(()=>r))}getLocalViewOfDocuments(e,n,r=X()){let i=qi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=dc();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=qi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,X()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=pr(),s=pc(),a=function(){return pc()}();return n.forEach((c,u)=>{let l=r.get(u.key);i.has(u.key)&&(l===void 0||l.mutation instanceof mr)?o=o.insert(u.key,u):l!==void 0?(s.set(u.key,l.mutation.getFieldMask()),mc(l.mutation,u,l.mutation.getFieldMask(),ye.now())):s.set(u.key,Ln.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,l)=>s.set(u,l)),n.forEach((u,l)=>{var d;return a.set(u,new p_(l,(d=s.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let r=pc(),i=new Re((s,a)=>s-a),o=X();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(c=>{let u=n.get(c);if(u===null)return;let l=r.get(c)||Ln.empty();l=a.applyToLocalView(u,l),r.set(c,l);let d=(i.get(a.batchId)||X()).add(c);i=i.insert(a.batchId,d)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,l=c.value,d=IA();l.forEach(h=>{if(!o.has(h)){let p=SA(n.get(h),r.get(h));p!==null&&d.set(h,p),o=o.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,d))}return y.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return x.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):mA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):y.resolve(qi()),a=-1,c=o;return s.next(u=>y.forEach(u,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),o.get(l)?y.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{c=c.insert(l,h)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,X())).next(l=>({batchId:a,changes:_A(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new x(n)).next(r=>{let i=dc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=dc();return this.indexManager.getCollectionParents(e,o).next(a=>y.forEach(a,c=>{let u=function(d,h){return new Yi(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(l=>{l.forEach((d,h)=>{s=s.insert(d,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((c,u)=>{let l=u.getKey();s.get(l)===null&&(s=s.insert(l,un.newInvalidDocument(l)))});let a=dc();return s.forEach((c,u)=>{let l=o.get(c);l!==void 0&&mc(l.mutation,u,Ln.empty(),ye.now()),jh(n,u)&&(a=a.insert(c,u))}),a})}};var g_=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return y.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Bn(i.createTime)}}(n)),y.resolve()}getNamedQuery(e,n){return y.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:D$(i.bundledQuery),readTime:Bn(i.readTime)}}(n)),y.resolve()}};var y_=class{constructor(){this.overlays=new Re(x.comparator),this.hr=new Map}getOverlay(e,n){return y.resolve(this.overlays.get(n))}getOverlays(e,n){let r=qi();return y.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),y.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(r)),y.resolve()}getOverlaysForCollection(e,n,r){let i=qi(),o=n.length+1,s=new x(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return y.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Re((u,l)=>u-l),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let l=o.get(u.largestBatchId);l===null&&(l=qi(),o=o.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}let a=qi(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>a.set(u,l)),!(a.size()>=i)););return y.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new t_(n,r));let o=this.hr.get(n);o===void 0&&(o=X(),this.hr.set(n,o)),this.hr.set(n,o.add(r.key))}};var Dc=class{constructor(){this.Pr=new lt(Le.Ir),this.Tr=new lt(Le.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new Le(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Le(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new x(new be([])),r=new Le(n,e),i=new Le(n,e+1),o=[];return this.Tr.forEachInRange([r,i],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new x(new be([])),r=new Le(n,e),i=new Le(n,e+1),o=X();return this.Tr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Le(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Le=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return x.comparator(e.key,n.key)||ce(e.pr,n.pr)}static Er(e,n){return ce(e.pr,n.pr)||x.comparator(e.key,n.key)}};var v_=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new lt(Le.Ir)}checkEmpty(e){return y.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Xv(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.wr=this.wr.add(new Le(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return y.resolve(s)}lookupMutationBatch(e,n){return y.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),o=i<0?0:i;return y.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return y.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Le(n,0),i=new Le(n,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([r,i],s=>{let a=this.Sr(s.pr);o.push(a)}),y.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new lt(ce);return n.forEach(i=>{let o=new Le(i,0),s=new Le(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{r=r.add(a.pr)})}),y.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;x.isDocumentKey(o)||(o=o.child(""));let s=new Le(new x(o),0),a=new lt(ce);return this.wr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.pr)),!0)},s),y.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){we(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return y.forEach(n.mutations,i=>{let o=new Le(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new Le(n,0),i=this.wr.firstAfterOrEqual(r);return y.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,y.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var __=class{constructor(e){this.vr=e,this.docs=function(){return new Re(x.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return y.resolve(r?r.document.mutableCopy():un.newInvalidDocument(n))}getEntries(e,n){let r=pr();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():un.newInvalidDocument(i))}),y.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=pr(),s=n.path,a=new x(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:l}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||OB(PB(l),r)<=0||(i.has(l.key)||jh(n,l))&&(o=o.insert(l.key,l.mutableCopy()))}return y.resolve(o)}getAllFromCollectionGroup(e,n,r,i){F()}Fr(e,n){return y.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new I_(this)}getSize(e){return y.resolve(this.size)}},I_=class extends f_{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),y.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var w_=class{constructor(e){this.persistence=e,this.Mr=new ei(n=>pI(n),mI),this.lastRemoteSnapshotVersion=H.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Dc,this.targetCount=0,this.Lr=Ec.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),y.resolve()}getLastRemoteSnapshotVersion(e){return y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return y.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),y.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),y.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new Ec(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,y.resolve()}updateTargetData(e,n){return this.qn(n),y.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,y.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),y.waitFor(o).next(()=>i)}getTargetCount(e){return y.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return y.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),y.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),y.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),y.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return y.resolve(r)}containsKey(e,n){return y.resolve(this.Nr.containsKey(n))}};var E_=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new oA(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new w_(this),this.indexManager=new d_,this.remoteDocumentCache=function(i){return new __(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new l_(n),this.$r=new g_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new y_,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new v_(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){b("MemoryPersistence","Starting transaction:",e);let i=new D_(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(o=>this.referenceDelegate.Wr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gr(e,n){return y.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}},D_=class extends Nv{constructor(e){super(),this.currentSequenceNumber=e}},C_=class t{constructor(e){this.persistence=e,this.zr=new Dc,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw F()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),y.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),y.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),y.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Jr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return y.forEach(this.Jr,r=>{let i=x.fromPath(r);return this.Yr(e,i).next(o=>{o||n.removeEntry(i,H.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return y.or([()=>y.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var b_=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=X(),i=X();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var T_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var S_=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return cC()?8:hh.v(Te())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ji(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new T_;return this.Ji(e,n,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,n,s,a.size)})}).next(()=>o.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(lc()<=Z.DEBUG&&b("QueryEngine","SDK will not create cache indexes for query:",cs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),y.resolve()):(lc()<=Z.DEBUG&&b("QueryEngine","Query:",cs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(lc()<=Z.DEBUG&&b("QueryEngine","The SDK decides to create cache indexes for query:",cs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jn(n))):y.resolve())}ji(e,n){if(VS(n))return y.resolve(null);let r=jn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Yv(n,null,"F"),r=jn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=X(...o);return this.zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.Zi(n,a);return this.Xi(n,u,s,c.readTime)?this.ji(e,Yv(n,null,"F")):this.es(e,u,n,c)}))})))}Hi(e,n,r,i){return VS(n)||i.isEqual(H.min())?y.resolve(null):this.zi.getDocuments(e,r).next(o=>{let s=this.Zi(n,o);return this.Xi(n,s,r,i)?y.resolve(null):(lc()<=Z.DEBUG&&b("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),cs(n)),this.es(e,s,n,NB(i,-1)).next(a=>a))})}Zi(e,n){let r=new lt(yA(e));return n.forEach((i,o)=>{jh(e,o)&&(r=r.add(o))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ji(e,n,r){return lc()<=Z.DEBUG&&b("QueryEngine","Using full collection scan to execute query:",cs(n)),this.zi.getDocumentsMatchingQuery(e,n,Ki.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var A_=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new Re(ce),this.rs=new ei(o=>pI(o),mI),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new m_(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function C$(t,e,n,r){return new A_(t,e,n,r)}function VA(t,e){return f(this,null,function*(){let n=B(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=X();for(let u of i){s.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}for(let u of o){a.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}return n.localDocuments.getDocuments(r,c).next(u=>({us:u,removedBatchIds:s,addedBatchIds:a}))})})})}function b$(t,e){let n=B(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,u,l){let d=u.batch,h=d.keys(),p=y.resolve();return h.forEach(g=>{p=p.next(()=>l.getEntry(c,g)).next(I=>{let w=u.docVersions.get(g);we(w!==null),I.version.compareTo(w)<0&&(d.applyToRemoteDocument(I,u),I.isValidDocument()&&(I.setReadTime(u.commitVersion),l.addEntry(I)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=X();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function LA(t){let e=B(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function T$(t,e){let n=B(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let a=[];e.targetChanges.forEach((l,d)=>{let h=i.get(d);if(!h)return;a.push(n.Qr.removeMatchingKeys(o,l.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(o,l.addedDocuments,d)));let p=h.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(yt.EMPTY_BYTE_STRING,H.min()).withLastLimboFreeSnapshotVersion(H.min()):l.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(l.resumeToken,r)),i=i.insert(d,p),function(I,w,A){return I.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(h,p,l)&&a.push(n.Qr.updateTargetData(o,p))});let c=pr(),u=X();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,l))}),a.push(S$(o,s,e.documentUpdates).next(l=>{c=l.cs,u=l.ls})),!r.isEqual(H.min())){let l=n.Qr.getLastRemoteSnapshotVersion(o).next(d=>n.Qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(l)}return y.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(n.ns=i,o))}function S$(t,e,n){let r=X(),i=X();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=pr();return n.forEach((a,c)=>{let u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(H.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):b("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{cs:s,ls:i}})}function A$(t,e){let n=B(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function R$(t,e){let n=B(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(o=>o?(i=o,y.resolve(i)):n.Qr.allocateTargetId(r).next(s=>(i=new wc(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function R_(t,e,n){return f(this,null,function*(){let r=B(t),i=r.ns.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Rc(s))throw s;b("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function KS(t,e,n){let r=B(t),i=H.min(),o=X();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,l){let d=B(c),h=d.rs.get(l);return h!==void 0?y.resolve(d.ns.get(h)):d.Qr.getTargetData(u,l)}(r,s,jn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ts.getDocumentsMatchingQuery(s,e,n?i:H.min(),n?o:X())).next(a=>(M$(r,GB(e),a),{documents:a,hs:o})))}function M$(t,e,n){let r=t.ss.get(e)||H.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.ss.set(e,r)}var Dh=class{constructor(){this.activeTargetIds=JB()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var M_=class{constructor(){this.no=new Dh,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Dh,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var x_=class{io(e){}shutdown(){}};var Ch=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){b("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){b("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var sh=null;function wv(){return sh===null?sh=function(){return 268435456+Math.round(2147483648*Math.random())}():sh++,"0x"+sh.toString(16)}var x$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var N_=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}};var ut="WebChannelConnection",P_=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${o}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get wo(){return!1}So(n,r,i,o,s){let a=wv(),c=this.bo(n,r.toUriEncodedString());b("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let u={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(u,o,s),this.Co(n,c,u,i).then(l=>(b("RestConnection",`Received RPC '${n}' ${a}: `,l),l),l=>{throw ms("RestConnection",`RPC '${n}' ${a} failed with error: `,l,"url: ",c,"request:",i),l})}vo(n,r,i,o,s,a){return this.So(n,r,i,o,s)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+As}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}bo(n,r){let i=x$[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){let o=wv();return new Promise((s,a)=>{let c=new bS;c.setWithCredentials(!0),c.listenOnce(DS.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case ih.NO_ERROR:let l=c.getResponseJson();b(ut,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(l)),s(l);break;case ih.TIMEOUT:b(ut,`RPC '${e}' ${o} timed out`),a(new T(m.DEADLINE_EXCEEDED,"Request time out"));break;case ih.HTTP_ERROR:let d=c.getStatus();if(b(ut,`RPC '${e}' ${o} failed with status:`,d,"response text:",c.getResponseText()),d>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);let p=h?.error;if(p&&p.status&&p.message){let g=function(w){let A=w.toLowerCase().replace(/_/g,"-");return Object.values(m).indexOf(A)>=0?A:m.UNKNOWN}(p.status);a(new T(g,p.message))}else a(new T(m.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new T(m.UNAVAILABLE,"Connection failed."));break;default:F()}}finally{b(ut,`RPC '${e}' ${o} completed.`)}});let u=JSON.stringify(i);b(ut,`RPC '${e}' ${o} sending request:`,i),c.send(n,"POST",u,r,15)})}Fo(e,n,r){let i=wv(),o=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=wS(),a=ES(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let l=o.join("");b(ut,`Creating RPC '${e}' stream ${i}: ${l}`,c);let d=s.createWebChannel(l,c),h=!1,p=!1,g=new N_({lo:w=>{p?b(ut,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(h||(b(ut,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),b(ut,`RPC '${e}' stream ${i} sending:`,w),d.send(w))},ho:()=>d.close()}),I=(w,A,te)=>{w.listen(A,K=>{try{te(K)}catch(ve){setTimeout(()=>{throw ve},0)}})};return I(d,uc.EventType.OPEN,()=>{p||b(ut,`RPC '${e}' stream ${i} transport opened.`)}),I(d,uc.EventType.CLOSE,()=>{p||(p=!0,b(ut,`RPC '${e}' stream ${i} transport closed`),g.Vo())}),I(d,uc.EventType.ERROR,w=>{p||(p=!0,ms(ut,`RPC '${e}' stream ${i} transport errored:`,w),g.Vo(new T(m.UNAVAILABLE,"The operation could not be completed")))}),I(d,uc.EventType.MESSAGE,w=>{var A;if(!p){let te=w.data[0];we(!!te);let K=te,ve=K.error||((A=K[0])===null||A===void 0?void 0:A.error);if(ve){b(ut,`RPC '${e}' stream ${i} received error:`,ve);let Ye=ve.status,ue=function(ni){let ro=Ve[ni];if(ro!==void 0)return RA(ro)}(Ye),rt=ve.message;ue===void 0&&(ue=m.INTERNAL,rt="Unknown error status: "+Ye+" with message "+ve.message),p=!0,g.Vo(new T(ue,rt)),d.close()}else b(ut,`RPC '${e}' stream ${i} received:`,te),g.mo(te)}}),I(a,CS.STAT_EVENT,w=>{w.stat===_v.PROXY?b(ut,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===_v.NOPROXY&&b(ut,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.Ro()},0),g}};function Ev(){return typeof document<"u"?document:null}function Bh(t){return new o_(t,!0)}var bh=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=o,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();let n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&b("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}};var Th=class{constructor(e,n,r,i,o,s,a,c){this.oi=e,this.$o=r,this.Uo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new bh(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}stop(){return f(this,null,function*(){this.Ho()&&(yield this.close(0))})}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){return f(this,null,function*(){if(this.Jo())return this.close(0)})}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){return f(this,null,function*(){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===m.RESOURCE_EXHAUSTED?($n(n.toString()),$n("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===m.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.To(n)})}i_(){}auth(){this.state=1;let e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{let i=new T(m.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){let r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(()=>f(this,null,function*(){this.state=0,this.start()}))}__(e){return b("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(b("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},O_=class extends Th{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();let n=h$(this.serializer,e),r=function(o){if(!("targetChange"in o))return H.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?H.min():s.readTime?Bn(s.readTime):H.min()}(e);return this.listener.u_(n,r)}c_(e){let n={};n.database=u_(this.serializer),n.addTarget=function(o,s){let a,c=s.target;if(a=Kv(c)?{documents:m$(o,c)}:{query:g$(o,c).ut},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=MA(o,s.resumeToken);let u=s_(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(H.min())>0){a.readTime=wh(o,s.snapshotVersion.toTimestamp());let u=s_(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=v$(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){let n={};n.database=u_(this.serializer),n.removeTarget=e,this.t_(n)}},k_=class extends Th{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(we(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();let n=p$(e.writeResults,e.commitTime),r=Bn(e.commitTime);return this.listener.T_(r,n)}return we(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){let e={};e.database=u_(this.serializer),this.t_(e)}I_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>f$(this.serializer,r))};this.t_(n)}};var F_=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new T(m.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(e,a_(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===m.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new T(m.UNKNOWN,o.toString())})}vo(e,n,r,i,o){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.vo(e,a_(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===m.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new T(m.UNKNOWN,s.toString())})}terminate(){this.A_=!0,this.connection.terminate()}};var V_=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?($n(n),this.g_=!1):b("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}};var L_=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=o,this.M_.io(s=>{r.enqueueAndForget(()=>f(this,null,function*(){no(this)&&(b("RemoteStore","Restarting streams for network reachability change."),yield function(c){return f(this,null,function*(){let u=B(c);u.v_.add(4),yield Mc(u),u.x_.set("Unknown"),u.v_.delete(4),yield $h(u)})}(this))}))}),this.x_=new V_(r,i)}};function $h(t){return f(this,null,function*(){if(no(t))for(let e of t.F_)yield e(!0)})}function Mc(t){return f(this,null,function*(){for(let e of t.F_)yield e(!1)})}function UA(t,e){let n=B(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),II(n)?_I(n):Ms(n).Jo()&&vI(n,e))}function yI(t,e){let n=B(t),r=Ms(n);n.C_.delete(e),r.Jo()&&jA(n,e),n.C_.size===0&&(r.Jo()?r.Xo():no(n)&&n.x_.set("Unknown"))}function vI(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(H.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ms(t).c_(e)}function jA(t,e){t.O_.Oe(e),Ms(t).l_(e)}function _I(t){t.O_=new i_({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Ms(t).start(),t.x_.p_()}function II(t){return no(t)&&!Ms(t).Ho()&&t.C_.size>0}function no(t){return B(t).v_.size===0}function BA(t){t.O_=void 0}function N$(t){return f(this,null,function*(){t.C_.forEach((e,n)=>{vI(t,e)})})}function P$(t,e){return f(this,null,function*(){BA(t),II(t)?(t.x_.S_(e),_I(t)):t.x_.set("Unknown")})}function O$(t,e,n){return f(this,null,function*(){if(t.x_.set("Online"),e instanceof _h&&e.state===2&&e.cause)try{yield function(i,o){return f(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.C_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.C_.delete(a),i.O_.removeTarget(a))})}(t,e)}catch(r){b("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Sh(t,r)}else if(e instanceof fs?t.O_.$e(e):e instanceof vh?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(H.min()))try{let r=yield LA(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.O_.it(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let l=o.C_.get(u);l&&o.C_.set(u,l.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{let l=o.C_.get(c);if(!l)return;o.C_.set(c,l.withResumeToken(yt.EMPTY_BYTE_STRING,l.snapshotVersion)),jA(o,c);let d=new wc(l.target,c,u,l.sequenceNumber);vI(o,d)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){b("RemoteStore","Failed to raise snapshot:",r),yield Sh(t,r)}})}function Sh(t,e,n){return f(this,null,function*(){if(!Rc(e))throw e;t.v_.add(1),yield Mc(t),t.x_.set("Offline"),n||(n=()=>LA(t.localStore)),t.asyncQueue.enqueueRetryable(()=>f(this,null,function*(){b("RemoteStore","Retrying IndexedDB access"),yield n(),t.v_.delete(1),yield $h(t)}))})}function $A(t,e){return e().catch(n=>Sh(t,n,e))}function Hh(t){return f(this,null,function*(){let e=B(t),n=ti(e),r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;k$(e);)try{let i=yield A$(e.localStore,r);if(i===null){e.D_.length===0&&n.Xo();break}r=i.batchId,F$(e,i)}catch(i){yield Sh(e,i)}HA(e)&&qA(e)})}function k$(t){return no(t)&&t.D_.length<10}function F$(t,e){t.D_.push(e);let n=ti(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function HA(t){return no(t)&&!ti(t).Ho()&&t.D_.length>0}function qA(t){ti(t).start()}function V$(t){return f(this,null,function*(){ti(t).d_()})}function L$(t){return f(this,null,function*(){let e=ti(t);for(let n of t.D_)e.I_(n.mutations)})}function U$(t,e,n){return f(this,null,function*(){let r=t.D_.shift(),i=e_.from(r,e,n);yield $A(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Hh(t)})}function j$(t,e){return f(this,null,function*(){e&&ti(t).P_&&(yield function(r,i){return f(this,null,function*(){if(function(s){return i$(s)&&s!==m.ABORTED}(i.code)){let o=r.D_.shift();ti(r).Zo(),yield $A(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Hh(r)}})}(t,e)),HA(t)&&qA(t)})}function QS(t,e){return f(this,null,function*(){let n=B(t);n.asyncQueue.verifyOperationInProgress(),b("RemoteStore","RemoteStore received new credentials");let r=no(n);n.v_.add(3),yield Mc(n),r&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield $h(n)})}function B$(t,e){return f(this,null,function*(){let n=B(t);e?(n.v_.delete(2),yield $h(n)):e||(n.v_.add(2),yield Mc(n),n.x_.set("Unknown"))})}function Ms(t){return t.N_||(t.N_=function(n,r,i){let o=B(n);return o.R_(),new O_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:N$.bind(null,t),To:P$.bind(null,t),u_:O$.bind(null,t)}),t.F_.push(e=>f(this,null,function*(){e?(t.N_.Zo(),II(t)?_I(t):t.x_.set("Unknown")):(yield t.N_.stop(),BA(t))}))),t.N_}function ti(t){return t.L_||(t.L_=function(n,r,i){let o=B(n);return o.R_(),new k_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:V$.bind(null,t),To:j$.bind(null,t),E_:L$.bind(null,t),T_:U$.bind(null,t)}),t.F_.push(e=>f(this,null,function*(){e?(t.L_.Zo(),yield Hh(t)):(yield t.L_.stop(),t.D_.length>0&&(b("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))}))),t.L_}var U_=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new cn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new T(m.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function wI(t,e){if($n("AsyncQueue",`${e}: ${t}`),Rc(t))return new T(m.UNAVAILABLE,`${e}: ${t}`);throw t}var Ah=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||x.comparator(n.key,r.key):(n,r)=>x.comparator(n.key,r.key),this.keyedMap=dc(),this.sortedSet=new Re(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Rh=class{constructor(){this.B_=new Re(x.comparator)}track(e){let n=e.doc.key,r=this.B_.get(n);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(n,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(n):e.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):F():this.B_=this.B_.insert(n,e)}k_(){let e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}},bs=class t{constructor(e,n,r,i,o,s,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Ah.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var j_=class{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}},B_=class{constructor(){this.queries=new ei(e=>gA(e),Uh),this.onlineState="Unknown",this.W_=new Set}};function $$(t,e){return f(this,null,function*(){let n=B(t),r=3,i=e.query,o=n.queries.get(i);o?!o.K_()&&e.U_()&&(r=2):(o=new j_,r=e.U_()?0:1);try{switch(r){case 0:o.q_=yield n.onListen(i,!0);break;case 1:o.q_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=wI(s,`Initialization of query '${cs(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.Q_.push(e),e.G_(n.onlineState),o.q_&&e.z_(o.q_)&&EI(n)})}function H$(t,e){return f(this,null,function*(){let n=B(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.Q_.indexOf(e);s>=0&&(o.Q_.splice(s,1),o.Q_.length===0?i=e.U_()?0:1:!o.K_()&&e.U_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function q$(t,e){let n=B(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.Q_)a.z_(i)&&(r=!0);s.q_=i}}r&&EI(n)}function G$(t,e,n){let r=B(t),i=r.queries.get(e);if(i)for(let o of i.Q_)o.onError(n);r.queries.delete(e)}function EI(t){t.W_.forEach(e=>{e.next()})}var $_,YS;(YS=$_||($_={})).j_="default",YS.Cache="cache";var H_=class{constructor(e,n,r){this.query=e,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}z_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new bs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),n=!0):this.X_(e,this.onlineState)&&(this.ea(e),n=!0),this.Y_=e,n}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),n=!0),n}X_(e,n){if(!e.fromCache||!this.U_())return!0;let r=n!=="Offline";return(!this.options.ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Z_(e){if(e.docChanges.length>0)return!0;let n=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ea(e){e=bs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==$_.Cache}};var Mh=class{constructor(e){this.key=e}},xh=class{constructor(e){this.key=e}},q_=class{constructor(e,n){this.query=e,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=X(),this.mutatedKeys=X(),this.ha=yA(e),this.Pa=new Ah(this.ha)}get Ia(){return this.ua}Ta(e,n){let r=n?n.Ea:new Rh,i=n?n.Pa:this.Pa,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{let h=i.get(l),p=jh(this.query,d)?d:null,g=!!h&&this.mutatedKeys.has(h.key),I=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations),w=!1;h&&p?h.data.isEqual(p.data)?g!==I&&(r.track({type:3,doc:p}),w=!0):this.da(h,p)||(r.track({type:2,doc:p}),w=!0,(c&&this.ha(p,c)>0||u&&this.ha(p,u)<0)&&(a=!0)):!h&&p?(r.track({type:0,doc:p}),w=!0):h&&!p&&(r.track({type:1,doc:h}),w=!0,(c||u)&&(a=!0)),w&&(p?(s=s.add(p),o=I?o.add(l):o.delete(l)):(s=s.delete(l),o=o.delete(l)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let l=this.query.limitType==="F"?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{Pa:s,Ea:r,Xi:a,mutatedKeys:o}}da(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;let s=e.Ea.k_();s.sort((l,d)=>function(p,g){let I=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return F()}};return I(p)-I(g)}(l.type,d.type)||this.ha(l.doc,d.doc)),this.Aa(r),i=i!=null&&i;let a=n&&!i?this.Ra():[],c=this.la.size===0&&this.current&&!i?1:0,u=c!==this.ca;return this.ca=c,s.length!==0||u?{snapshot:new bs(this.query,e.Pa,o,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new Rh,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=e.current)}Ra(){if(!this.current)return[];let e=this.la;this.la=X(),this.Pa.forEach(r=>{this.ma(r.key)&&(this.la=this.la.add(r.key))});let n=[];return e.forEach(r=>{this.la.has(r)||n.push(new xh(r))}),this.la.forEach(r=>{e.has(r)||n.push(new Mh(r))}),n}fa(e){this.ua=e.hs,this.la=X();let n=this.Ta(e.documents);return this.applyChanges(n,!0)}ga(){return bs.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}},G_=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},z_=class{constructor(e){this.key=e,this.pa=!1}},W_=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.ya={},this.wa=new ei(a=>gA(a),Uh),this.Sa=new Map,this.ba=new Set,this.Da=new Re(x.comparator),this.Ca=new Map,this.va=new Dc,this.Fa={},this.Ma=new Map,this.xa=Ec.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}};function z$(t,e,n=!0){return f(this,null,function*(){let r=YA(t),i,o=r.wa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.ga()):i=yield GA(r,e,n,!0),i})}function W$(t,e){return f(this,null,function*(){let n=YA(t);yield GA(n,e,!0,!1)})}function GA(t,e,n,r){return f(this,null,function*(){let i=yield R$(t.localStore,jn(e)),o=i.targetId,s=n?t.sharedClientState.addLocalQueryTarget(o):"not-current",a;return r&&(a=yield K$(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&UA(t.remoteStore,i),a})}function K$(t,e,n,r,i){return f(this,null,function*(){t.Na=(d,h,p)=>function(I,w,A,te){return f(this,null,function*(){let K=w.view.Ta(A);K.Xi&&(K=yield KS(I.localStore,w.query,!1).then(({documents:rt})=>w.view.Ta(rt,K)));let ve=te&&te.targetChanges.get(w.targetId),Ye=te&&te.targetMismatches.get(w.targetId)!=null,ue=w.view.applyChanges(K,I.isPrimaryClient,ve,Ye);return ZS(I,w.targetId,ue.Va),ue.snapshot})}(t,d,h,p);let o=yield KS(t.localStore,e,!0),s=new q_(e,o.hs),a=s.Ta(o.documents),c=Ic.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=s.applyChanges(a,t.isPrimaryClient,c);ZS(t,n,u.Va);let l=new G_(e,n,s);return t.wa.set(e,l),t.Sa.has(n)?t.Sa.get(n).push(e):t.Sa.set(n,[e]),u.snapshot})}function Q$(t,e,n){return f(this,null,function*(){let r=B(t),i=r.wa.get(e),o=r.Sa.get(i.targetId);if(o.length>1)return r.Sa.set(i.targetId,o.filter(s=>!Uh(s,e))),void r.wa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield R_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&yI(r.remoteStore,i.targetId),K_(r,i.targetId)}).catch(Ac))):(K_(r,i.targetId),yield R_(r.localStore,i.targetId,!0))})}function Y$(t,e){return f(this,null,function*(){let n=B(t),r=n.wa.get(e),i=n.Sa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),yI(n.remoteStore,r.targetId))})}function J$(t,e,n){return f(this,null,function*(){let r=iH(t);try{let i=yield function(s,a){let c=B(s),u=ye.now(),l=a.reduce((p,g)=>p.add(g.key),X()),d,h;return c.persistence.runTransaction("Locally write mutations","readwrite",p=>{let g=pr(),I=X();return c.os.getEntries(p,l).next(w=>{g=w,g.forEach((A,te)=>{te.isValidDocument()||(I=I.add(A))})}).next(()=>c.localDocuments.getOverlayedDocuments(p,g)).next(w=>{d=w;let A=[];for(let te of a){let K=r$(te,d.get(te.key).overlayedDocument);K!=null&&A.push(new mr(te.key,K,cA(K.value.mapValue),hr.exists(!0)))}return c.mutationQueue.addMutationBatch(p,u,A,a)}).next(w=>{h=w;let A=w.applyToLocalDocumentSet(d,I);return c.documentOverlayCache.saveOverlays(p,w.batchId,A)})}).then(()=>({batchId:h.batchId,changes:_A(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let u=s.Fa[s.currentUser.toKey()];u||(u=new Re(ce)),u=u.insert(a,c),s.Fa[s.currentUser.toKey()]=u}(r,i.batchId,n),yield xc(r,i.changes),yield Hh(r.remoteStore)}catch(i){let o=wI(i,"Failed to persist write");n.reject(o)}})}function zA(t,e){return f(this,null,function*(){let n=B(t);try{let r=yield T$(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Ca.get(o);s&&(we(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.pa=!0:i.modifiedDocuments.size>0?we(s.pa):i.removedDocuments.size>0&&(we(s.pa),s.pa=!1))}),yield xc(n,r,e)}catch(r){yield Ac(r)}})}function JS(t,e,n){let r=B(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.wa.forEach((o,s)=>{let a=s.view.G_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=B(s);c.onlineState=a;let u=!1;c.queries.forEach((l,d)=>{for(let h of d.Q_)h.G_(a)&&(u=!0)}),u&&EI(c)}(r.eventManager,e),i.length&&r.ya.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Z$(t,e,n){return f(this,null,function*(){let r=B(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Ca.get(e),o=i&&i.key;if(o){let s=new Re(x.comparator);s=s.insert(o,un.newNoDocument(o,H.min()));let a=X().add(o),c=new yh(H.min(),new Map,new Re(ce),s,a);yield zA(r,c),r.Da=r.Da.remove(o),r.Ca.delete(e),DI(r)}else yield R_(r.localStore,e,!1).then(()=>K_(r,e,n)).catch(Ac)})}function X$(t,e){return f(this,null,function*(){let n=B(t),r=e.batch.batchId;try{let i=yield b$(n.localStore,e);KA(n,r,null),WA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield xc(n,i)}catch(i){yield Ac(i)}})}function eH(t,e,n){return f(this,null,function*(){let r=B(t);try{let i=yield function(s,a){let c=B(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let l;return c.mutationQueue.lookupMutationBatch(u,a).next(d=>(we(d!==null),l=d.keys(),c.mutationQueue.removeMutationBatch(u,d))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,l,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,l)).next(()=>c.localDocuments.getDocuments(u,l))})}(r.localStore,e);KA(r,e,n),WA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield xc(r,i)}catch(i){yield Ac(i)}})}function WA(t,e){(t.Ma.get(e)||[]).forEach(n=>{n.resolve()}),t.Ma.delete(e)}function KA(t,e,n){let r=B(t),i=r.Fa[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Fa[r.currentUser.toKey()]=i}}function K_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Sa.get(e))t.wa.delete(r),n&&t.ya.La(r,n);t.Sa.delete(e),t.isPrimaryClient&&t.va.Vr(e).forEach(r=>{t.va.containsKey(r)||QA(t,r)})}function QA(t,e){t.ba.delete(e.path.canonicalString());let n=t.Da.get(e);n!==null&&(yI(t.remoteStore,n),t.Da=t.Da.remove(e),t.Ca.delete(n),DI(t))}function ZS(t,e,n){for(let r of n)r instanceof Mh?(t.va.addReference(r.key,e),tH(t,r)):r instanceof xh?(b("SyncEngine","Document no longer in limbo: "+r.key),t.va.removeReference(r.key,e),t.va.containsKey(r.key)||QA(t,r.key)):F()}function tH(t,e){let n=e.key,r=n.path.canonicalString();t.Da.get(n)||t.ba.has(r)||(b("SyncEngine","New document in limbo: "+n),t.ba.add(r),DI(t))}function DI(t){for(;t.ba.size>0&&t.Da.size<t.maxConcurrentLimboResolutions;){let e=t.ba.values().next().value;t.ba.delete(e);let n=new x(be.fromString(e)),r=t.xa.next();t.Ca.set(r,new z_(n)),t.Da=t.Da.insert(n,r),UA(t.remoteStore,new wc(jn(pA(n.path)),r,"TargetPurposeLimboResolution",oA._e))}}function xc(t,e,n){return f(this,null,function*(){let r=B(t),i=[],o=[],s=[];r.wa.isEmpty()||(r.wa.forEach((a,c)=>{s.push(r.Na(c,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,u?.fromCache?"not-current":"current"),u){i.push(u);let l=b_.Ki(c.targetId,u);o.push(l)}}))}),yield Promise.all(s),r.ya.u_(i),yield function(c,u){return f(this,null,function*(){let l=B(c);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>y.forEach(u,h=>y.forEach(h.qi,p=>l.persistence.referenceDelegate.addReference(d,h.targetId,p)).next(()=>y.forEach(h.Qi,p=>l.persistence.referenceDelegate.removeReference(d,h.targetId,p)))))}catch(d){if(!Rc(d))throw d;b("LocalStore","Failed to update sequence numbers: "+d)}for(let d of u){let h=d.targetId;if(!d.fromCache){let p=l.ns.get(h),g=p.snapshotVersion,I=p.withLastLimboFreeSnapshotVersion(g);l.ns=l.ns.insert(h,I)}}})}(r.localStore,o))})}function nH(t,e){return f(this,null,function*(){let n=B(t);if(!n.currentUser.isEqual(e)){b("SyncEngine","User change. New user:",e.toKey());let r=yield VA(n.localStore,e);n.currentUser=e,function(o,s){o.Ma.forEach(a=>{a.forEach(c=>{c.reject(new T(m.CANCELLED,s))})}),o.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield xc(n,r.us)}})}function rH(t,e){let n=B(t),r=n.Ca.get(e);if(r&&r.pa)return X().add(r.key);{let i=X(),o=n.Sa.get(e);if(!o)return i;for(let s of o){let a=n.wa.get(s);i=i.unionWith(a.view.Ia)}return i}}function YA(t){let e=B(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=zA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Z$.bind(null,e),e.ya.u_=q$.bind(null,e.eventManager),e.ya.La=G$.bind(null,e.eventManager),e}function iH(t){let e=B(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=X$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=eH.bind(null,e),e}var Nh=class{constructor(){this.synchronizeTabs=!1}initialize(e){return f(this,null,function*(){this.serializer=Bh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return C$(this.persistence,new S_,e.initialUser,this.serializer)}createPersistence(e){return new E_(C_.Hr,this.serializer)}createSharedClientState(e){return new M_}terminate(){return f(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Q_=class{initialize(e,n){return f(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>JS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=nH.bind(null,this.syncEngine),yield B$(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new B_}()}createDatastore(e){let n=Bh(e.databaseInfo.databaseId),r=function(o){return new P_(o)}(e.databaseInfo);return function(o,s,a,c){return new F_(o,s,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new L_(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>JS(this.syncEngine,n,0),function(){return Ch.D()?new Ch:new x_}())}createSyncEngine(e,n){return function(i,o,s,a,c,u,l){let d=new W_(i,o,s,a,c,u);return l&&(d.Oa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return f(this,null,function*(){var e;yield function(r){return f(this,null,function*(){let i=B(r);b("RemoteStore","RemoteStore shutting down."),i.v_.add(5),yield Mc(i),i.M_.shutdown(),i.x_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var Y_=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):$n("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var J_=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Qe.UNAUTHENTICATED,this.clientId=lh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>f(this,null,function*(){b("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(b("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new T(m.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new cn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>f(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=wI(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Dv(t,e){return f(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),b("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>f(this,null,function*(){r.isEqual(i)||(yield VA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function XS(t,e){return f(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield sH(t);b("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>QS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>QS(e.remoteStore,i)),t._onlineComponents=e})}function oH(t){return t.name==="FirebaseError"?t.code===m.FAILED_PRECONDITION||t.code===m.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function sH(t){return f(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){b("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Dv(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!oH(n))throw n;ms("Error using user provided cache. Falling back to memory cache: "+n),yield Dv(t,new Nh)}}else b("FirestoreClient","Using default OfflineComponentProvider"),yield Dv(t,new Nh);return t._offlineComponents})}function JA(t){return f(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(b("FirestoreClient","Using user provided OnlineComponentProvider"),yield XS(t,t._uninitializedComponentsProvider._online)):(b("FirestoreClient","Using default OnlineComponentProvider"),yield XS(t,new Q_))),t._onlineComponents})}function aH(t){return JA(t).then(e=>e.syncEngine)}function cH(t){return f(this,null,function*(){let e=yield JA(t),n=e.eventManager;return n.onListen=z$.bind(null,e.syncEngine),n.onUnlisten=Q$.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=W$.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Y$.bind(null,e.syncEngine),n})}function uH(t,e,n={}){let r=new cn;return t.asyncQueue.enqueueAndForget(()=>f(this,null,function*(){return function(o,s,a,c,u){let l=new Y_({next:h=>{s.enqueueAndForget(()=>H$(o,d)),h.fromCache&&c.source==="server"?u.reject(new T(m.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),d=new H_(a,l,{includeMetadataChanges:!0,ta:!0});return $$(o,d)}(yield cH(t),t.asyncQueue,e,n,r)})),r.promise}function ZA(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var eA=new Map;function XA(t,e,n){if(!n)throw new T(m.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function lH(t,e,n,r){if(e===!0&&r===!0)throw new T(m.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function tA(t){if(!x.isDocumentKey(t))throw new T(m.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function nA(t){if(x.isDocumentKey(t))throw new T(m.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function qh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":F()}function eo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new T(m.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=qh(t);throw new T(m.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Ph=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new T(m.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new T(m.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lH("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ZA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new T(m.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new T(m.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new T(m.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ts=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ph({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new T(m.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new T(m.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ph(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Cv;switch(r.type){case"firstParty":return new Av(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new T(m.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=eA.get(n);r&&(b("ComponentProvider","Removing Datastore"),eA.delete(n),r.terminate())}(this),Promise.resolve()}};function dH(t,e,n,r={}){var i;let o=(t=eo(t,Ts))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&ms("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Qe.MOCK_USER;else{a=rC(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new T(m.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Qe(u)}t._authCredentials=new bv(new uh(a,c))}}var Ss=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Nt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Zr=class t extends Ss{constructor(e,n,r){super(e,n,pA(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Nt(this.firestore,null,new x(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function xs(t,e,...n){if(t=mt(t),XA("collection","path",e),t instanceof Ts){let r=be.fromString(e,...n);return nA(r),new Zr(t,null,r)}{if(!(t instanceof Nt||t instanceof Zr))throw new T(m.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(be.fromString(e,...n));return nA(r),new Zr(t.firestore,null,r)}}function Gh(t,e,...n){if(t=mt(t),arguments.length===1&&(e=lh.newId()),XA("doc","path",e),t instanceof Ts){let r=be.fromString(e,...n);return tA(r),new Nt(t,null,new x(r))}{if(!(t instanceof Nt||t instanceof Zr))throw new T(m.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(be.fromString(e,...n));return tA(r),new Nt(t.firestore,t instanceof Zr?t.converter:null,new x(r))}}var Z_=class{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new bh(this,"async_queue_retry"),this.cu=()=>{let n=Ev();n&&b("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};let e=Ev();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;let n=Ev();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});let n=new cn;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}Pu(){return f(this,null,function*(){if(this.ru.length!==0){try{yield this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!Rc(e))throw e;b("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}})}hu(e){let n=this.nu.then(()=>(this._u=!0,e().catch(r=>{this.ou=r,this._u=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw $n("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this._u=!1,r))));return this.nu=n,n}enqueueAfterDelay(e,n,r){this.lu(),this.uu.indexOf(e)>-1&&(n=0);let i=U_.createAndSchedule(this,e,n,r,o=>this.Iu(o));return this.su.push(i),i}lu(){this.ou&&F()}verifyOperationInProgress(){}Tu(){return f(this,null,function*(){let e;do e=this.nu,yield e;while(e!==this.nu)})}Eu(e){for(let n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.su)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){let n=this.su.indexOf(e);this.su.splice(n,1)}};var to=class extends Ts{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new Z_}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||tR(this),this._firestoreClient.terminate()}};function Ns(t,e){let n=typeof t=="object"?t:Ko(),r=typeof t=="string"?t:e||"(default)",i=ba(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=nC("firestore");o&&dH(i,...o)}return i}function eR(t){return t._firestoreClient||tR(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function tR(t){var e,n,r;let i=t._freezeSettings(),o=function(a,c,u,l){return new Fv(a,c,u,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,ZA(l.experimentalLongPollingOptions),l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new J_(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var Cc=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(yt.fromBase64String(e))}catch(n){throw new T(m.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var bc=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new T(m.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Oh=class{constructor(e){this._methodName=e}};var Tc=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new T(m.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new T(m.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}};var hH=/^__.*__$/,X_=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new mr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Xi(e,this.data,n,this.fieldTransforms)}};function nR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw F()}}var eI=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ru(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.pu(e),i}yu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.Ru(),i}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return kh(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(e.length===0)throw this.Su("Document fields must not be empty");if(nR(this.Vu)&&hH.test(e))throw this.Su('Document fields cannot begin and end with "__"')}},tI=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Bh(e)}Cu(e,n,r,i=!1){return new eI({Vu:e,methodName:n,Du:r,path:xt.emptyPath(),gu:!1,bu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function CI(t){let e=t._freezeSettings(),n=Bh(t._databaseId);return new tI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function rR(t,e,n,r,i,o={}){let s=t.Cu(o.merge||o.mergeFields?2:0,e,n,i);sR("Data must be an object, but it was:",s,r);let a=iR(r,s),c,u;if(o.merge)c=new Ln(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let l=[];for(let d of o.mergeFields){let h=pH(e,d,n);if(!s.contains(h))throw new T(m.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);gH(l,h)||l.push(h)}c=new Ln(l),u=s.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,u=s.fieldTransforms;return new X_(new an(a),c,u)}function fH(t,e,n,r=!1){return bI(n,t.Cu(r?4:3,e))}function bI(t,e){if(oR(t=mt(t)))return sR("Unsupported field value:",e,t),iR(t,e);if(t instanceof Oh)return function(r,i){if(!nR(i.Vu))throw i.Su(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Su(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.gu&&e.Vu!==4)throw e.Su("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=bI(a,i.wu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=mt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ZB(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=ye.fromDate(r);return{timestampValue:wh(i.serializer,o)}}if(r instanceof ye){let o=new ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:wh(i.serializer,o)}}if(r instanceof Tc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Cc)return{bytesValue:MA(i.serializer,r._byteString)};if(r instanceof Nt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Su(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:gI(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Su(`Unsupported field value: ${qh(r)}`)}(t,e)}function iR(t,e){let n={};return sA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rs(t,(r,i)=>{let o=bI(i,e.fu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function oR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ye||t instanceof Tc||t instanceof Cc||t instanceof Nt||t instanceof Oh)}function sR(t,e,n){if(!oR(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=qh(n);throw r==="an object"?e.Su(t+" a custom object"):e.Su(t+" "+r)}}function pH(t,e,n){if((e=mt(e))instanceof bc)return e._internalPath;if(typeof e=="string")return aR(t,e);throw kh("Field path arguments must be of type string or ",t,!1,void 0,n)}var mH=new RegExp("[~\\*/\\[\\]]");function aR(t,e,n){if(e.search(mH)>=0)throw kh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new bc(...e.split("."))._internalPath}catch{throw kh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function kh(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new T(m.INVALID_ARGUMENT,a+t+c)}function gH(t,e){return t.some(n=>n.isEqual(e))}var Fh=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new nI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(TI("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},nI=class extends Fh{data(){return super.data()}};function TI(t,e){return typeof e=="string"?aR(t,e):e instanceof bc?e._internalPath:e._delegate._internalPath}function yH(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new T(m.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Sc=class{},rI=class extends Sc{};function zh(t,e,...n){let r=[];e instanceof Sc&&r.push(e),r=r.concat(n),function(o){let s=o.filter(c=>c instanceof iI).length,a=o.filter(c=>c instanceof Vh).length;if(s>1||s>0&&a>0)throw new T(m.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var Vh=class t extends rI{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return cR(e._query,n),new Ss(e.firestore,e.converter,Qv(e._query,n))}_parse(e){let n=CI(e.firestore);return function(o,s,a,c,u,l,d){let h;if(u.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new T(m.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){iA(d,l);let p=[];for(let g of d)p.push(rA(c,o,g));h={arrayValue:{values:p}}}else h=rA(c,o,d)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||iA(d,l),h=fH(a,s,d,l==="in"||l==="not-in");return Ue.create(u,l,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function Nc(t,e,n){let r=e,i=TI("where",t);return Vh._create(i,r,n)}var iI=class t extends Sc{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ln.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)cR(s,c),s=Qv(s,c)}(e._query,n),new Ss(e.firestore,e.converter,Qv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function rA(t,e,n){if(typeof(n=mt(n))=="string"){if(n==="")throw new T(m.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mA(e)&&n.indexOf("/")!==-1)throw new T(m.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(be.fromString(n));if(!x.isDocumentKey(r))throw new T(m.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xS(t,new x(r))}if(n instanceof Nt)return xS(t,n._key);throw new T(m.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qh(n)}.`)}function iA(t,e){if(!Array.isArray(t)||t.length===0)throw new T(m.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function cR(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new T(m.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new T(m.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var oI=class{convertValue(e,n="none"){switch(Qi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ae(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Xr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw F()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Rs(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(e){return new Tc(Ae(e.latitude),Ae(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=hI(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(yc(e));default:return null}}convertTimestamp(e){let n=fr(e);return new ye(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=be.fromString(e);we(FA(r));let i=new mh(r.get(1),r.get(3)),o=new x(r.popFirst(5));return i.isEqual(n)||$n(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function uR(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var hs=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},sI=class extends Fh{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new ps(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(TI("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},ps=class extends sI{data(e={}){return super.data(e)}},aI=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new hs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ps(this._firestore,this._userDataWriter,r.key,r,new hs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new T(m.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new ps(i._firestore,i._userDataWriter,a.doc.key,a.doc,new hs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new ps(i._firestore,i._userDataWriter,a.doc.key,a.doc,new hs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,l=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),l=s.indexOf(a.doc.key)),{type:vH(a.type),doc:c,oldIndex:u,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function vH(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return F()}}var cI=class extends oI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cc(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,n)}};function Wh(t){t=eo(t,Ss);let e=eo(t.firestore,to),n=eR(e),r=new cI(e);return yH(t._query),uH(n,t._query).then(i=>new aI(e,r,t,i))}function SI(t,e,n){t=eo(t,Nt);let r=eo(t.firestore,to),i=uR(t.converter,e,n);return AI(r,[rR(CI(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,hr.none())])}function lR(t){return AI(eo(t.firestore,to),[new _c(t._key,hr.none())])}function dR(t,e){let n=eo(t.firestore,to),r=Gh(t),i=uR(t.converter,e);return AI(n,[rR(CI(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,hr.exists(!1))]).then(()=>r)}function AI(t,e){return function(r,i){let o=new cn;return r.asyncQueue.enqueueAndForget(()=>f(this,null,function*(){return J$(yield aH(r),i,o)})),o.promise}(eR(t),e)}(function(e,n=!0){(function(i){As=i})(jr),Ur(new Ht("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new to(new Tv(r.getProvider("auth-internal")),new Mv(r.getProvider("app-check-internal")),function(u,l){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new T(m.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mh(u.options.projectId,l)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),et(SS,"4.6.0",e),et(SS,"4.6.0","esm2017")})();var Gt=class{constructor(e,n,r,i,o,s,a,c,u,l,d,h){this.id=e,this.date=n,this.name=r,this.number=i,this.email=o,this.booking_type=s,this.start_time=a,this.end_time=c,this.total_amount=u,this.amount_received=l,this.balance=d,this.comments=h}toDictionary(){return{id:this.id,date:this.date,name:this.name,number:this.number,email:this.email,booking_type:this.booking_type,start_time:this.start_time,end_time:this.end_time,total_amount:this.total_amount,amount_received:this.amount_received,balance:this.balance,comments:this.comments}}};var Kh=(()=>{let e=class e{constructor(){this.startTimes=["---","9:00 am","9:30 am","10:00 am","10:30 am","11:00 am","11:30 am","12:00 pm","12:30 pm","1:00 pm","1:30 pm","2:00 pm","2:30 pm","3:00 pm","3:30 pm","4:00 pm","4:30 pm","5:00 pm","5:30 pm","6:00 pm","6:30 pm","7:00 pm","7:30 pm","8:00 pm","8:30 pm","9:00 pm","9:30 pm"],this.formFields=["---","date","name","number","email","booking_type","start_time","end_time","total_amount","amount_received","balance","comments"]}getStartTimes(){return this.startTimes}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Et=(()=>{let e=class e{createNewBooking(){return new Gt("",ye.now(),"",0,"","","","",0,0,0,"")}bookingDictToModel(r){return new Gt(r.id,r.date,r.name,r.number,r.email,r.booking_type,r.start_time,r.end_time,r.total_amount,r.amount_received,r.balance,r.comments)}getBookingData(r){let o=new Gt("",r.date,r.name,r.number,r.email,r.booking_type,r.start_time,r.end_time,r.total_amount,r.amount_received,r.balance,r.comments).toDictionary();return o.date=this.htmlDateToTimestamp(o.date),o}getBookingForm(){return this.bookingForm}openPageExcelUpload(){this.currentPage=""}setCurrentPage(r){r==="previous"?(this.currentPage=this.lastPage,this.lastPage="home"):this.currentPage=r}htmlDateToTimestamp(r){let i=new Date(r),o=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,1,0);return ye.fromDate(o)}calculateDurationHours(r,i){let o=new Kh().startTimes,s=o.indexOf(r),a=o.indexOf(i);return s===-1||a===-1?0:(a-s)*.5}constructor(){this.currentPage="excel-form",this.lastPage="home",this.showBookingsForYear=new Date().getFullYear(),this.showBookingsForMonth=new Date().getMonth()+1,this.pages={home:"home","excel-match":"excel-match","excel-form":"excel-form","all-booking":"all-booking","add-booking":"add-booking"},this.bookingForm=new wt({id:new Ce(""),date:new Ce("",zr.required),name:new Ce("",zr.required),number:new Ce(""),email:new Ce(""),booking_type:new Ce(""),start_time:new Ce(""),end_time:new Ce(""),total_amount:new Ce(0),amount_received:new Ce(0),balance:new Ce(0),comments:new Ce("")}),this.firstExcelData=[],this.fullExcelData=[]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function _H(t,e){if(t&1){let n=Xn();_(0,"tr")(1,"th",4),D(2),ko(3,"date"),j(4,"br"),D(5),ko(6,"date"),v(),_(7,"td"),D(8),j(9,"br"),D(10),j(11,"br"),D(12),v(),_(13,"td"),D(14),j(15,"br"),D(16),j(17,"br"),D(18),v(),_(19,"td")(20,"button",5),he("click",function(){let i=In(n).$implicit,o=st();return wn(o.updateBooking(i.id))}),D(21,"Update"),v()()()}if(t&2){let n=e.$implicit,r=st();P(2),Cn(" ",Fo(3,8,n.date.toDate(),"dd-MM-yyyy"),""),P(3),Cn(" ",Fo(6,11,n.date.toDate(),"EEEE")," "),P(3),ke(n.name),P(2),ke(n.number),P(2),ke(n.booking_type),P(2),ke(n.start_time),P(2),ke(n.end_time),P(2),Cn("",r.getDurhour(n.start_time,n.end_time)," hr")}}var hR=(()=>{let e=class e{constructor(r){this.sharedService=r,this.db=Ns(),this.bookings=[]}ngOnInit(){this.get2daysBooking()}getDurhour(r,i){return""}updateBooking(r){}get2daysBooking(){return f(this,null,function*(){let r=new Date().getFullYear(),i=new Date().getMonth(),o=new Date(r,i,1),s=zh(xs(this.db,"bookings"),Nc("date",">=",ye.fromDate(o))),a=yield Wh(s);this.bookings=[],a.forEach(c=>{console.log(c.id," => ",c.data());let u=c.data(),l=new Gt(c.id,u.date,u.name,u.number,u.email,u.booking_type,u.start_time,u.end_time,u.total_amount,u.amount_received,u.balance,u.comments);this.bookings.push(l)})})}};e.\u0275fac=function(i){return new(i||e)(M(Et))},e.\u0275cmp=He({type:e,selectors:[["app-bookings"]],standalone:!0,features:[Ge],decls:16,vars:1,consts:[[1,"container"],[1,"table","table-hover"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],["type","button",1,"btn","btn-primary","mx-1",3,"click"]],template:function(i,o){i&1&&(_(0,"div",0)(1,"h3"),D(2," Today & Later "),v()(),_(3,"table",1)(4,"thead")(5,"tr")(6,"th",2),D(7,"Date"),v(),_(8,"th",2),D(9,"Booked by"),v(),_(10,"th",2),D(11,"Slot"),v(),_(12,"th",2),D(13,"Completed?"),v()()(),_(14,"tbody"),qe(15,_H,22,14,"tr",3),v()()),i&2&&(P(15),ee("ngForOf",o.bookings))},dependencies:[nn,Pr,_l]});let t=e;return t})();var fR=(()=>{let e=class e{constructor(){this.firebaseAuth=E(rn),this.sharedService=E(Et)}logout(){console.log("Logging out"),this.firebaseAuth.signOut()}showPage(r){r==="add-booking"&&this.sharedService.bookingForm.reset(),this.sharedService.lastPage="home",this.sharedService.currentPage=r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=He({type:e,selectors:[["app-navbar"]],standalone:!0,features:[Ge],decls:21,vars:0,consts:[["data-bs-theme","dark",1,"navbar","navbar-expand-lg","bg-dark"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarColor02","aria-controls","navbarColor02","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarColor02",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto"],[1,"nav-item"],[1,"nav-link",3,"click"],[1,"visually-hidden"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-secondary","my-2","my-sm-0",3,"click"]],template:function(i,o){i&1&&(_(0,"nav",0)(1,"div",1)(2,"a",2),D(3,"Navbar"),v(),_(4,"button",3),j(5,"span",4),v(),_(6,"div",5)(7,"ul",6)(8,"li",7)(9,"button",8),he("click",function(){return o.showPage("home")}),D(10,"Home "),_(11,"span",9),D(12,"(current)"),v()()(),_(13,"li",7)(14,"button",8),he("click",function(){return o.showPage("all-booking")}),D(15,"All Bookings"),v()(),_(16,"li",7)(17,"button",10),he("click",function(){return o.showPage("add-booking")}),D(18,"Add Booking"),v()()(),_(19,"button",11),he("click",function(){return o.logout()}),D(20,"Logout"),v()()()())}});let t=e;return t})();var Yh=(()=>{let e=class e{constructor(){this.db=Ns()}addBooking(r){return f(this,null,function*(){console.log(r);try{let i=yield dR(xs(this.db,"bookings"),r);yield SI(i,le(S({},r),{id:i.id}))}catch(i){console.error("Error writing document: ",i)}})}updateBooking(r,i){return f(this,null,function*(){let o=S({},r);yield SI(Gh(this.db,"bookings",i),o)})}deleteBooking(r){return f(this,null,function*(){yield lR(Gh(this.db,"bookings",r))})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function IH(t,e){if(t&1){let n=Xn();_(0,"button",31),he("click",function(){In(n);let i=st();return wn(i.sharedService.setCurrentPage("excel-form"))}),D(1,` Upload Excel
`),v()}}function wH(t,e){if(t&1){let n=Xn();_(0,"div",32)(1,"button",33),he("click",function(){In(n);let i=st();return wn(i.sharedService.setCurrentPage("previous"))}),D(2," Close "),v(),_(3,"button",34),he("click",function(){In(n);let i=st();return wn(i.onDelete())}),D(4," Delete Booking "),v()()}}function EH(t,e){if(t&1&&(_(0,"option"),D(1),v()),t&2){let n=e.$implicit;P(),ke(n)}}function DH(t,e){if(t&1&&(_(0,"option"),D(1),v()),t&2){let n=e.$implicit;P(),ke(n)}}var pR=(()=>{let e=class e{constructor(){this.startTimes=[],this.bookingForm=new wt({}),this.constantsService=E(Kh),this.sharedService=E(Et),this.firestoreService=E(Yh),this.startTimes=this.constantsService.getStartTimes(),this.bookingForm=this.sharedService.getBookingForm(),console.log(this.bookingForm.value)}onSubmit(){console.warn(this.bookingForm.value),this.bookingData=this.bookingForm.value;let r=this.sharedService.getBookingData(this.bookingData);this.bookingData.id!==null&&this.bookingData.id!==""?(console.log("updateData()"),this.firestoreService.updateBooking(r,this.bookingData.id),this.sharedService.currentPage=this.sharedService.lastPage):(console.log("addData()"),this.firestoreService.addBooking(r))}onDelete(){console.log("onDelete()"),confirm("Are you sure you want to delete this booking?")&&(this.bookingData=this.bookingForm.value,this.firestoreService.deleteBooking(this.bookingData.id),console.log("Delete Successful"),this.sharedService.currentPage=this.sharedService.pages["all-booking"])}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=He({type:e,selectors:[["app-bookingform"]],standalone:!0,features:[Ge],decls:55,vars:8,consts:[["type","button","class","btn btn-primary mx-1",3,"click",4,"ngIf"],["class","d-flex flex-row-reverse",4,"ngIf"],[1,"container"],[1,"row",3,"ngSubmit","formGroup"],["id","id","hidden","","formControlName","id"],[1,"col-12","col-lg-6"],["for","date",1,"form-label","mt-4"],["id","date","type","date","placeholder","Enter Date","formControlName","date",1,"form-control"],["for","name",1,"form-label","mt-4"],["id","name","type","text","placeholder","Enter Name","formControlName","name",1,"form-control"],["for","number",1,"form-label","mt-4"],["id","number","type","tel","placeholder","Enter Mobile","formControlName","number",1,"form-control"],["for","email",1,"form-label","mt-4"],["id","email","type","email","placeholder","Enter Email","formControlName","email",1,"form-control"],["for","booking_type",1,"form-label","mt-4"],["id","booking_type","type","text","placeholder","Enter Booking Type","formControlName","booking_type",1,"form-control"],[1,"col-6","col-lg-6"],["for","start_time",1,"form-label","mt-4"],["id","start_time","formControlName","start_time",1,"form-select"],[4,"ngFor","ngForOf"],["for","end_time",1,"form-label","mt-4"],["id","end_time","formControlName","end_time",1,"form-select"],["for","total_amount",1,"form-label","mt-4"],["id","total_amount","type","number","placeholder","Enter Total Amount","formControlName","total_amount",1,"form-control"],["for","amount_received",1,"form-label","mt-4"],["id","amount_received","type","number","placeholder","Enter Amount Received","formControlName","amount_received",1,"form-control"],["for","balance",1,"form-label","mt-4"],["id","balance","type","number","formControlName","balance",1,"form-control",3,"readOnly","value"],["for","comments",1,"form-label","mt-4"],["id","comments","type","text","placeholder","Enter Comments","formControlName","comments",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-primary","mx-1",3,"click"],[1,"d-flex","flex-row-reverse"],["type","button",1,"btn","btn-primary","mx-1","float-end",3,"click"],["type","button",1,"btn","btn-danger","mx-1","float-end",3,"click"]],template:function(i,o){if(i&1&&(qe(0,IH,2,0,"button",0)(1,wH,5,0,"div",1),_(2,"div",2)(3,"form",3),he("ngSubmit",function(){return o.onSubmit()}),j(4,"input",4),_(5,"div",5)(6,"label",6),D(7,"Date: "),v(),j(8,"input",7),v(),_(9,"div",5)(10,"label",8),D(11,"Name: "),v(),j(12,"input",9),v(),_(13,"div",5)(14,"label",10),D(15,"Mobile No.: "),v(),j(16,"input",11),v(),_(17,"div",5)(18,"label",12),D(19,"Email: "),v(),j(20,"input",13),v(),_(21,"div",5)(22,"label",14),D(23,"Booking Type: "),v(),j(24,"input",15),v(),_(25,"div",16)(26,"label",17),D(27,"Start Time"),v(),_(28,"select",18),qe(29,EH,2,1,"option",19),v()(),_(30,"div",16)(31,"label",20),D(32,"End Time"),v(),_(33,"select",21),qe(34,DH,2,1,"option",19),v()(),_(35,"div",5)(36,"label",22),D(37,"Total Amount: "),v(),j(38,"input",23),v(),_(39,"div",5)(40,"label",24),D(41,"Amount Received: "),v(),j(42,"input",25),v(),_(43,"div",5)(44,"label",26),D(45,"Balance: "),v(),j(46,"input",27),v(),_(47,"div",5)(48,"label",28),D(49,"Comments: "),v(),j(50,"input",29),v(),_(51,"p"),D(52,"Complete the form to enable button."),v(),_(53,"button",30),D(54," Submit "),v()()()),i&2){let s,a;ee("ngIf",((s=o.bookingForm.get("id"))==null?null:s.value)===""||!((s=o.bookingForm.get("id"))!=null&&s.value)),P(),ee("ngIf",((a=o.bookingForm.get("id"))==null?null:a.value)!==""&&((a=o.bookingForm.get("id"))==null?null:a.value)),P(2),ee("formGroup",o.bookingForm),P(26),ee("ngForOf",o.startTimes),P(5),ee("ngForOf",o.startTimes),P(12),ee("readOnly",!0)("value",o.bookingForm.get("total_amount").value-o.bookingForm.get("amount_received").value),P(7),ee("disabled",!o.bookingForm.valid)}},dependencies:[Qr,Pn,es,ts,Wr,Ry,Kr,xn,Nn,cr,ur,nn,Pr,vl]});let t=e;return t})();function CH(t,e){if(t&1&&(_(0,"option",11),D(1),v()),t&2){let n=e.$implicit;ee("value",n),P(),ke(n)}}function bH(t,e){if(t&1&&(_(0,"option",11),D(1),v()),t&2){let n=e.$implicit;ee("value",n),P(),ke(n)}}function TH(t,e){if(t&1){let n=Xn();_(0,"tr")(1,"th",12),D(2),ko(3,"date"),j(4,"br"),D(5),ko(6,"date"),v(),_(7,"td"),D(8),j(9,"br"),D(10),j(11,"br"),D(12),v(),_(13,"td"),D(14),j(15,"br"),D(16),j(17,"br"),D(18),v(),_(19,"td")(20,"button",13),he("click",function(){let i=In(n).$implicit,o=st();return wn(o.updateBooking(i.id))}),D(21,"Update"),v()()()}if(t&2){let n=e.$implicit,r=st();P(2),Cn(" ",Fo(3,8,n.date.toDate(),"dd-MM-yyyy"),""),P(3),Cn(" ",Fo(6,11,n.date.toDate(),"EEEE")," "),P(3),ke(n.name),P(2),ke(n.number),P(2),ke(n.booking_type),P(2),ke(n.start_time),P(2),ke(n.end_time),P(2),Cn("",r.getDurhour(n.start_time,n.end_time)," hr")}}var mR=(()=>{let e=class e{constructor(r){this.sharedService=r,this.bookings=[],this.years=[],this.months=["January","February","March","April","May","June","July","August","September","October","November","December"],this.bookMonthYear=new wt({year:new Ce(this.sharedService.showBookingsForYear),month:new Ce(this.getMonthName(this.sharedService.showBookingsForMonth))})}ngOnInit(){return f(this,null,function*(){this.bookMonthYear.get("year")?.valueChanges.subscribe(o=>{console.log("Year changed:",o),this.sharedService.showBookingsForYear=o,console.log("updating year"),this.bookings=[],this.getAllBooking()}),this.bookMonthYear.get("month")?.valueChanges.subscribe(o=>{console.log("Month changed:",o),console.log("updating month"," - current :",this.sharedService.showBookingsForMonth,"new :",o),this.sharedService.showBookingsForMonth=this.getMonthNumber(o),this.bookings=[],this.getAllBooking()}),yield this.getAllBooking(),console.log(this.bookings);let r=new Date().getFullYear(),i=2021;this.years=Array.from({length:r-i+1},(o,s)=>i+s)})}getMonthNumber(r){return this.months.indexOf(r)+1}getMonthName(r){return this.months[r-1]}getAllBooking(){return f(this,null,function*(){let r=Ns(),i=this.sharedService.showBookingsForYear,o=this.sharedService.showBookingsForMonth,s=new Date(i,o-1,1),a=new Date(i,o,0);console.log("getAllBooking()",s,a);let c=zh(xs(r,"bookings"),Nc("date",">=",ye.fromDate(s)),Nc("date","<=",ye.fromDate(a)));(yield Wh(c)).forEach(l=>{console.log(l.id," => ",l.data());let d=l.data(),h=new Gt(l.id,d.date,d.name,d.number,d.email,d.booking_type,d.start_time,d.end_time,d.total_amount,d.amount_received,d.balance,d.comments);this.bookings.push(h)})})}updateBooking(r){let i=this.bookings.find(o=>o.id===r);this.sharedService.bookingForm.patchValue({id:i.id,date:this.formatDate(i.date),name:i.name,number:i.number,email:i.email,booking_type:i.booking_type,start_time:i.start_time,end_time:i.end_time,total_amount:i.total_amount,amount_received:i.amount_received,balance:i.balance,comments:i.comments}),this.sharedService.lastPage=this.sharedService.pages["all-booking"],this.sharedService.currentPage="add-booking"}formatDate(r){let i=r.toDate(),o=""+(i.getMonth()+1),s=""+i.getDate(),a=i.getFullYear();return o.length<2&&(o="0"+o),s.length<2&&(s="0"+s),[a,o,s].join("-")}getDurhour(r,i){return this.sharedService.calculateDurationHours(r,i)}};e.\u0275fac=function(i){return new(i||e)(M(Et))},e.\u0275cmp=He({type:e,selectors:[["app-allbookings"]],standalone:!0,features:[Ge],decls:26,vars:4,consts:[[1,"container"],[3,"formGroup"],[1,"row"],[1,"col-6","col-lg-6"],["for","year",1,"form-label","mt-4"],["id","year","formControlName","year",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],["id","year","formControlName","month",1,"form-select"],[1,"table","table-hover"],["scope","col"],[4,"ngFor","ngForOf"],[3,"value"],["scope","row"],["type","button",1,"btn","btn-primary","mx-1",3,"click"]],template:function(i,o){i&1&&(_(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"label",4),D(5,"Year: "),v(),_(6,"select",5),qe(7,CH,2,2,"option",6),v()(),_(8,"div",3)(9,"label",4),D(10,"Month: "),v(),_(11,"select",7),qe(12,bH,2,2,"option",6),v()()()()(),_(13,"table",8)(14,"thead")(15,"tr")(16,"th",9),D(17,"Date"),v(),_(18,"th",9),D(19,"Booked by"),v(),_(20,"th",9),D(21,"Slot"),v(),_(22,"th",9),D(23,"Completed?"),v()()(),_(24,"tbody"),qe(25,TH,22,14,"tr",10),v()()),i&2&&(P(),ee("formGroup",o.bookMonthYear),P(6),ee("ngForOf",o.years),P(5),ee("ngForOf",o.months),P(13),ee("ngForOf",o.bookings))},dependencies:[nn,Pr,_l,Qr,Pn,es,ts,Kr,xn,Nn,cr,ur]});let t=e;return t})();var gR=(()=>{let e=class e{constructor(r){this.sharedService=r,this.excelForm=new wt({excel_data:new Ce("")})}onSubmitExcel(){console.warn(this.excelForm.value.excel_data);let r=this.excelForm.value.excel_data?.split(`
`)||[],i=[];r.forEach(o=>{let s=o.split("	");i.push(s)}),console.log("Excel lines:",i.length),this.sharedService.fullExcelData=i,this.sharedService.firstExcelData=i[0],this.sharedService.currentPage=this.sharedService.pages["excel-match"]}};e.\u0275fac=function(i){return new(i||e)(M(Et))},e.\u0275cmp=He({type:e,selectors:[["app-excel-form"]],standalone:!0,features:[Ge],decls:14,vars:2,consts:[[1,"container"],[1,"row",3,"ngSubmit","formGroup"],["for","excel_data",1,"form-label","mt-4"],["id","excel_data","cols","30","rows","10","placeholder","Paste Excel Data","formControlName","excel_data",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(i,o){i&1&&(_(0,"div",0)(1,"form",1),he("ngSubmit",function(){return o.onSubmitExcel()}),_(2,"label",2),D(3,"Excel Data: "),v(),j(4,"textarea",3),_(5,"button",4),D(6," Submit "),v()()(),_(7,"div",0)(8,"p"),D(9,"Note:"),v(),_(10,"p"),D(11,"Pasted data is split by newline (for Rows) and then split by tab (for Columns)."),v(),_(12,"p"),D(13,"Its also possible to paste 1 line data."),v()()),i&2&&(P(),ee("formGroup",o.excelForm),P(4),ee("disabled",!o.excelForm.valid))},dependencies:[Qr,Pn,Wr,xn,Nn,cr,ur]});let t=e;return t})();function SH(t,e){if(t&1&&(_(0,"option",10),D(1),v()),t&2){let n=e.$implicit,r=e.first;ee("selected",r),P(),ke(n)}}function AH(t,e){if(t&1){let n=Xn();_(0,"div",4),D(1),v(),_(2,"div",5)(3,"select",6),hm("ngModelChange",function(i){let o=In(n).index,s=st();return UD(s.selectedFields[o],i)||(s.selectedFields[o]=i),wn(i)}),qe(4,SH,2,2,"option",7),v()(),_(5,"div",5)(6,"fieldset",8),j(7,"input",9),v()()}if(t&2){let n=e.$implicit,r=e.index,i=st();P(),lm(" Row",r+1," (",i.getAlphabet(r+1),") "),P(2),Js("id","row",r,""),Js("name","select",r,""),dm("ngModel",i.selectedFields[r]),P(),ee("ngForOf",i.formFields),P(3),cm("placeholder",n)}}var yR=(()=>{let e=class e{constructor(r){this.sharedService=r,this.formFields=[],this.selectedFields=[],this.firestoreService=E(Yh),this.firstExcelData=this.sharedService.firstExcelData;let i=new Gt("",ye.now(),"",new Number,"","","","",new Number,new Number,new Number,""),o=Object.keys(i).slice(1);o.unshift("---"),this.formFields=o}ngOnInit(){this.sharedService.firstExcelData.forEach((r,i)=>{this.selectedFields[i]=this.formFields[0]})}onSubmit(){console.log("Selected Fields:",this.selectedFields),this.sharedService.fullExcelData.forEach(r=>{let i={};this.formFields.slice(1).forEach((s,a)=>{let c=this.selectedFields.indexOf(s);c!==-1?i[s]=r[c]:i[s]=""}),console.log(i);let o=this.sharedService.getBookingData(i);this.firestoreService.addBooking(o)}),this.sharedService.fullExcelData=[],this.sharedService.firstExcelData=[],this.sharedService.currentPage=this.sharedService.lastPage,this.sharedService.lastPage="home"}getAlphabet(r){return String.fromCharCode(65+r-1)}};e.\u0275fac=function(i){return new(i||e)(M(Et))},e.\u0275cmp=He({type:e,selectors:[["app-excel-match"]],standalone:!0,features:[Ge],decls:5,vars:1,consts:[[1,"container"],[1,"row",3,"ngSubmit"],["ngFor","",3,"ngForOf"],["type","submit",1,"btn","btn-primary"],[1,"col-2"],[1,"col-5"],[1,"form-select",3,"ngModelChange","id","name","ngModel"],[3,"selected",4,"ngFor","ngForOf"],["disabled",""],["id","disabledInput","type","text","disabled","",1,"form-control",3,"placeholder"],[3,"selected"]],template:function(i,o){i&1&&(_(0,"div",0)(1,"form",1),he("ngSubmit",function(){return o.onSubmit()}),qe(2,AH,8,9,"ng-template",2),_(3,"button",3),D(4,"Submit"),v()()()),i&2&&(P(2),ee("ngForOf",o.firstExcelData))},dependencies:[nn,Pr,iT,Pn,es,ts,Kr,xn,Nn,Ay,Sy]});let t=e;return t})();function RH(t,e){t&1&&(el(0),_(1,"div"),D(2,"Loading please wait. . ."),v(),tl())}function MH(t,e){t&1&&(_(0,"div"),j(1,"app-bookings"),v())}function xH(t,e){t&1&&(_(0,"div"),j(1,"app-allbookings"),v())}function NH(t,e){t&1&&(_(0,"div"),j(1,"app-bookingform"),v())}function PH(t,e){t&1&&(_(0,"div"),j(1,"app-excel-form"),v())}function OH(t,e){t&1&&(_(0,"div"),j(1,"app-excel-match"),v())}function kH(t,e){if(t&1&&(el(0),j(1,"app-navbar"),qe(2,MH,2,0,"div",3)(3,xH,2,0,"div",3)(4,NH,2,0,"div",3)(5,PH,2,0,"div",3)(6,OH,2,0,"div",3),tl()),t&2){let n=st(2);P(2),ee("ngIf",n.sharedService.currentPage==="home"),P(),ee("ngIf",n.sharedService.currentPage==="all-booking"),P(),ee("ngIf",n.sharedService.currentPage==="add-booking"),P(),ee("ngIf",n.sharedService.currentPage==="excel-form"),P(),ee("ngIf",n.sharedService.currentPage==="excel-match")}}function FH(t,e){if(t&1&&qe(0,kH,7,5,"ng-container",2),t&2){let n=st(),r=um(4);ee("ngIf",n.isLoggedin)("ngIfElse",r)}}function VH(t,e){t&1&&j(0,"app-login")}var vR=(()=>{let e=class e{constructor(){this.title="angular-essos",this.isLoggedin=null,this.firebaseAuth=E(rn),this.sharedService=E(Et)}ngOnInit(){this.checkLoginStatus()}checkLoginStatus(){this.firebaseAuth.onAuthStateChanged(r=>{r?this.isLoggedin=!0:this.isLoggedin=!1})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=He({type:e,selectors:[["app-root"]],standalone:!0,features:[Ge],decls:5,vars:2,consts:[["home",""],["login",""],[4,"ngIf","ngIfElse"],[4,"ngIf"]],template:function(i,o){if(i&1&&qe(0,RH,3,0,"ng-container",2)(1,FH,1,2,"ng-template",null,0,fm)(3,VH,1,0,"ng-template",null,1,fm),i&2){let s=um(2);ee("ngIf",o.isLoggedin===null)("ngIfElse",s)}},dependencies:[oT,nn,vl,hR,fR,pR,mR,gR,yR]});let t=e;return t})();g0(vR,bb).catch(t=>console.error(t));
